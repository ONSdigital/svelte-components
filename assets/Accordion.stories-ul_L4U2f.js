import{p as S,a as v,aj as F,$ as G,j as u,i as q,t as b,e as h,h as I,k as A,n as m,g as y,m as D,s as E,o as Z,P as N,q as T,f as $,Z as R,_ as z}from"./iframe-CbtXQGpi.js";import{i as x,w as J,c as K,d as Q}from"./create-runtime-stories-C0J-SdQq.js";import{s as M}from"./slot-BP_Qo1ZM.js";import{s as _}from"./attributes-DtFI45NK.js";import{s as H}from"./class-Dzh9Da8g.js";import{b as B}from"./this-BKjj9g-C.js";import{s as V,b as U}from"./utils-DXjJT5W2.js";import"./attributes-Co-1QMVx.js";import"./_commonjsHelpers-CqkleIqs.js";class X{constructor(t,e){this.openDetailsEls=0,this.button=t,this.buttonInner=t.querySelector(".ons-accordion__toggle-all-inner"),this.group=t.getAttribute("data-group"),this.detailsEls=e.filter(s=>s.group===this.group),this.totalDetailsEls=this.detailsEls.length,this.buttonOpenEl=this.buttonInner.querySelector(".ons-btn__text"),this.buttonOpen=this.buttonOpenEl.innerHTML.trim(),this.closeButton=t.getAttribute("data-close-all"),this.open=this.detailsEls.find(s=>s.open===!0),this.detailsEls.forEach(s=>{s.onOpen=this.onOpen.bind(this),s.onClose=this.onClose.bind(this)}),this.open&&(this.openDetailsEls=this.totalDetailsEls),this.button.addEventListener("click",this.handleButtonClick.bind(this)),this.setButton(),this.button.classList.remove("ons-u-d-no")}handleButtonClick(t){t.preventDefault();const e=!this.canClose();this.detailsEls.forEach(s=>{s.setOpen(e)})}onOpen(){this.openDetailsEls++,this.setButton()}onClose(){this.openDetailsEls--,this.setButton()}canClose(){return this.openDetailsEls===this.totalDetailsEls}setButton(){this.canClose()?(this.buttonInner.innerHTML=this.closeButton,this.button.setAttribute("data-ga-label",this.buttonOpen),this.button.setAttribute("aria-expanded","true")):(this.buttonInner.innerHTML=this.buttonOpen,this.button.setAttribute("data-ga-label",this.closeButton),this.button.setAttribute("aria-expanded","false"))}}class Y{constructor(t){this.saveState=t.getAttribute("data-save-state")==="true",this.open=t.getAttribute("data-open")==="true",this.group=t.getAttribute("data-group"),this.details=t,this.detailsHeader=this.details.querySelector(".ons-js-details-heading"),this.content=this.details.querySelector(".ons-js-details-content"),this.detailsTitle=this.details.querySelector(".ons-js-corrections-details-title");const e=t.getAttribute("id");this.details.setAttribute("role","group"),this.detailsHeader.setAttribute("role","link"),this.detailsHeader.setAttribute("aria-controls",e),this.detailsHeader.setAttribute("tabindex",0),localStorage.getItem(e)||this.open?this.setOpen(!0):this.setOpen(!1),this.detailsHeader.addEventListener("click",this.toggle.bind(this)),this.detailsHeader.addEventListener("keydown",this.keyboardInteraction.bind(this)),this.details.classList.add("ons-details--initialised")}toggle(t){t.preventDefault(),this.setOpen(!this.isOpen)}setOpen(t){if(t!==this.isOpen){const e=t?"Open":"Close",s=t?"add":"remove",o=t?"set":"remove",a=t?"Close detail":"Show detail";this.isOpen=t,this.details[`${o}Attribute`]("open",""),this.details.classList[s]("ons-details--open"),this.detailsHeader.setAttribute("aria-expanded",t),this.content.setAttribute("aria-hidden",!t),this.detailsHeader.setAttribute("data-ga-action",`${e} panel`),this.detailsTitle&&(this.detailsTitle.textContent=a),this.onOpen&&this.onClose&&(t?this.onOpen():this.onClose())}this.saveState===!0&&t===!0?localStorage.setItem(this.details.getAttribute("id"),!0):localStorage.removeItem(this.details.getAttribute("id"))}keyboardInteraction(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),this.toggle(t);break}}}var tt=u('<button type="button" data-close-all="Hide all"><span class="ons-btn__inner ons-accordion__toggle-all-inner"><span class="ons-btn__text">Show all</span></span></button>'),et=u("<div><!> <!></div>");function O(r,t){S(t,!1);let e=v(t,"id",24,V),s=v(t,"cls",8,""),o=v(t,"showToggle",8,!1),a=D(),l=D();F("dataGroup",e()),G(async()=>{await U(0);const p=[...y(a).querySelectorAll(".ons-js-details")].map(n=>new Y(n));new X(y(l),p)}),x();var i=et(),f=m(i);{var g=d=>{var p=tt();let n;B(p,c=>E(l,c),()=>y(l)),b(c=>{n=H(p,1,"ons-btn ons-accordion__toggle-all ons-u-mb-s ons-u-d-no ons-btn--secondary ons-btn--small svelte-ijgx9p",null,n,c),_(p,"data-group",e())},[()=>({"hide-toggle":!o()})],Z),h(d,p)};q(f,d=>{o()&&d(g)})}var k=A(f,2);M(k,t,"default",{},null),B(i,d=>E(a,d),()=>y(a)),b(()=>{_(i,"id",e()),H(i,1,`ons-accordion ${s()??""}`)}),h(r,i),I()}O.__docgen={data:[{name:"id",visibility:"public",description:"Optional: Set the unique ID of the accordion",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"showToggle",visibility:"public",description:'Option to include a "show all" toggle above the accordion',keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"}],name:"Accordion.svelte"};var st=u('<h3 class="ons-details__title ons-u-fs-r--b"> </h3>'),it=u('<h2 class="ons-details__title ons-u-fs-r--b"> </h2>'),ot=u('<div class="ons-details ons-js-details ons-details--accordion"><div class="ons-details__heading ons-js-details-heading" role="button"><!> <span class="ons-details__icon"><svg class="ons-icon" viewBox="0 0 8 13" xmlns="http://www.w3.org/2000/svg" focusable="false" fill="currentColor" role="img" title="ons-icon-chevron"><path d="M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z" transform="translate(-5.02 -1.59)"></path></svg></span></div> <div class="ons-details__content ons-js-details-content"><!></div></div>');function w(r,t){S(t,!1);let e=v(t,"title",8,""),s=v(t,"id",24,()=>V(e())),o=v(t,"headingTag",8,"h2");const a=N("dataGroup");x();var l=ot(),i=m(l),f=m(i);{var g=n=>{var c=st(),C=m(c);b(()=>T(C,e())),h(n,c)},k=n=>{var c=it(),C=m(c);b(()=>T(C,e())),h(n,c)};q(f,n=>{o()==="h3"?n(g):n(k,!1)})}var d=A(i,2),p=m(d);M(p,t,"default",{},null),b(()=>{_(l,"id",s()),_(l,"data-group",a),_(d,"id",`${s()??""}-content`)}),h(r,l),I()}w.__docgen={data:[{name:"title",visibility:"public",description:"Sets the title of the accordion item",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"id",visibility:"public",description:"Sets the unique ID of the accordion item",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"headingTag",visibility:"public",description:"Set the heading level for the accordion items",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"h2",text:'"h2"'},{kind:"const",type:"string",value:"h3",text:'"h3"'}],text:'"h2" | "h3"'},static:!1,readonly:!1,defaultValue:'"h2"'}],name:"AccordionItem.svelte"};const nt=`An accordion component.

Based on [this ONS Design System component](https://service-manual.ons.gov.uk/design-system/components/accordion).

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { Accordion, AccordionItem } from "@onsvisual/svelte-components";
<\/script>

<Accordion>
  <AccordionItem title="First item">
    <p>Contents of first item.</p>
  </AccordionItem>
  <AccordionItem title="Second item">
    <p>Contents of second item.</p>
  </AccordionItem>
</Accordion>
\`\`\`
`,L=(r,t=R)=>{O(r,z(t,{children:(e,s)=>{var o=dt(),a=$(o);w(a,{title:"First item",children:(i,f)=>{var g=lt();h(i,g)},$$slots:{default:!0}});var l=A(a,2);w(l,{title:"Second item",children:(i,f)=>{var g=rt();h(i,g)},$$slots:{default:!0}}),h(e,o)},$$slots:{default:!0}}))},at={title:"Layout/Accordion",component:O,tags:["autodocs"],argTypes:{},parameters:J(nt)},{Story:j}=Q();var lt=u("<p>Contents of first item.</p>"),rt=u("<p>Contents of second item.</p>"),dt=u("<!> <!>",1),ct=u("<!> <!>",1);function P(r,t){S(t,!1),x();var e=ct(),s=$(e);j(s,{name:"Default",args:{},get template(){return L},parameters:{__svelteCsf:{rawCode:`<Accordion {...args}>
	<AccordionItem title="First item">
		<p>Contents of first item.</p>
	</AccordionItem>
	<AccordionItem title="Second item">
		<p>Contents of second item.</p>
	</AccordionItem>
</Accordion>`}}});var o=A(s,2);j(o,{name:"With 'show all' toggle",args:{showToggle:!0},get template(){return L},parameters:{__svelteCsf:{rawCode:`<Accordion {...args}>
	<AccordionItem title="First item">
		<p>Contents of first item.</p>
	</AccordionItem>
	<AccordionItem title="Second item">
		<p>Contents of second item.</p>
	</AccordionItem>
</Accordion>`}}}),h(r,e),I()}P.__docgen={data:[],name:"Accordion.stories.svelte"};const W=K(P,at),yt=["Default","WithShowAllToggle"],At={...W.Default,tags:["svelte-csf-v5"]},kt={...W.WithShowAllToggle,tags:["svelte-csf-v5"]};export{At as Default,kt as WithShowAllToggle,yt as __namedExportsOrder,at as default};
