import{S as M,i as F,s as T,e as N,a as v,b as d,g as j,t as m,c as E,d as C,z as V,p as S,j as _,m as x,k as w,l as O,n as $,w as D,x as X,y as Y}from"./index-98bb0bde.js";import{p as Z,w as H,M as ee,T as te,S as L,a as A}from"./collect-stories-cbdfda5c.js";import{D as re,S as q,L as G,C as U,B as Q}from"./DotPlotChart-7587b6ea.js";function R(l){let t=l[1].data,s,r,o=I(l);return{c(){o.c(),s=N()},m(e,n){o.m(e,n),v(e,s,n),r=!0},p(e,n){n&2&&T(t,t=e[1].data)?(j(),m(o,1,1,V),E(),o=I(e),o.c(),d(o,1),o.m(s.parentNode,s)):o.p(e,n)},i(e){r||(d(o),r=!0)},o(e){m(o),r=!1},d(e){e&&C(s),o.d(e)}}}function se(l){let t,s;const r=[l[1]];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new re({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1])]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function oe(l){let t,s;const r=[l[1],{color:"#bbb"},{colorSelect:"#206095"},{colorHighlight:"grey"},{overlayFill:!0},{hover:!0},{labels:!0}];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new q({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1]),r[1],r[2],r[3],r[4],r[5],r[6]]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function ne(l){let t,s;const r=[l[1]];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new q({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1])]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function ae(l){let t,s;const r=[l[1],{area:!1},{color:"#bbb"},{lineWidth:1},{legend:!1},{snapTicks:!1},{hover:!0},{labels:!0}];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new G({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1]),r[1],r[2],r[3],r[4],r[5],r[6],r[7]]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function ie(l){let t,s;const r=[l[1],{area:!1}];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new G({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1]),r[1]]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function le(l){let t,s;const r=[l[1],{color:"#bbb"},{colorSelect:"#206095"},{colorHighlight:"grey"},{overlayFill:!0}];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new U({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1]),r[1],r[2],r[3],r[4]]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function he(l){let t,s;const r=[l[1]];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new U({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1])]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function ce(l){let t,s;const r=[l[1],{color:"#bbb"},{colorSelect:"#206095"},{colorHighlight:"grey"},{overlayFill:!0}];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new Q({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1]),r[1],r[2],r[3],r[4]]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function fe(l){let t,s;const r=[l[1]];let o={};for(let e=0;e<r.length;e+=1)o=S(o,r[e]);return t=new Q({props:o}),{c(){_(t.$$.fragment)},m(e,n){x(t,e,n),s=!0},p(e,n){const h=n&2?w(r,[O(e[1])]):{};t.$set(h)},i(e){s||(d(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){$(t,e)}}}function I(l){let t,s,r,o,e,n,h,b,z,c,u,W,g;const y=[fe,ce,he,le,ie,ae,ne,oe,se],a=[];function p(i,f){return f&3&&(t=null),f&3&&(s=null),f&3&&(r=null),f&3&&(o=null),f&3&&(e=null),f&3&&(n=null),f&3&&(h=null),f&3&&(b=null),f&3&&(z=null),t==null&&(t=!!(i[0].toLowerCase()==="bar"&&i[1].xKey&&i[1].yKey)),t?0:(s==null&&(s=!!(i[0].toLowerCase()==="bar-highlight"&&i[1].xKey&&i[1].yKey)),s?1:(r==null&&(r=!!(i[0].toLowerCase()==="column"&&i[1].xKey&&i[1].yKey)),r?2:(o==null&&(o=!!(i[0].toLowerCase()==="column-highlight"&&i[1].xKey&&i[1].yKey)),o?3:(e==null&&(e=!!(i[0].toLowerCase()==="line"&&i[1].xKey&&i[1].yKey)),e?4:(n==null&&(n=!!(i[0].toLowerCase()==="line-highlight"&&i[1].xKey&&i[1].yKey)),n?5:(h==null&&(h=!!(i[0].toLowerCase()==="scatter"&&i[1].xKey)),h?6:(b==null&&(b=!!(i[0].toLowerCase()==="scatter-highlight"&&i[1].xKey)),b?7:(z==null&&(z=!!(i[0].toLowerCase()==="dotplot"&&i[1].xKey&&i[1].yKey)),z?8:-1))))))))}return~(c=p(l,-1))&&(u=a[c]=y[c](l)),{c(){u&&u.c(),W=N()},m(i,f){~c&&a[c].m(i,f),v(i,W,f),g=!0},p(i,f){let k=c;c=p(i,f),c===k?~c&&a[c].p(i,f):(u&&(j(),m(a[k],1,1,()=>{a[k]=null}),E()),~c?(u=a[c],u?u.p(i,f):(u=a[c]=y[c](i),u.c()),d(u,1),u.m(W.parentNode,W)):u=null)},i(i){g||(d(u),g=!0)},o(i){m(u),g=!1},d(i){~c&&a[c].d(i),i&&C(W)}}}function ue(l){let t,s,r=l[1]&&R(l);return{c(){r&&r.c(),t=N()},m(o,e){r&&r.m(o,e),v(o,t,e),s=!0},p(o,[e]){o[1]?r?(r.p(o,e),e&2&&d(r,1)):(r=R(o),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(j(),m(r,1,1,()=>{r=null}),E())},i(o){s||(d(r),s=!0)},o(o){m(r),s=!1},d(o){r&&r.d(o),o&&C(t)}}}const pe=/^\[(?:'[^']*'|"[^"]*"|\d+(?:\.\d+)?)(,?)*]$/;function de(l,t,s){let r,{section:o=null}=t,{type:e=o==null?void 0:o.chartType}=t,{data:n=null}=t,{options:h=null}=t;const b=["left","right","top","bottom"];function z(c,u,W,g){g||(g={chartType:c,data:u,...W});let y={},a={left:50,right:0,top:0,bottom:20};return Object.keys(g).filter(i=>!["type","chartType",...b.map(f=>`padding-${f}`)].includes(i)).forEach(i=>{pe.test(g[i])?y[i]=JSON.parse(g[i]):y[i]=g[i]}),Array.isArray(g.data)&&Object.keys(g.data[0]).forEach(f=>{["x","y","z","r"].includes(f)?y[`${f}Key`]=f:y[f]=f}),b.forEach(i=>{g[`padding-${i}`]&&(a[i]=g[`padding-${i}`])}),y.padding=a,!y.legend&&y.legend!==!1&&(y.legend=!!y.zKey),y}return l.$$set=c=>{"section"in c&&s(2,o=c.section),"type"in c&&s(0,e=c.type),"data"in c&&s(3,n=c.data),"options"in c&&s(4,h=c.options)},l.$$.update=()=>{l.$$.dirty&29&&s(1,r=z(e,n,h,o))},[e,r,o,n,h]}class B extends M{constructor(t){super(),F(this,t,de,ue,T,{section:2,type:0,data:3,options:4})}}const P=`A wrapper component that offers a simplified way to use charts with sensible preset defaults.

The config for this component can either be defined via \`type\`, \`data\` and \`options\` props, or via a single comboned \`section\` object. The latter use case is optimised for robo-journalism projects (see second example below).

Note: This component is part of the **@onsvisual/svelte-charts** library. See [more examples here](https://onsvisual.github.io/svelte-charts/).

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { Chart } from "@onsvisual/svelte-charts";

  const data = [
    {"x": 5315, "y": "Portsmouth"},
    {"x": 5070, "y": "Southampton"},
    {"x": 4596, "y": "Slough"},
    {"x": 3969, "y": "Reading"},
    {"x": 3522, "y": "Brighton and Hove"}
  ];
  const options = {
    "id": "chart-density",
    "title": "Densest local authorities in the South East, 2020",
    "footer": "Source: Office for National Statistics",
    "padding-left": "120"
  };
<\/script>

<Chart
  type="bar"
  data="{data}"
  options="{options}"/>
\`\`\`
`,J=`In this use case, all of the data and config are passed into the component via a single \`section\` prop.

This is optimised for robo-journalism projects, where a chart is defined within a section block in a PUG template. The component is used in this way within the [robo-embed](https://github.com/ONSvisual/robo-embed/) and [robo-article](https://github.com/ONSvisual/robo-article/) templates.

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { Chart } from "@onsvisual/svelte-charts";

  //the section is normally generated by the pug file
  const section = {
    "id": "chart-density",
    "chartType": "bar",
    "title": "Densest local authorities in the South East, 2020",
    "footer": "Source: Office for National Statistics",
    "data": [
      {"x": 5315, "y": "Portsmouth"},
      {"x": 5070, "y": "Southampton"},
      {"x": 4596, "y": "Slough"},
      {"x": 3969, "y": "Reading"},
      {"x": 3522, "y": "Brighton and Hove"}
    ],
    "padding-left": "120"
  };
<\/script>

<Chart {section}/>
\`\`\`
`;function me(l){let t,s,r;const o=[l[2]];let e={};for(let n=0;n<o.length;n+=1)e=S(e,o[n]);return s=new B({props:e}),{c(){t=X("div"),_(s.$$.fragment),Y(t,"padding","12px")},m(n,h){v(n,t,h),x(s,t,null),r=!0},p(n,h){const b=h&4?w(o,[O(n[2])]):{};s.$set(b)},i(n){r||(d(s.$$.fragment,n),r=!0)},o(n){m(s.$$.fragment,n),r=!1},d(n){n&&C(t),$(s)}}}function ge(l){let t,s,r,o,e,n,h,b,z,c;const u=[{title:"Data visualisation/Chart"},{component:B},{argTypes:{type:{options:["bar","column","line","scatter","dotplot","bar-highlight","column-highlight","line-highlight","scatter-highlight"],control:{type:"select"}}}},H(P)];let W={};for(let a=0;a<u.length;a+=1)W=S(W,u[a]);t=new ee({props:W}),r=new te({props:{$$slots:{default:[me,({args:a})=>({2:a}),({args:a})=>a?4:0]},$$scope:{ctx:l}}}),e=new L({props:{name:"Bar",args:{type:"bar",data:l[0],options:{id:"chart-density",title:"Densest local authorities in the South East, 2020",footer:"Source: Office for National Statistics","padding-left":"120"}}}});const g=[{name:"Bar, robo-journalism case"},{args:{section:{id:"chart-density",chartType:"bar",data:l[0],title:"Densest local authorities in the South East, 2020",footer:"Source: Office for National Statistics","padding-left":"120"}}},A(J)];let y={};for(let a=0;a<g.length;a+=1)y=S(y,g[a]);return h=new L({props:y}),z=new L({props:{name:"Line with highlight",args:{section:{id:"chart-timeseries",chartType:"line-highlight",title:"Largest local authorities in the South East, 2002-2020",footer:"Source: Office for National Statistics",data:l[1],selected:"Winchester","padding-top":"20","padding-right":"120","padding-left":"80"}}}}),{c(){_(t.$$.fragment),s=D(),_(r.$$.fragment),o=D(),_(e.$$.fragment),n=D(),_(h.$$.fragment),b=D(),_(z.$$.fragment)},m(a,p){x(t,a,p),v(a,s,p),x(r,a,p),v(a,o,p),x(e,a,p),v(a,n,p),x(h,a,p),v(a,b,p),x(z,a,p),c=!0},p(a,[p]){const i=p&0?w(u,[u[0],p&0&&{component:B},u[2],p&0&&O(H(P))]):{};t.$set(i);const f={};p&12&&(f.$$scope={dirty:p,ctx:a}),r.$set(f);const k=p&1?w(g,[g[0],p&1&&{args:{section:{id:"chart-density",chartType:"bar",data:a[0],title:"Densest local authorities in the South East, 2020",footer:"Source: Office for National Statistics","padding-left":"120"}}},p&0&&O(A(J))]):{};h.$set(k)},i(a){c||(d(t.$$.fragment,a),d(r.$$.fragment,a),d(e.$$.fragment,a),d(h.$$.fragment,a),d(z.$$.fragment,a),c=!0)},o(a){m(t.$$.fragment,a),m(r.$$.fragment,a),m(e.$$.fragment,a),m(h.$$.fragment,a),m(z.$$.fragment,a),c=!1},d(a){$(t,a),a&&C(s),$(r,a),a&&C(o),$(e,a),a&&C(n),$(h,a),a&&C(b),$(z,a)}}}function ye(l){return[[{x:5315,y:"Portsmouth"},{x:5070,y:"Southampton"},{x:4596,y:"Slough"},{x:3969,y:"Reading"},{x:3522,y:"Brighton and Hove"}],[{z:"West Oxfordshire",x:"2002",y:95961},{z:"West Oxfordshire",x:"2003",y:97083},{z:"West Oxfordshire",x:"2004",y:98038},{z:"West Oxfordshire",x:"2005",y:98869},{z:"West Oxfordshire",x:"2006",y:100316},{z:"West Oxfordshire",x:"2007",y:102166},{z:"West Oxfordshire",x:"2008",y:103016},{z:"West Oxfordshire",x:"2009",y:103824},{z:"West Oxfordshire",x:"2010",y:104706},{z:"West Oxfordshire",x:"2011",y:105442},{z:"West Oxfordshire",x:"2012",y:107164},{z:"West Oxfordshire",x:"2013",y:107945},{z:"West Oxfordshire",x:"2014",y:108095},{z:"West Oxfordshire",x:"2015",y:108609},{z:"West Oxfordshire",x:"2016",y:108748},{z:"West Oxfordshire",x:"2017",y:109266},{z:"West Oxfordshire",x:"2018",y:109800},{z:"West Oxfordshire",x:"2019",y:110643},{z:"West Oxfordshire",x:"2020",y:111758},{z:"South Oxfordshire",x:"2002",y:128754},{z:"South Oxfordshire",x:"2003",y:128920},{z:"South Oxfordshire",x:"2004",y:129359},{z:"South Oxfordshire",x:"2005",y:130050},{z:"South Oxfordshire",x:"2006",y:130676},{z:"South Oxfordshire",x:"2007",y:131626},{z:"South Oxfordshire",x:"2008",y:132611},{z:"South Oxfordshire",x:"2009",y:133466},{z:"South Oxfordshire",x:"2010",y:133915},{z:"South Oxfordshire",x:"2011",y:134961},{z:"South Oxfordshire",x:"2012",y:135722},{z:"South Oxfordshire",x:"2013",y:136328},{z:"South Oxfordshire",x:"2014",y:137477},{z:"South Oxfordshire",x:"2015",y:138177},{z:"South Oxfordshire",x:"2016",y:139156},{z:"South Oxfordshire",x:"2017",y:139767},{z:"South Oxfordshire",x:"2018",y:140504},{z:"South Oxfordshire",x:"2019",y:142057},{z:"South Oxfordshire",x:"2020",y:143782},{z:"Winchester",x:"2002",y:107844},{z:"Winchester",x:"2003",y:108515},{z:"Winchester",x:"2004",y:109179},{z:"Winchester",x:"2005",y:109947},{z:"Winchester",x:"2006",y:110628},{z:"Winchester",x:"2007",y:111820},{z:"Winchester",x:"2008",y:113267},{z:"Winchester",x:"2009",y:114505},{z:"Winchester",x:"2010",y:115789},{z:"Winchester",x:"2011",y:116820},{z:"Winchester",x:"2012",y:118074},{z:"Winchester",x:"2013",y:119037},{z:"Winchester",x:"2014",y:120290},{z:"Winchester",x:"2015",y:121734},{z:"Winchester",x:"2016",y:123100},{z:"Winchester",x:"2017",y:123879},{z:"Winchester",x:"2018",y:124295},{z:"Winchester",x:"2019",y:124859},{z:"Winchester",x:"2020",y:125925}]]}class _e extends M{constructor(t){super(),F(this,t,ye,ge,T,{})}}const K=Z(_e,{meta:{title:"Data visualisation/Chart"},stories:{"tpl:default":{storyId:"data-visualisation-chart--default",name:"default",template:!0,source:`<div style:padding="12px">
  <Chart {...args} />
</div>`,hasArgs:!0},Bar:{storyId:"data-visualisation-chart--bar",name:"Bar",template:!1,hasArgs:!1},BarRoboJournalismCase:{storyId:"data-visualisation-chart--bar-robo-journalism-case",name:"Bar, robo-journalism case",template:!1,hasArgs:!1},LineWithHighlight:{storyId:"data-visualisation-chart--line-with-highlight",name:"Line with highlight",template:!1,hasArgs:!1}},allocatedIds:["default","Meta","Template","Story","componentDocs","exampleDocs","Chart","withComponentDocs","withStoryDocs"]}),ze=K.meta,Se=["Bar","BarRoboJournalismCase","LineWithHighlight"],we=K.stories.Bar,Oe=K.stories.BarRoboJournalismCase,We=K.stories.LineWithHighlight;export{we as Bar,Oe as BarRoboJournalismCase,We as LineWithHighlight,Se as __namedExportsOrder,ze as default};
//# sourceMappingURL=Chart.stories-340d4dae.js.map
