{"version":3,"file":"Table.stories-7359820b.js","sources":["../../src/datavis/Table/docs/component.md?raw","../../src/datavis/Table/Table.svelte","../../src/datavis/Table/Table.stories.svelte"],"sourcesContent":["export default \"An table component with various customisation options.\\n\\n<!-- prettier-ignore -->\\n```html\\n<script>\\n  import { Table } from \\\"@onsvisual/svelte-components\\\";\\n\\n  const data = [\\n    { col1: \\\"Item one\\\", col2: 10 },\\n    { col1: \\\"Item two\\\", col2: 20 },\\n    { col1: \\\"Item three\\\", col2: 30 },\\n  ];\\n  const columns = [\\n    { key: \\\"col1\\\", label: \\\"Text column\\\" },\\n    { key: \\\"col2\\\", label: \\\"Numeric column\\\", numeric: true, sortable: true },\\n  ];\\n</script>\\n\\n<Table {data} {columns} />\\n```\\n\"","<script>\n  import { formatter, isNumeric, ascending, descending } from \"../../js/utils.js\";\n\n  /**\n   * An optional title for the table\n   * @type {string}\n   */\n  export let title = \"\";\n  /**\n   * Make the chart smaller/more compact\n   * @type {boolean}\n   */\n  export let compact = false;\n  /**\n   * Make the chart responsive (changes layout on narrow screens)\n   * @type {boolean}\n   */\n  export let responsive = false;\n  /**\n   * Highlight rows on hover\n   * @type {boolean}\n   */\n  export let rowHover = false;\n  /**\n   * Sticky header when table is longer than screen height\n   * @type {boolean}\n   */\n  export let stickyHeader = false;\n  /**\n   * Sticky header when table is longer than screen height\n   * @type {number|\"auto\"}\n   */\n  export let height = \"auto\";\n  /**\n   * Rows of data\n   * @type {array}\n   */\n  export let data = [];\n  /**\n   * Optional metadata for formatting columns. Array of {key, label, sortable?, numeric?, dp?} objects\n   * @type {array}\n   */\n  export let columns =\n    Array.isArray(data) && data[0] ? Object.keys(data[0]).map((key) => ({ key, label: key })) : [];\n  let _data = [...data];\n  let sort = columns.map((c) => \"none\");\n\n  $: sortable = columns.map((d) => d.sortable).includes(true);\n  $: formatters = columns.map((d) => formatter(d.dp));\n</script>\n\n<div\n  style:overflow=\"{typeof height === \"number\" ? \"auto\" : null}\"\n  style:height=\"{typeof height === \"number\" ? `${height}px` : null}\"\n  style:display=\"{typeof height !== \"number\" ? \"contents\" : null}\"\n>\n  <table\n    class=\"ons-table\"\n    class:ons-table--sortable=\"{sortable}\"\n    class:ons-table--compact=\"{compact}\"\n    class:ons-table--responsive=\"{responsive}\"\n    class:ons-table--row-hover=\"{rowHover}\"\n    class:sticky-header=\"{stickyHeader}\"\n    data-aria-sort=\"{sortable ? 'Sort by' : null}\"\n    data-aria-asc=\"{sortable ? 'ascending' : null}\"\n    data-aria-desc=\"{sortable ? 'descending' : null}\"\n  >\n    {#if title}<caption class=\"ons-table__caption\">{title}</caption>{/if}\n    <thead class=\"ons-table__head\">\n      <tr class=\"ons-table__row\">\n        {#each columns as col, i}\n          {#if col.sortable}\n            <th\n              scope=\"col\"\n              class=\"ons-table__header\"\n              class:ons-table__header--numeric=\"{col.numeric}\"\n              aria-sort=\"{sort[i]}\"\n            >\n              <button\n                aria-label=\"Sort by {col.label}\"\n                type=\"button\"\n                data-index=\"{i}\"\n                class=\"ons-table__sort-button\"\n                on:click=\"{() => {\n                  sort = sort.map((c, j) =>\n                    j === i && c === 'ascending' ? 'descending' : j === i ? 'ascending' : 'none'\n                  );\n                  _data = _data.sort((a, b) =>\n                    sort[i] === 'ascending'\n                      ? ascending(a[col.key], b[col.key])\n                      : descending(a[col.key], b[col.key])\n                  );\n                }}\"\n              >\n                {col.label}<svg\n                  class=\"ons-svg-icon\"\n                  viewBox=\"0 0 12 19\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  focusable=\"false\"\n                  fill=\"currentColor\"\n                >\n                  <path\n                    class=\"ons-topTriangle\"\n                    d=\"M6 0l6 7.2H0L6 0zm0 18.6l6-7.2H0l6 7.2zm0 3.6l6 7.2H0l6-7.2z\"></path>\n                  <path class=\"ons-bottomTriangle\" d=\"M6 18.6l6-7.2H0l6 7.2zm0 3.6l6 7.2H0l6-7.2z\"\n                  ></path>\n                </svg>\n              </button>\n            </th>\n          {:else}\n            <th\n              scope=\"col\"\n              class=\"ons-table__header\"\n              class:ons-table__header--numeric=\"{col.numeric}\"\n            >\n              <span class=\"ons-table__header-text\">{col.label}</span>\n            </th>\n          {/if}\n        {/each}\n      </tr>\n    </thead>\n    <tbody class=\"ons-table__body\">\n      {#each _data as row}\n        <tr class=\"ons-table__row\">\n          {#each columns as col, i}\n            <td\n              class=\"ons-table__cell\"\n              class:ons-table__cell--numeric=\"{col.numeric}\"\n              data-th=\"{col.label}\"\n              >{@html col.numeric && isNumeric(row[col.key])\n                ? formatters[i](row[col.key])\n                : row[col.key] || \"&ndash;\"}</td\n            >\n          {/each}\n        </tr>\n      {/each}\n    </tbody>\n  </table>\n</div>\n\n<style>\n  .ons-table__sort-button {\n    color: var(--link, --ons-color-text-link) !important;\n  }\n  .ons-table__sort-button:hover {\n    color: var(--link-hover, --ons-color-text-link-hover) !important;\n    text-decoration: underline solid var(--link-hover, --ons-color-text-link-hover) 2px !important;\n  }\n  table.sticky-header thead.ons-table__head {\n    position: sticky;\n    top: 0;\n    background: var(--background, white);\n    border-bottom: none;\n  }\n  table.sticky-header thead.ons-table__head th {\n    box-shadow: 0px -2px #707071 inset;\n    border-bottom: none;\n  }\n</style>\n","<script>\n  import { Meta, Template, Story } from \"@storybook/addon-svelte-csf\";\n\n  // @ts-ignore\n  import componentDocs from \"./docs/component.md?raw\";\n  import Table from \"./Table.svelte\";\n  import { withComponentDocs } from \"../../js/withParams.js\";\n\n  const data = [\n    { country: \"Scotland\", mountain: \"Ben Nevis\", height: 1345 },\n    { country: \"Wales\", mountain: \"Snowdon\", height: 1085 },\n    { country: \"England\", mountain: \"Scarfell Pike\", height: 978 },\n    { country: \"Northern Ireland\", mountain: \"Slieve Donard\", height: 850 },\n  ];\n  const columns = [\n    { key: \"country\", label: \"Country\", sortable: true },\n    { key: \"mountain\", label: \"Highest mountain\" },\n    { key: \"height\", label: \"Height in metres\", sortable: true, numeric: true },\n  ];\n</script>\n\n<Meta\n  title=\"Data visualisation/Table\"\n  component=\"{Table}\"\n  argTypes=\"{{}}\"\n  {...withComponentDocs(componentDocs)}\n/>\n\n<Template let:args>\n  <div style:padding=\"12px\">\n    <Table {...args} />\n  </div>\n</Template>\n\n<Story name=\"Default\" args=\"{{ data, columns }}\" />\n\n<Story\n  name=\"Fixed height 200px with sticky header\"\n  args=\"{{ data, columns, height: 200, stickyHeader: true }}\"\n/>\n\n<Story name=\"Compact mode\" args=\"{{ data, columns, compact: true }}\" />\n"],"names":["componentDocs","ctx","insert","target","caption","anchor","t0_value","toggle_class","th","append","span","dirty","set_data","t0","attr","button","button_aria_label_value","th_aria_sort_value","svg","path0","path1","create_if_block","isNumeric","td","td_data_th_value","raw_value","i","tr","create_if_block_1","set_style","div","table","thead","tbody","title","$$props","compact","responsive","rowHover","stickyHeader","height","data","columns","key","_data","sort","c","$$invalidate","j","a","b","ascending","col","descending","sortable","d","formatters","formatter","Table","withComponentDocs","get_spread_object"],"mappings":"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"}