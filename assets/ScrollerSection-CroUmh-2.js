import{as as Ee,at as Me,p as ge,Q as Re,a as o,ak as De,ao as Ae,l as w,b as He,j as O,f as Le,i as te,t as X,e as I,h as me,X as he,n as S,k as P,o as ke,g as e,m as r,s as n,d as be,W as _e,O as We,$ as je,a0 as Pe,a1 as ve,q as Qe}from"./iframe-CLrlnsTP.js";import{i as xe}from"./create-runtime-stories-B2eo7_kk.js";import{s as ie}from"./slot-BP_Qo1ZM.js";import{b as Xe,s as Fe}from"./attributes-BPiJ-9gJ.js";import{s as C}from"./class-Dzh9Da8g.js";import{s as Ge}from"./style-CcY6orqc.js";import{b as Q}from"./this-JrdOqCcO.js";import{c as we}from"./attributes-Co-1QMVx.js";import{C as Je}from"./Container-BXi6tJ9L.js";function Ke(s,t){Ee(window,["resize"],()=>Me(()=>t(window[s])))}const y=[];let D;if(typeof window<"u"){const s=()=>y.forEach(t=>t());window.addEventListener("scroll",s),window.addEventListener("resize",s)}if(typeof IntersectionObserver<"u"){const s=new Map,t=new IntersectionObserver((a,b)=>{a.forEach(l=>{const d=s.get(l.target),v=y.indexOf(d);l.isIntersecting?v===-1&&y.push(d):(d(),v!==-1&&y.splice(v,1))})},{rootMargin:"400px 0px"});D={add:({outer:a,update:b})=>{const{top:l,bottom:d}=a.getBoundingClientRect();l<window.innerHeight&&d>0&&y.push(b),s.set(a,b),t.observe(a)},remove:({outer:a,update:b})=>{if(s.get(a)){const l=y.indexOf(b);l!==-1&&y.splice(l,1),s.delete(a),t.unobserve(a)}}}}else D={add:({update:s})=>{y.push(s)},remove:({update:s})=>{const t=y.indexOf(s);t!==-1&&y.splice(t,1)}};var Ne=O('<div class="ons-u-mt-xl"></div>'),Ue=O('<div class="ons-u-mb-xl"></div>'),Ye=O("<!> <svelte-scroller-outer><svelte-scroller-background-container><svelte-scroller-background><!></svelte-scroller-background></svelte-scroller-background-container> <svelte-scroller-foreground><!></svelte-scroller-foreground></svelte-scroller-outer> <!>",3);function Ze(s,t){ge(t,!1);const[a,b]=he(),l=()=>_e(ne,"$sections",a),d=r(),v=r(),T=r(),A=r(),h=r(),u=Re();let c=o(t,"id",8,null),F=o(t,"splitscreen",8,!1),k=o(t,"marginTop",8,!1),se=o(t,"marginBottom",8,!0),_=o(t,"threshold",8,.7),H=0,G=1,J=o(t,"count",12,0),f=o(t,"index",12,null),g=o(t,"sectionId",12,null),L=o(t,"offset",12,0),q=o(t,"progress",12,0),z=o(t,"visible",12,!1),Se=o(t,"cls",8,null);const ne=Ae([]);De("sections",ne);let E,V=r(),W=r(),K=r(),le,m=r(0),x=r(),M=r(0),N=r(1);function Ve(i){return E&&D.remove(E),J(i.length),U(),E={outer:e(V),update:U},D.add(E),()=>D.remove(E)}function U(){if(!e(W))return;const i=e(V).getBoundingClientRect();le=i.left,n(N,i.right-le);const p=e(W).getBoundingClientRect(),de=e(K).getBoundingClientRect(),$=p.top<e(m)&&p.bottom>0,qe=$&&!z(),ze=!$&&z();z($);const ce=p.bottom-p.top;de.bottom-de.top;const ue=e(v)-e(d);q((e(d)-p.top)/(ce-ue)),q()<=0?(n(M,0),n(x,!1)):q()>=1?(n(M,ce-ue),n(x,!1)):(n(M,e(d)),n(x,!0));for(let B=0;B<l().length;B++){const ee=l()[B],{top:fe}=ee.getBoundingClientRect(),pe=l()[B+1],ye=pe?pe.getBoundingClientRect().top:p.bottom;if(L((e(T)-fe)/(ye-fe)),ye>=e(T)){f()!==B&&(f(B),g(ee.dataset.id?ee.dataset.id:null),u("change",{id:c(),index:f(),sectionId:g()}));break}}qe&&(u("enter",{id:c(),index:f(),sectionId:g()}),u("change",{id:c(),index:f(),sectionId:g()})),ze&&u("exit",{id:c(),index:f(),sectionId:g()})}w(()=>e(m),()=>{n(d,Math.round(H*e(m)))}),w(()=>e(m),()=>{n(v,Math.round(G*e(m)))}),w(()=>(be(_()),e(m)),()=>{n(T,Math.round(_()*e(m)))}),w(()=>be(_()),()=>{_(),U()}),w(()=>(e(x),e(M)),()=>{n(A,`
		position: ${e(x)?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${e(M)}px);
		z-index: 1;
	`)}),w(()=>(e(x),e(N)),()=>{n(h,e(x)?`width:${e(N)}px;`:"")}),w(()=>(e(V),l()),()=>{e(V)&&Ve(l())}),He(),xe();var oe=Ye(),ae=Le(oe);{var Be=i=>{var p=Ne();I(i,p)};te(ae,i=>{k()&&i(Be)})}var R=P(ae,2);X(()=>Xe(R,"id",c()));let re;var j=S(R);C(j,1,"background-container svelte-1r0zgdq");var Y=S(j);C(Y,1,"svelte-1r0zgdq");var Ce=S(Y);ie(Ce,t,"background",{},null),Q(Y,i=>n(K,i),()=>e(K));var Z=P(j,2);C(Z,1,"svelte-1r0zgdq");var Ie=S(Z);ie(Ie,t,"foreground",{},null),Q(Z,i=>n(W,i),()=>e(W)),Q(R,i=>n(V,i),()=>e(V));var Oe=P(R,2);{var Te=i=>{var p=Ue();I(i,p)};te(Oe,i=>{se()&&i(Te)})}X(i=>{re=C(R,1,we(Se()),"svelte-1r0zgdq",re,i),Ge(j,`${e(A)??""}${e(h)??""}`)},[()=>({splitscreen:F()})],ke),Ke("innerHeight",i=>n(m,i)),I(s,oe),me(),b()}Ze.__docgen={data:[{name:"id",visibility:"public",description:"Sets the unique ID of the scroller",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"splitscreen",visibility:"public",description:"Enables splitscreen view (captions appear on left on larger screens)",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"marginTop",visibility:"public",description:"Adds a margin under the scroller section",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"marginBottom",visibility:"public",description:"Adds a margin under the scroller section",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"threshold",visibility:"public",description:"Set the threshold for the transition between scroller sections (0-1)",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.7"},{name:"count",visibility:"public",description:"Binding: Total number of sections within scroller",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"index",visibility:"public",description:"Binding: Current section index (number)",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"null"},{name:"sectionId",visibility:"public",description:"Binding: Current section id, if it has one set",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"offset",visibility:"public",description:"Binding: The progress between the start of current scroller section and next (0-1)",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"progress",visibility:"public",description:"Binding: The progress through the whole scroller (0-1)",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"visible",visibility:"public",description:"Binding: Whether the scroller is visible on screen or not",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"}],name:"Scroller.svelte"};var $e=O("<h2> </h2>"),et=O('<div class="ons-scroller-section svelte-1xgphlm"><!> <!></div>'),tt=O("<section><!></section>");function it(s,t){ge(t,!1);const[a,b]=he(),l=()=>_e(u,"$sections",a);let d=o(t,"id",8,null),v=o(t,"title",8,null),T=o(t,"hideTitle",8,!1),A=o(t,"cls",8,null),h=r();const u=We("sections");je(()=>{u&&ve(u,[...l(),e(h)])}),Pe(()=>{u&&ve(u,l().filter(k=>k!==e(h)))}),xe();var c=tt(),F=S(c);Je(F,{width:"narrow",children:(k,se)=>{var _=et(),H=S(_);{var G=f=>{var g=$e();let L;var q=S(g);X(z=>{L=C(g,1,"section-title",null,L,z),Qe(q,v())},[()=>({"ons-u-vh":T()})],ke),I(f,g)};te(H,f=>{v()&&f(G)})}var J=P(H,2);ie(J,t,"default",{},null),I(k,_)},$$slots:{default:!0}}),Q(c,k=>n(h,k),()=>e(h)),X(()=>{Fe(c,"data-id",d()),C(c,1,we(A()),"svelte-1xgphlm")}),I(s,c),me(),b()}it.__docgen={data:[{name:"id",visibility:"public",description:"Sets the unique ID of the section (identifiable in associated scroll events)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"title",visibility:"public",description:"Optional: Sets the title of the section",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"hideTitle",visibility:"public",description:"Allows the h2 title tag for the section to be visually hidden",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"}],name:"ScrollerSection.svelte"};export{Ze as S,it as a};
