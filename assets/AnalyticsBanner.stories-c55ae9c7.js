import{S as le,i as ce,s as re,e as pe,a as G,z as te,d as W,E as ye,I as ge,o as he,x as d,L as r,y as ne,Q as P,w as b,Z as F,P as s,Y as K,R as we,ad as se,B as ke,p as de,j as N,m as U,k as ue,l as fe,b as Q,t as q,n as x}from"./index-93ed49d9.js";import{p as be,w as oe,M as ve,T as Ce,S as Ae}from"./collect-stories-46e6ba01.js";const ae=`This component will display a cookie banner and export a function that allows you to push events to the Google Analytics dataLayer array.

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { AnalyticsBanner, AnalyticsEvent } from "@onsvisual/svelte-components";

  // Example of an analytics event triggered by another event "e"
  function doAnalyticsEvent(e) {
    // Assumes that e.detail is in the form {key1: "value1", key2: "value2", etc}
    AnalyticsEvent({event: "eventName", ...e.detail});
  }
<\/script>

<AnalyticsBanner analyticsId="{id_string}" />
<!-- Rest of page content -->
\`\`\`
`;function ie(o){let e;function t(l,u){return l[3]?je:Be}let n=t(o),i=n(o);return{c(){e=d("div"),i.c(),r(e,"class","ons-cookies-banner svelte-1syey1g"),r(e,"role","region"),r(e,"aria-label","Cookies banner"),ne(e,"display",o[2]?"block":null)},m(l,u){G(l,e,u),i.m(e,null)},p(l,u){n===(n=t(l))&&i?i.p(l,u):(i.d(1),i=n(l),i&&(i.c(),i.m(e,null))),u&4&&ne(e,"display",l[2]?"block":null)},d(l){l&&W(e),i.d()}}}function je(o){let e,t,n,i,l,u=o[7](o[4])+"",m,y,a,f=o[7]("You can")+"",B,v,j,E=o[7]("change your cookie preferences")+"",M,C,R=o[7]("at any time")+"",V,Y,I,g,k,h,A,c,w;return{c(){e=d("div"),t=d("div"),n=d("div"),i=d("p"),l=d("span"),m=P(u),y=b(),a=d("span"),B=P(f),v=b(),j=d("a"),M=P(E),C=b(),V=P(R),Y=P("."),I=b(),g=d("div"),k=d("button"),h=d("span"),A=d("span"),A.textContent=`${o[7]("Hide")}`,r(j,"href",z+"/cookies"),r(a,"class","ons-cookies-banner__preferences-text"),r(i,"class","ons-cookies-banner__desc ons-u-mb-no@s ons-u-mr-s@s"),r(n,"class","ons-grid__col ons-grid__col--flex ons-col-auto ons-u-flex-shrink@s"),r(A,"class","ons-btn__text"),r(h,"class","ons-btn__inner"),r(k,"type","button"),r(k,"class","ons-btn ons-btn--secondary ons-btn--small ons-js-hide-button"),r(g,"class","ons-grid__col"),r(t,"class","ons-grid ons-grid--flex ons-grid--between ons-grid--gutterless ons-grid--no-wrap@s ons-grid--vertical-center"),r(e,"class","ons-container ons-cookies-banner__confirmation svelte-1syey1g"),F(e,"ons-page__container--wider",o[1]==="wider")},m(p,_){G(p,e,_),s(e,t),s(t,n),s(n,i),s(i,l),s(l,m),s(i,y),s(i,a),s(a,B),s(a,v),s(a,j),s(j,M),s(a,C),s(a,V),s(a,Y),s(t,I),s(t,g),s(g,k),s(k,h),s(h,A),c||(w=K(k,"click",o[15]),c=!0)},p(p,_){_&16&&u!==(u=p[7](p[4])+"")&&we(m,u),_&2&&F(e,"ons-page__container--wider",p[1]==="wider")},d(p){p&&W(e),c=!1,w()}}}function Be(o){let e,t,n,i,l,u,m,y,a,f,B=o[7]("We would like to set")+"",v,j,E,M=o[7]("additional cookies")+"",C,R,V=o[7]("to remember your settings and understand how you use the site. This helps us to improve our services.")+"",Y,I,g,k,h,A,c,w,p,_,L,S,T,D,O,_e=o[7]("View cookies")+"",$,J,ee;return{c(){e=d("form"),t=d("div"),n=d("div"),i=d("div"),l=d("h2"),l.textContent=`${o[7]("Cookies on ons.gov.uk")}`,u=b(),m=d("div"),y=d("p"),y.textContent=`${o[7]("Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.")}`,a=b(),f=d("p"),v=P(B),j=b(),E=d("a"),C=P(M),R=b(),Y=P(V),I=b(),g=d("div"),k=d("div"),h=d("button"),A=d("span"),c=d("span"),c.textContent=`${o[7]("Accept additional cookies")}`,w=b(),p=d("div"),_=d("button"),L=d("span"),S=d("span"),S.textContent=`${o[7]("Reject additional cookies")}`,T=b(),D=d("div"),O=d("a"),$=P(_e),r(l,"class","ons-cookies-banner__title ons-u-mb-xs"),r(E,"href",z+"/cookies"),r(m,"class","ons-cookies-banner__statement"),r(i,"class","ons-grid__col ons-col-8@m"),r(n,"class","ons-grid"),r(c,"class","ons-btn__text"),r(A,"class","ons-btn__inner"),r(h,"type","submit"),r(h,"class","ons-btn ons-btn--small ons-js-accept-cookies ons-cookies-banner__btn"),r(h,"data-button","accept"),r(k,"class","ons-grid__col"),r(S,"class","ons-btn__text"),r(L,"class","ons-btn__inner"),r(_,"type","button"),r(_,"class","ons-btn ons-btn--small ons-js-reject-cookies ons-cookies-banner__btn"),r(_,"data-button","reject"),r(p,"class","ons-grid__col"),r(O,"class","ons-cookies-banner__link"),r(O,"href",z+"/cookies"),r(D,"class","ons-grid__col"),r(g,"class","ons-grid ons-grid--flex ons-u-mt-s"),r(t,"class","ons-container ons-cookies-banner__primary svelte-1syey1g"),F(t,"ons-page__container--wider",o[1]==="wider"),r(e,"action",z+"/cookies/accept-all"),r(e,"method","GET"),r(e,"id","global-cookie-message"),r(e,"aria-label","cookie banner")},m(H,Z){G(H,e,Z),s(e,t),s(t,n),s(n,i),s(i,l),s(i,u),s(i,m),s(m,y),s(m,a),s(m,f),s(f,v),s(f,j),s(f,E),s(E,C),s(f,R),s(f,Y),s(t,I),s(t,g),s(g,k),s(k,h),s(h,A),s(A,c),s(g,w),s(g,p),s(p,_),s(_,L),s(L,S),s(g,T),s(g,D),s(D,O),s(O,$),J||(ee=[K(h,"click",se(o[13])),K(_,"click",se(o[14]))],J=!0)},p(H,Z){Z&2&&F(t,"ons-page__container--wider",H[1]==="wider")},d(H){H&&W(e),J=!1,ke(ee)}}}function Ee(o){let e,t=o[2]&&!o[0]&&ie(o);return{c(){t&&t.c(),e=pe()},m(n,i){t&&t.m(n,i),G(n,e,i)},p(n,[i]){n[2]&&!n[0]?t?t.p(n,i):(t=ie(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:te,o:te,d(n){t&&t.d(n),n&&W(e)}}}function De(o){window!=null&&window.dataLayer&&window.dataLayer.push(o)}let z="//www.ons.gov.uk";function Pe(){return-1<document.cookie.indexOf("ons_cookie_preferences_set=true")}function Re(o,e){const t=new RegExp(`'${o}':(.*?)[,}]`),n=e.match(t);return n?n[1]:null}function Ie(){var o=document.cookie.match(new RegExp("(^|;) ?cookies_policy=([^;]*)(;|$)"));if(o){console.debug("legacy cookies_policy found");var e=decodeURIComponent(o[2]),t=JSON.parse(e);return console.debug("usage is",t.usage),t.usage}var n=document.cookie.match("(?:^|; )ons_cookie_policy=({.*?})");if(n){console.debug("ons_cookie_policy found");var i=Re("usage",n[1]);return console.debug("usage is",i),i==="true"}return console.debug("no cookie found - opting out"),!1}function Le(o,e,t){let n;const i=ye("page");ge(o,i,c=>t(12,n=c));let{analyticsId:l="GTM-MBCBVQS"}=e,{analyticsProps:u={}}=e,{hideBanner:m=!1}=e,{usageCookies:y=!1}=e,{width:a="wide"}=e,{pageViewEnabled:f=!0}=e,B,v=!1,j=!1,E="",M=n&&n.url.host.startsWith("cy")?"cy":"en",C=null;function R(c){let w=31536e3,p=window.location.hostname,_=!0,L="{'essential':true,'settings':true,'usage':true,'campaigns':true}",S="{'essential':true,'settings':false,'usage':false,'campaigns':false}",T=c=="all"?L:S,D="/";document.cookie=`ons_cookie_message_displayed=${_};max-age=${w};domain=${p};path=${D};`,document.cookie=`ons_cookies_policy=${T};max-age=${w};domain=${p};path=${D};`,t(4,E=`You have ${c=="all"?"accepted":"rejected"} all additional cookies.`),c=="all"&&t(8,y=!0),t(3,j=!0),c=="all"&&V()}function V(){console.log("initialising analytics"),window.dataLayer=[{analyticsOptOut:!1,"gtm.whitelist":["google","hjtc","lcl"],"gtm.blacklist":["customScripts","sp","adm","awct","k","d","j"],...u}],function(c,w,p,_,L){c[_]=c[_]||[],c[_].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var S=w.head,T=w.createElement(p),D=_!="dataLayer"?"&l="+_:"";T.async=!0,T.src="https://www.googletagmanager.com/gtm.js?id="+L+D,S.appendChild(T)}(window,document,"script","dataLayer",l),n&&(C=`${n.url.href}`.replace(n.url.hash,""))}function Y(c){if(c&&C){const w=`${c.url.href}`.replace(c.url.hash,"");w!==C&&(C=w,De({event:"pageView",pageURL:C,...u}))}}he(()=>{B=!0,i||(M=document.location.host.startsWith("cy")?"cy":"en"),t(2,v=!Pe()),t(8,y=Ie()),y&&B&&V()});const I={"Cookies on ons.gov.uk":"Cwcis ar ons.gov.uk","Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.":"Ffeiliau bach a gaiff eu storio ar eich dyfais pan fyddwch yn mynd ar wefan yw cwcis. Rydym ni’n defnyddio rhai cwcis hanfodol i wneud i’r wefan hon weithio.","We would like to set":"Hoffem osod","additional cookies":"cwcis ychwanegol","to remember your settings and understand how you use the site. This helps us to improve our services.":"er mwyn cofio eich gosodiadau a deall sut rydych chi’n defnyddio’r wefan. Mae hyn yn ein helpu ni i wella ein gwasanaethau.","Accept additional cookies":"Derbyn cwcis ychwanegol","Reject additional cookies":"Gwrthod cwcis ychwanegol","View cookies":"Gweld cwcis","You have accepted all additional cookies.":"Rydych chi wedi derbyn yr holl gwcis ychwanegol.","You have rejected all additional cookies.":"Rydych chi wedi gwrthod yr holl gwcis ychwanegol.","You can":"Gallwch chi","change your cookie preferences":"newid eich dewisiadau o ran cwcis","at any time.":"ar unrhyw adeg.",Hide:"Cuddio"},g=c=>M=="cy"&&I[c]?I[c]:c,k=()=>R("all"),h=()=>R("reject"),A=()=>t(2,v=!1);return o.$$set=c=>{"analyticsId"in c&&t(9,l=c.analyticsId),"analyticsProps"in c&&t(10,u=c.analyticsProps),"hideBanner"in c&&t(0,m=c.hideBanner),"usageCookies"in c&&t(8,y=c.usageCookies),"width"in c&&t(1,a=c.width),"pageViewEnabled"in c&&t(11,f=c.pageViewEnabled)},o.$$.update=()=>{o.$$.dirty&6144&&f&&Y(n)},[m,a,v,j,E,i,R,g,y,l,u,f,n,k,h,A]}class X extends le{constructor(e){super(),ce(this,e,Le,Ee,re,{analyticsId:9,analyticsProps:10,hideBanner:0,usageCookies:8,width:1,pageViewEnabled:11})}}function Se(o){let e,t;const n=[o[0]];let i={};for(let l=0;l<n.length;l+=1)i=de(i,n[l]);return e=new X({props:i}),{c(){N(e.$$.fragment)},m(l,u){U(e,l,u),t=!0},p(l,u){const m=u&1?ue(n,[fe(l[0])]):{};e.$set(m)},i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Te(o){let e,t,n,i,l,u;const m=[{title:"Layout/AnalyticsBanner"},{component:X},{argTypes:{}},oe(ae)];let y={};for(let a=0;a<m.length;a+=1)y=de(y,m[a]);return e=new ve({props:y}),n=new Ce({props:{$$slots:{default:[Se,({args:a})=>({0:a}),({args:a})=>a?1:0]},$$scope:{ctx:o}}}),l=new Ae({props:{name:"Default",args:{}}}),{c(){N(e.$$.fragment),t=b(),N(n.$$.fragment),i=b(),N(l.$$.fragment)},m(a,f){U(e,a,f),G(a,t,f),U(n,a,f),G(a,i,f),U(l,a,f),u=!0},p(a,[f]){const B=f&0?ue(m,[m[0],f&0&&{component:X},m[2],f&0&&fe(oe(ae))]):{};e.$set(B);const v={};f&3&&(v.$$scope={dirty:f,ctx:a}),n.$set(v)},i(a){u||(Q(e.$$.fragment,a),Q(n.$$.fragment,a),Q(l.$$.fragment,a),u=!0)},o(a){q(e.$$.fragment,a),q(n.$$.fragment,a),q(l.$$.fragment,a),u=!1},d(a){x(e,a),a&&W(t),x(n,a),a&&W(i),x(l,a)}}}class Me extends le{constructor(e){super(),ce(this,e,null,Te,re,{})}}const me=be(Me,{meta:{title:"Layout/AnalyticsBanner"},stories:{"tpl:default":{storyId:"layout-analyticsbanner--default",name:"default",template:!0,source:"<AnalyticsBanner {...args} />",hasArgs:!0},Default:{storyId:"layout-analyticsbanner--default",name:"Default",template:!1,hasArgs:!1}},allocatedIds:["default","Meta","Template","Story","componentDocs","AnalyticsBanner","withComponentDocs"]}),Ge=me.meta,We=["Default"],Oe=me.stories.Default;export{Oe as Default,We as __namedExportsOrder,Ge as default};
//# sourceMappingURL=AnalyticsBanner.stories-c55ae9c7.js.map
