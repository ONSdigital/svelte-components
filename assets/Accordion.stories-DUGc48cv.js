import{p as S,Q as F,a as m,ak as P,$ as G,j as g,t as k,e as p,h as I,n as f,k as C,o as Z,g as A,m as D,s as E,O as N,i as Q,q as T,f as j,Z as R,_ as z}from"./iframe-BD7JyiWe.js";import{i as x,w as J,c as K,d as U}from"./create-runtime-stories-CfzMKkzB.js";import{s as M}from"./slot-BP_Qo1ZM.js";import{s as v}from"./attributes-CAz9ePsK.js";import{s as H}from"./class-Dzh9Da8g.js";import{b as B}from"./this-BDvxx-31.js";import{s as V,e as X}from"./utils-VWytQRnm.js";import"./attributes-Co-1QMVx.js";import"./_commonjsHelpers-CqkleIqs.js";class Y{constructor(t,s){this.openDetailsEls=0,this.button=t,this.buttonInner=t.querySelector(".ons-accordion__toggle-all-inner"),this.group=t.getAttribute("data-group"),this.detailsEls=s.filter(e=>e.group===this.group),this.totalDetailsEls=this.detailsEls.length,this.buttonOpenEl=this.buttonInner.querySelector(".ons-btn__text"),this.buttonOpen=this.buttonOpenEl.innerHTML.trim(),this.closeButton=t.getAttribute("data-close-all"),this.open=this.detailsEls.find(e=>e.open===!0),this.detailsEls.forEach(e=>{e.onOpen=this.onOpen.bind(this),e.onClose=this.onClose.bind(this)}),this.open&&(this.openDetailsEls=this.totalDetailsEls),this.button.addEventListener("click",this.handleButtonClick.bind(this)),this.setButton(),this.button.classList.remove("ons-u-d-no")}handleButtonClick(t){t.preventDefault();const s=!this.canClose();this.detailsEls.forEach(e=>{e.setOpen(s)})}onOpen(){this.openDetailsEls++,this.setButton()}onClose(){this.openDetailsEls--,this.setButton()}canClose(){return this.openDetailsEls===this.totalDetailsEls}setButton(){this.canClose()?(this.buttonInner.innerHTML=this.closeButton,this.button.setAttribute("data-ga-label",this.buttonOpen),this.button.setAttribute("aria-expanded","true")):(this.buttonInner.innerHTML=this.buttonOpen,this.button.setAttribute("data-ga-label",this.closeButton),this.button.setAttribute("aria-expanded","false"))}}class tt{constructor(t,s=null){this.saveState=t.getAttribute("data-save-state")==="true",this.open=t.getAttribute("data-open")==="true",this.group=t.getAttribute("data-group"),this.details=t,this.detailsHeader=this.details.querySelector(".ons-js-details-heading"),this.content=this.details.querySelector(".ons-js-details-content"),this.detailsTitle=this.details.querySelector(".ons-js-corrections-details-title"),this.detailsId=t.getAttribute("id"),this.callback=s,this.details.setAttribute("role","group"),this.detailsHeader.setAttribute("role","link"),this.detailsHeader.setAttribute("aria-controls",this.detailsId),this.detailsHeader.setAttribute("tabindex",0),localStorage.getItem(this.detailsId)||this.open?this.setOpen(!0):this.setOpen(!1),this.detailsHeader.addEventListener("click",this.toggle.bind(this)),this.detailsHeader.addEventListener("keydown",this.keyboardInteraction.bind(this)),this.details.classList.add("ons-details--initialised")}toggle(t){t.preventDefault(),this.setOpen(!this.isOpen),typeof this.callback=="function"&&this.callback({id:this.detailsId,open:this.isOpen})}setOpen(t){if(t!==this.isOpen){const s=t?"Open":"Close",e=t?"add":"remove",i=t?"set":"remove",d=t?"Close detail":"Show detail";this.isOpen=t,this.details[`${i}Attribute`]("open",""),this.details.classList[e]("ons-details--open"),this.detailsHeader.setAttribute("aria-expanded",t),this.content.setAttribute("aria-hidden",!t),this.detailsHeader.setAttribute("data-ga-action",`${s} panel`),this.detailsTitle&&(this.detailsTitle.textContent=d),this.onOpen&&this.onClose&&(t?this.onOpen():this.onClose())}this.saveState===!0&&t===!0?localStorage.setItem(this.details.getAttribute("id"),!0):localStorage.removeItem(this.details.getAttribute("id"))}keyboardInteraction(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),this.toggle(t);break}}}var et=g('<div><button type="button" data-close-all="Hide all"><span class="ons-btn__inner ons-accordion__toggle-all-inner"><span class="ons-btn__text">Show all</span></span></button> <!></div>');function O(l,t){S(t,!1);const s=F();let e=m(t,"id",24,V),i=m(t,"cls",8,null),d=m(t,"showToggle",8,!1),o=D(),n=D();P("dataGroup",e()),G(async()=>{await X(0);const h=[...A(o).querySelectorAll(".ons-js-details")].map(u=>new tt(u,b=>s("toggle",{...b,el:u})));new Y(A(n),h)}),x();var r=et(),a=f(r);let _;B(a,c=>E(n,c),()=>A(n));var y=C(a,2);M(y,t,"default",{},null),B(r,c=>E(o,c),()=>A(o)),k(c=>{v(r,"id",e()),H(r,1,`ons-accordion ${i()??""}`),_=H(a,1,"ons-btn ons-accordion__toggle-all ons-u-mb-s ons-u-d-no ons-btn--secondary ons-btn--small svelte-ijgx9p",null,_,c),v(a,"data-group",e())},[()=>({"hide-toggle":!d()})],Z),p(l,r),I()}O.__docgen={data:[{name:"id",visibility:"public",description:"Optional: Set the unique ID of the accordion",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"showToggle",visibility:"public",description:'Option to include a "show all" toggle above the accordion',keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"}],name:"Accordion.svelte"};var st=g('<h3 class="ons-details__title ons-u-fs-r--b"> </h3>'),it=g('<h2 class="ons-details__title ons-u-fs-r--b"> </h2>'),ot=g('<div class="ons-details ons-js-details ons-details--accordion"><div class="ons-details__heading ons-js-details-heading" role="button"><!> <span class="ons-details__icon"><svg class="ons-icon" viewBox="0 0 8 13" xmlns="http://www.w3.org/2000/svg" focusable="false" fill="currentColor" role="img" title="ons-icon-chevron"><path d="M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z" transform="translate(-5.02 -1.59)"></path></svg></span></div> <div class="ons-details__content ons-js-details-content"><!></div></div>');function w(l,t){S(t,!1);let s=m(t,"title",8,null),e=m(t,"id",24,()=>V(s())),i=m(t,"headingTag",8,"h2");const d=N("dataGroup");x();var o=ot(),n=f(o),r=f(n);{var a=h=>{var u=st(),b=f(u);k(()=>T(b,s())),p(h,u)},_=h=>{var u=it(),b=f(u);k(()=>T(b,s())),p(h,u)};Q(r,h=>{i()==="h3"?h(a):h(_,!1)})}var y=C(n,2),c=f(y);M(c,t,"default",{},null),k(()=>{v(o,"id",e()),v(o,"data-group",d),v(y,"id",`${e()??""}-content`)}),p(l,o),I()}w.__docgen={data:[{name:"title",visibility:"public",description:"Sets the title of the accordion item",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"id",visibility:"public",description:"Sets the unique ID of the accordion item",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"headingTag",visibility:"public",description:"Set the heading level for the accordion items",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"h2",text:'"h2"'},{kind:"const",type:"string",value:"h3",text:'"h3"'}],text:'"h2" | "h3"'},static:!1,readonly:!1,defaultValue:'"h2"'}],name:"AccordionItem.svelte"};const nt=`An accordion component.\r
\r
Based on [this ONS Design System component](https://service-manual.ons.gov.uk/design-system/components/accordion).\r
\r
<!-- prettier-ignore -->\r
\`\`\`html\r
<script>\r
  import { Accordion, AccordionItem } from "@onsvisual/svelte-components";\r
<\/script>\r
\r
<Accordion>\r
  <AccordionItem title="First item">\r
    <p>Contents of first item.</p>\r
  </AccordionItem>\r
  <AccordionItem title="Second item">\r
    <p>Contents of second item.</p>\r
  </AccordionItem>\r
</Accordion>\r
\`\`\`\r
`,L=(l,t=R)=>{O(l,z(t,{children:(s,e)=>{var i=dt(),d=j(i);w(d,{title:"First item",children:(n,r)=>{var a=lt();p(n,a)},$$slots:{default:!0}});var o=C(d,2);w(o,{title:"Second item",children:(n,r)=>{var a=rt();p(n,a)},$$slots:{default:!0}}),p(s,i)},$$slots:{default:!0}}))},at={title:"Layout/Accordion",component:O,tags:["autodocs"],argTypes:{},parameters:J(nt)},{Story:q}=U();var lt=g("<p>Contents of first item.</p>"),rt=g("<p>Contents of second item.</p>"),dt=g("<!> <!>",1),ct=g("<!> <!>",1);function $(l,t){S(t,!1),x();var s=ct(),e=j(s);q(e,{name:"Default",args:{},get template(){return L},parameters:{__svelteCsf:{rawCode:`<Accordion {...args}>\r
	<AccordionItem title="First item">\r
		<p>Contents of first item.</p>\r
	</AccordionItem>\r
	<AccordionItem title="Second item">\r
		<p>Contents of second item.</p>\r
	</AccordionItem>\r
</Accordion>`}}});var i=C(e,2);q(i,{name:"With 'show all' toggle",args:{showToggle:!0},get template(){return L},parameters:{__svelteCsf:{rawCode:`<Accordion {...args}>\r
	<AccordionItem title="First item">\r
		<p>Contents of first item.</p>\r
	</AccordionItem>\r
	<AccordionItem title="Second item">\r
		<p>Contents of second item.</p>\r
	</AccordionItem>\r
</Accordion>`}}}),p(l,s),I()}$.__docgen={data:[],name:"Accordion.stories.svelte"};const W=K($,at),yt=["Default","WithShowAllToggle"],At={...W.Default,tags:["svelte-csf-v5"]},kt={...W.WithShowAllToggle,tags:["svelte-csf-v5"]};export{At as Default,kt as WithShowAllToggle,yt as __namedExportsOrder,at as default};
