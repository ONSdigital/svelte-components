{"version":3,"file":"LazyLoad.stories-bb2ebe0c.js","sources":["../../src/wrappers/LazyLoad/docs/component.md?raw","../../src/wrappers/LazyLoad/LazyLoad.svelte","../../src/wrappers/LazyLoad/LazyLoad.stories.svelte"],"sourcesContent":["export default \"A wrapper component that uses IntersectionObserver to allow the elements it contains to be lazy loaded, ie. to be initialised/mounted only when they enter the viewport (or come close to it).\\n\\nYou can use the **initialHeight** to set the minimum height of the placeholder in pixels (default 400), and you can use **rootMargin** to set how many pixels from the viewport you want lazy loading to kick in (default 200).\\n\\n<!-- prettier-ignore -->\\n```html\\n<script>\\n  import { LazyLoad } from \\\"@onsvisual/svelte-components\\\";\\n</script>\\n\\n{#each Array(20) as section, i}\\n  <LazyLoad>\\n    <div class=\\\"img-container\\\">\\n      <img src=\\\"https://cataas.com/cat?{i}\\\" alt=\\\"\\\" />\\n    </div>\\n  </LazyLoad>\\n{/each}\\n\\n<style>\\n  .img-container {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    height: 400px;\\n    background: #eee;\\n    margin-bottom: 10px;\\n  }\\n  img {\\n    width: 200px;\\n  }\\n</style>\\n```\\n\"","<script>\n  import { onMount, onDestroy } from \"svelte\";\n\n  /**\n   * Bind to this variable to monitor whether the component has entered the viewport (boolean true/false).\n   * @type {boolean}\n   */\n  export let entered = false;\n  /**\n   * Set the initial \"placeholder\" height of the component in pixels.\n   * @type {number}\n   */\n  export let initialHeight = 400;\n  /**\n   * Set how many pixels from the viewport you want lazy loading to kick in.\n   * @type {number}\n   */\n  export let rootMargin = 200;\n\n  let el, observer;\n\n  const callback = (entries, observer) => {\n    entries.forEach((entry) => {\n      let intersecting = entry.isIntersecting;\n      if (!entered && intersecting) {\n        observer.unobserve(el);\n        entered = true;\n        console.log(\"in view\");\n      }\n    });\n  };\n\n  onMount(() => {\n    let options = { root: document, rootMargin: `${rootMargin}px` };\n\n    observer = new IntersectionObserver(callback, options);\n    observer.observe(el);\n  });\n\n  onDestroy(() => observer.unobserve(el));\n</script>\n\n{#if entered}\n  <slot />\n{:else}\n  <div bind:this=\"{el}\" style:height=\"{+initialHeight || 100}px\"></div>\n{/if}\n","<script>\n  import { Meta, Template, Story } from \"@storybook/addon-svelte-csf\";\n\n  // @ts-ignore\n  import componentDocs from \"./docs/component.md?raw\";\n  import LazyLoad from \"./LazyLoad.svelte\";\n  import { withComponentDocs } from \"../../js/withParams.js\";\n</script>\n\n<Meta\n  title=\"Wrappers/LazyLoad\"\n  component=\"{LazyLoad}\"\n  argTypes=\"{{}}\"\n  {...withComponentDocs(componentDocs)}\n/>\n\n<Template let:args>\n  {#each Array(20) as section, i}\n    <LazyLoad>\n      <div class=\"img-container\">\n        <img src=\"https://cataas.com/cat?{i}\" alt=\"\" />\n      </div>\n    </LazyLoad>\n  {/each}\n</Template>\n\n<Story name=\"Default\" args=\"{{}}\" />\n\n<style>\n  .img-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 400px;\n    background: #eee;\n    margin-bottom: 10px;\n  }\n  img {\n    width: 200px;\n  }\n</style>\n"],"names":["componentDocs","style_height","ctx","insert","target","div","anchor","dirty","entered","$$props","initialHeight","rootMargin","el","observer","callback","entries","entry","intersecting","$$invalidate","onMount","options","onDestroy","$$value","each_value","i","LazyLoad","withComponentDocs","get_spread_object"],"mappings":"sTAAA,MAAeA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBC6CyBC,EAAA,GAAA,CAAAC,MAAiB,sDAAvDC,EAAoEC,EAAAC,EAAAC,CAAA,kBAA9BC,EAAA,GAAAN,KAAAA,EAAA,GAAA,CAAAC,MAAiB,mXAHpDA,EAAO,CAAA,EAAA,yVAnCC,CAAA,QAAAM,EAAU,EAAK,EAAAC,EAKf,CAAA,cAAAC,EAAgB,GAAG,EAAAD,EAKnB,CAAA,WAAAE,EAAa,GAAG,EAAAF,EAEvBG,EAAIC,QAEFC,EAAQ,CAAIC,EAASF,IAAQ,CACjCE,EAAQ,QAASC,GAAK,KAChBC,EAAeD,EAAM,eACpB,CAAAR,GAAWS,IACdJ,EAAS,UAAUD,CAAE,EACrBM,EAAA,EAAAV,EAAU,EAAI,EACd,QAAQ,IAAI,SAAS,MAK3BW,EAAO,IAAA,KACDC,EAAO,CAAK,KAAM,SAAU,cAAeT,OAE/CE,EAAe,IAAA,qBAAqBC,EAAUM,CAAO,EACrDP,EAAS,QAAQD,CAAE,IAGrBS,EAAgB,IAAAR,EAAS,UAAUD,CAAE,CAAA,2CAMpBA,EAAEU,y9CCzBqBpB,EAAC,CAAA,+FADrCC,EAEKC,EAAAC,EAAAC,CAAA,iVAJFiB,EAAA,MAAM,EAAE,uBAAb,OAAIC,GAAA,gLAAJ,OAAI,GAAA,yLANMC,CAAQ,gBAEhBC,EAAkB1B,CAAa,sYAFvByB,CAAQ,OAEhBlB,EAAA,GAAAoB,EAAAD,EAAkB1B,CAAa,CAAA;;;;;;"}