import{al as oe,am as re,p as de,r as ce,a as i,$ as ue,j as b,i as C,t as h,e as y,h as pe,an as fe,f as N,u as P,s as L,m as Z,k as O,n as S,g as A,o as z,q as ye}from"./iframe-DYzcpUXE.js";import{i as be}from"./create-runtime-stories-DJti1SCK.js";import{h as me}from"./svelte-head-DZICkEA3.js";import{a as ve}from"./actions-dzgrYvJI.js";import{s as T}from"./attributes-BIJ0UskH.js";import{s as K}from"./class-Dzh9Da8g.js";function he(u,a,m){var p=oe(u,a);p&&p.set&&(u[a]=m,re(()=>{u[a]=null}))}var ge=fe(b("<script><\/script><!>",1)),ke=b("<label> </label>"),we=b('<button type="reset" title="Clear selection" aria-label="Clear selection" class="ons-autocomplete-clear svelte-nc31vb"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 14 14" width="18"><path fill="currentColor" d="M13.6 1 l -0.71 -0.71 a 0.5 0.5 0 0 0 -0.71 0 l -5.25 5.25 l -5.25 -5.25 a 0.51 0.51 0 0 0 -0.71 0 l -0.71 0.71 a 0.5 0.5 0 0 0 0 0.71 l 5.25 5.25 l -5.25 5.25 a 0.5 0.5 0 0 0 0 0.71 l 0.71 0.71 a 0.5 0.5 0 0 0 0.71 0 l 5.25 -5.25 l 5.25 5.25 a 0.5 0.5 0 0 0 0.71 0 l 0.71 -0.71 a 0.5 0.5 0 0 0 0 -0.71 l -5.25 -5.25 l 5.25 -5.25 a 0.5 0.5 0 0 0 0 -0.71Z"></path></svg></button>'),xe=b("<div></div> <!>",1),_e=b('<div><!> <div class="ons-autocomplete-wrapper svelte-nc31vb"><!></div></div>');function Ve(u,a){de(a,!1);const m=ce(),p=(e=1e3)=>new Promise(t=>setTimeout(t,e)),F=e=>`<svg class="${e==null?void 0:e.className}" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 11.75 7.7" width="18" style="z-index:1"><path fill="currentColor" d="m1.37.15 4.5 5.1 4.5-5.1a.37.37 0 0 1 .6 0l.7.7a.45.45 0 0 1 0 .5l-5.5 6.2a.37.37 0 0 1-.6 0l-5.5-6.1a.64.64 0 0 1 0-.6l.7-.7a.64.64 0 0 1 .6 0Z"></path></svg>`;let n,g=Z(),q,k=Z(!1),f=i(a,"id",8,"autocomplete"),o=i(a,"mode",8,"default"),G=i(a,"clearable",24,()=>o()!=="search"),E=i(a,"autoClear",24,()=>o()==="search"),M=i(a,"label",24,()=>o()==="search"?"Type to select":"Select an option"),H=i(a,"hideLabel",8,!1),J=i(a,"placeholder",24,()=>o()==="search"?"Enter text":"Select one"),d=i(a,"value",12,null),w=i(a,"options",24,()=>[]),c=i(a,"labelKey",8,"label"),U=i(a,"groupKey",8,""),Q=i(a,"minLength",24,()=>o()==="search"?1:0),W=i(a,"loadOptions",8,(e,t)=>{const l=o()!=="search"&&w().map(s=>s[c()]).includes(e)?w():w().filter(s=>s[c()].match(new RegExp(`\\b${e.replace(/[^\w\s]/gi,"")}`,"i")));t(l)}),X=i(a,"scriptUrl",8,"https://cdn.ons.gov.uk/vendor/accessible-autocomplete/3.0.1/accessible-autocomplete.min.js");async function v(){L(k,!0),n.value="",await p(110),n.focus({preventScroll:!0}),n.blur(),L(k,!1),m("clear",d())}let Y=i(a,"cls",8,"");function $(e){return e&&e[c()]}function j(e,t=""){return e.replace(new RegExp(`\\b${t.replace(/[^\w\s]/gi,"")}`,"i"),l=>`<b>${l}</b>`)}function ee(e){const t=(n==null?void 0:n.value)||"";return e&&(U()?`${j((e==null?void 0:e[c()])||"",t)} <span class="muted-text">${e[U()]}</span>`:j((e==null?void 0:e[c()])||"",t))}async function B(e){d(e),m("change",d()),d()&&E()&&(await p(0),v())}function te(e){e.target.value||B(null)}function I(){!A(g)&&(window!=null&&window.accessibleAutocomplete)&&(q=window.accessibleAutocomplete,L(g,!0))}function x(e){var t;q({element:e,id:f(),name:`${f()}-input`,source:W(),defaultValue:((t=d())==null?void 0:t[c()])||"",autoselect:!0,onConfirm:B,confirmOnBlur:!1,placeholder:J(),displayMenu:"overlay",showAllValues:o()==="default",dropdownArrow:F,minLength:Q(),templates:{inputValue:$,suggestion:ee}}),n=document.getElementById(f()),n.addEventListener("blur",te)}ue(I),be();var _=_e();me(e=>{var t=ge(),l=N(t);O(l),h(()=>T(l,"src",X())),P("load",l,I),y(e,t)});var R=S(_);{var ae=e=>{var t=ke();let l;var s=S(t);h(V=>{T(t,"for",f()),l=K(t,1,"ons-label",null,l,V),ye(s,M())},[()=>({"ons-u-vh":H()})],z),y(e,t)};C(R,e=>{M()&&e(ae)})}var le=O(R,2),ie=S(le);{var ne=e=>{var t=xe(),l=N(t);let s;ve(l,r=>x==null?void 0:x(r));var V=O(l,2);{var se=r=>{var D=we();P("click",D,v),y(r,D)};C(V,r=>{G()&&!E()&&d()&&r(se)})}h(r=>{T(l,"id",`${f()??""}-container`),s=K(l,1,"ons-autocomplete svelte-nc31vb",null,s,r)},[()=>({"hide-menu":A(k)})],z),y(e,t)};C(ie,e=>{A(g)&&e(ne)})}return h(()=>K(_,1,`ons-field ${Y()??""}`,"svelte-nc31vb")),y(u,_),he(a,"clearInput",v),pe({clearInput:v})}Ve.__docgen={data:[{name:"id",visibility:"public",description:"Unique id for the element",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"autocomplete"'},{name:"mode",visibility:"public",description:'The mode can be either "default" or "search"',keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"default",text:'"default"'},{kind:"const",type:"string",value:"search",text:'"search"'}],text:'"default" | "search"'},static:!1,readonly:!1,defaultValue:'"default"'},{name:"clearable",visibility:"public",description:"Defines whether the selection can be cleared",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"autoClear",visibility:"public",description:'Clear value on selection (default for "search" mode)',keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"label",visibility:"public",description:"A label to describe the element (expected for accessibility)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"hideLabel",visibility:"public",description:"Visually hide the label",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"placeholder",visibility:"public",description:"An optional placeholder text",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"value",visibility:"public",description:"A prop to bind to for the selected value",keywords:[],kind:"let",static:!1,readonly:!1,defaultValue:"null"},{name:"options",visibility:"public",description:"An array of options, formatted {id, label}",keywords:[],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1,defaultValue:"[]"},{name:"labelKey",visibility:"public",description:"The attribute of an option that defines its label/name",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"label"'},{name:"groupKey",visibility:"public",description:"The attribute of an option that defines its group (optional)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"minLength",visibility:"public",description:"Optional: Minimum query length to return results",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"..."},{name:"loadOptions",visibility:"public",description:"Optional: Override function for loading/filtering options based on the entered text",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1,defaultValue:"function"},{name:"scriptUrl",visibility:"public",description:"Optional: Override the default CDN URL for the accessible-autocomplete script",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"https://cdn.ons.gov.uk/vendor/accessible-autocomplete/3.0.1/accessible-autocomplete.min.js"'},{name:"clearInput",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"function",text:"() => Promise<void>"},static:!1,readonly:!1},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'}],name:"Select.svelte"};export{Ve as S};
