import{p as H,Q as tt,a as p,ak as et,ao as st,$ as O,j as C,t as P,e as f,h as I,X as R,n as w,k as v,o as q,g as b,m as M,W as K,s as z,q as F,R as at,O as it,a0 as nt,a1 as B,f as W,Z as ot,_ as lt,V as x}from"./iframe-CwnOGufI.js";import{i as S,w as rt,c as bt,d as ct}from"./create-runtime-stories-CLr9y0ZE.js";import{e as ht,i as dt}from"./each-CudjTySy.js";import{s as U}from"./slot-BP_Qo1ZM.js";import{s as m}from"./attributes-Bmkkxx_O.js";import{s as Q}from"./class-Dzh9Da8g.js";import{b as X}from"./this-DBfByQAL.js";import{m as ut,e as ft,s as Tt}from"./utils-VWytQRnm.js";import"./attributes-Co-1QMVx.js";import"./_commonjsHelpers-CqkleIqs.js";const pt="ons-tab",mt="ons-tabs__title",vt="ons-tabs__list",gt="ons-tab__list-item",_t="ons-tabs__panel",N=ut;class wt{constructor(t){this.boundTabClick=this.onTabClick.bind(this),this.boundTabKeydown=this.onTabKeydown.bind(this),this.component=t,this.tabsTitle=t.querySelector(`.${mt}`),this.tabs=[...t.getElementsByClassName(pt)],this.tabList=t.getElementsByClassName(vt),this.tabListContainer=this.tabList[0].parentElement,this.tabListItems=[...t.getElementsByClassName(gt)],this.tabPanels=[...t.getElementsByClassName(_t)],this.jsHiddenClass="ons-tabs__panel--hidden",this.jsTabListAsRowClass="ons-tabs__list--row",this.jsTabItemAsRowClass="ons-tab__list-item--row",this.jsTabAsListClass="ons-tab--row",this.noInitialActiveTab=this.component.getAttribute("data-no-initial-active-tab"),N.hasMatchMedia()?this.setupViewportChecks():this.makeTabs()}setupViewportChecks(){const t=()=>{let e=0;return this.tabListItems.forEach(s=>{e+=s.offsetWidth}),e<450?e=450:e};this.viewport=N(`(min-width: ${t()}px)`),this.viewport.addListener(this.checkViewport.bind(this)),this.checkViewport()}checkViewport(){this.viewport.matches?this.makeTabs():this.makeList()}makeTabs(){this.tabList[0].setAttribute("role","tablist"),this.tabList[0].classList.add(this.jsTabListAsRowClass),this.tabsTitle.classList.add("ons-u-vh"),this.tabListContainer.classList.add("ons-tabs__container"),this.tabPanels.forEach(e=>{e.setAttribute("tabindex","0"),e.querySelector('[id*="content-title"]')&&e.firstElementChild.classList.add("ons-u-vh")}),this.tabListItems.forEach(e=>{e.setAttribute("role","presentation"),e.classList.add(this.jsTabItemAsRowClass)}),this.tabs.forEach(e=>{this.setAttributes(e),e.classList.add(this.jsTabAsListClass),e.addEventListener("click",this.boundTabClick,!0),e.addEventListener("keydown",this.boundTabKeydown,!0),this.hideTab(e)});const t=this.getTab(window.location.hash);if(!this.noInitialActiveTab||t){const e=t||this.tabs[0];this.showTab(e)}this.ensureTabIndexExists(),this.component.boundOnHashChange=this.onHashChange.bind(this),window.addEventListener("hashchange",this.component.boundOnHashChange,!0)}makeList(){this.tabList[0].removeAttribute("role"),this.tabList[0].classList.remove(this.jsTabListAsRowClass),this.tabListContainer.classList.remove("ons-tabs__container"),this.tabsTitle.classList.remove("ons-u-vh"),this.tabPanels.forEach(t=>{t.removeAttribute("tabindex","0"),t.firstElementChild.classList.contains("ons-u-vh")&&t.firstElementChild.classList.remove("ons-u-vh")}),this.tabListItems.forEach(t=>{t.removeAttribute("role","presentation"),t.classList.remove(this.jsTabItemAsRowClass)}),this.tabs.forEach(t=>{t.removeEventListener("click",this.boundTabClick,!0),t.removeEventListener("keydown",this.boundTabKeydown,!0),t.classList.remove(this.jsTabAsListClass),this.unsetAttributes(t)}),window.removeEventListener("hashchange",this.component.boundOnHashChange,!0)}onHashChange(){const t=window.location.hash,e=this.getTab(t);if(!e)return;if(this.changingHash){this.changingHash=!1;return}const s=this.getCurrentTab();s&&this.hideTab(s),this.showTab(e),e.focus()}hideTab(t){this.unhighlightTab(t),this.hidePanel(t)}showTab(t){this.highlightTab(t),this.showPanel(t)}getTab(t){return this.component.querySelector('.ons-tab[href="'+t+'"]')}setAttributes(t){const e=this.getHref(t).slice(1);t.setAttribute("id","tab_"+e),t.setAttribute("role","tab"),t.setAttribute("aria-controls",e),t.setAttribute("tabindex","-1");const s=this.getPanel(t);s.setAttribute("role","tabpanel"),s.setAttribute("aria-labelledby",t.id),s.classList.add(this.jsHiddenClass)}unsetAttributes(t){t.removeAttribute("id"),t.removeAttribute("role"),t.removeAttribute("aria-controls"),t.removeAttribute("tabindex"),t.removeAttribute("aria-selected");const e=this.getPanel(t);e.removeAttribute("role"),e.removeAttribute("aria-labelledby"),e.classList.remove(this.jsHiddenClass)}onTabClick(t){t.preventDefault();const e=t.target,s=this.getCurrentTab();s&&this.hideTab(s),(!this.noInitialActiveTab||e!==s)&&(this.showTab(e),this.createHash(e)),this.ensureTabIndexExists()}ensureTabIndexExists(){this.tabs.find(t=>t.getAttribute("tabindex")==="0")||this.tabs[0].setAttribute("tabindex","0")}createHash(t){const e=this.getPanel(t),s=e.id;e.id="",this.changingHash=!0,window.location.hash=this.getHref(t).slice(1),e.id=s}onTabKeydown(t){t.which===37?(this.focusPreviousTab(),t.preventDefault()):t.which===39?(this.focusNextTab(),t.preventDefault()):t.which===32&&this.onTabClick(t)}focusNextTab(){const e=this.getFocusedTab().nextElementSibling;e&&e.firstElementChild.focus()}focusPreviousTab(){const e=this.getFocusedTab().previousElementSibling;e&&e.firstElementChild.focus()}getPanel(t){const e=this.getHref(t).replace(/\./g,"\\.");return this.component.querySelector(e)}showPanel(t){this.getPanel(t).classList.remove(this.jsHiddenClass)}hidePanel(t){this.getPanel(t).classList.add(this.jsHiddenClass)}unhighlightTab(t){t.setAttribute("aria-selected","false"),t.classList.remove("ons-tab--selected"),t.setAttribute("tabindex","-1")}highlightTab(t){t.setAttribute("aria-selected","true"),t.classList.add("ons-tab--selected"),t.setAttribute("tabindex","0")}getFocusedTab(){return document.activeElement.parentNode}getCurrentTab(){return this.component.querySelector(".ons-tab--selected")}getHref(t){const e=t.getAttribute("href");return e.slice(e.indexOf("#"),e.length)}}var yt=C('<li class="ons-tab__list-item ons-tab__list-item--row" role="presentation"><a class="ons-tab ons-tab--row svelte-1k8ezgy" role="tab"> </a></li>'),Ct=C('<section><h2 class="ons-tabs__title ons-u-fs-r--b ons-u-mt-no ons-u-fs-m ons-u-vh">Contents</h2> <div class="ons-tabs__container svelte-1k8ezgy"><ul class="ons-tabs__list ons-tabs__list--row" role="tablist"></ul></div> <!></section>');function j(c,t){H(t,!1);const[e,s]=R(),o=()=>K(T,"$sections",e),l=tt();let g=p(t,"compact",8,!1),h=p(t,"border",8,!1),i=p(t,"selected",12,null),d=p(t,"cls",8,null),a=M();const T=st([]);et("sections",T);function L(n){i(n),l("change",{id:n})}O(async()=>{var n,u;await ft(0),new wt(b(a)),i((u=(n=o())==null?void 0:n[0])==null?void 0:u.id)}),S();var _=Ct();let k;var r=v(w(_),2),G=w(r);ht(G,5,o,dt,(n,u)=>{var V=yt(),y=w(V),Y=w(y);P(()=>{m(y,"href",`#${b(u).id??""}`),m(y,"id",`tab_${b(u).id??""}`),m(y,"aria-controls",b(u).id),F(Y,b(u).dataset.title)}),at("click",y,()=>L(b(u).id)),f(n,V)});var J=v(r,2);U(J,t,"default",{},null),X(_,n=>z(a,n),()=>b(a)),P(n=>k=Q(_,1,`ons-tabs ${d()??""}`,"svelte-1k8ezgy",k,n),[()=>({"ons-tabs__border":h(),"ons-tabs__compact":g()})],q),f(c,_),I(),s()}j.__docgen={data:[{name:"compact",visibility:"public",description:"Make tabs smaller/more compact",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"border",visibility:"public",description:"Include a border around the tab panel",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"selected",visibility:"public",description:"The ID of selected tab (for binding)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"}],name:"Tabs.svelte"};var Lt=C('<section data-type="Tab" class="ons-tabs__panel" tabindex="0" role="tabpanel"><h2> </h2> <!></section>');function A(c,t){H(t,!1);const[e,s]=R(),o=()=>K(i,"$sections",e);let l=p(t,"title",8,"Tab title"),g=p(t,"hideTitle",8,!0),h=p(t,"id",24,()=>Tt(l()));const i=it("sections");let d=M();O(()=>{i&&B(i,[...b(d).parentElement.getElementsByTagName("section")].filter(r=>r.dataset.type==="Tab"))}),nt(()=>{i&&B(i,o().filter(r=>r.id!==h()))}),S();var a=Lt(),T=w(a);let L;var _=w(T),k=v(T,2);U(k,t,"default",{},null),X(a,r=>z(d,r),()=>b(d)),P(r=>{m(a,"id",h()),m(a,"data-title",l()),m(a,"aria-labelledby",`tab_${h()??""}`),m(T,"id",`${h()??""}-content-title`),L=Q(T,1,"ons-u-vh",null,L,r),F(_,l())},[()=>({"ons-u-vh":g()})],q),f(c,a),I(),s()}A.__docgen={data:[{name:"title",visibility:"public",description:"Title of tab/panel",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"Tab title"'},{name:"hideTitle",visibility:"public",description:"Hide the title within the panel",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"id",visibility:"public",description:"ID/slug for tab (auto-generated from title if not set)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."}],name:"Tab.svelte"};const kt=`Use tabs to help users navigate between short sections of related content within a single page, showing one section at a time.

Based on [this ONS Design System component](https://service-manual.ons.gov.uk/design-system/components/tabs).

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { Tab, Tabs } from "@onsvisual/svelte-components";
<\/script>

<Tabs>
  <Tab title="Tab one">Contents of tab panel one.</Tab>
  <Tab title="Tab two">Contents of tab panel two.</Tab>
  <Tab title="Tab three">Contents of tab panel three.</Tab>
</Tabs>
\`\`\`
`,E=(c,t=ot)=>{j(c,lt(t,{children:(e,s)=>{var o=xt(),l=W(o);A(l,{title:"Tab one",children:(i,d)=>{var a=x("Contents of tab panel one.");f(i,a)},$$slots:{default:!0}});var g=v(l,2);A(g,{title:"Tab two",children:(i,d)=>{var a=x("Contents of tab panel two.");f(i,a)},$$slots:{default:!0}});var h=v(g,2);A(h,{title:"Tab three",children:(i,d)=>{var a=x("Contents of tab panel three.");f(i,a)},$$slots:{default:!0}}),f(e,o)},$$slots:{default:!0}}))},At={title:"Layout/Tabs",component:j,tags:["autodocs"],argTypes:{},parameters:rt(kt)},{Story:$}=ct();var xt=C("<!> <!> <!>",1),Et=C("<!> <!> <!>",1);function Z(c,t){H(t,!1),S();var e=Et(),s=W(e);$(s,{name:"Default",args:{},get template(){return E},parameters:{__svelteCsf:{rawCode:`<Tabs {...args}>
	<Tab title="Tab one">Contents of tab panel one.</Tab>
	<Tab title="Tab two">Contents of tab panel two.</Tab>
	<Tab title="Tab three">Contents of tab panel three.</Tab>
</Tabs>`}}});var o=v(s,2);$(o,{name:"Tab panel border",args:{border:!0},get template(){return E},parameters:{__svelteCsf:{rawCode:`<Tabs {...args}>
	<Tab title="Tab one">Contents of tab panel one.</Tab>
	<Tab title="Tab two">Contents of tab panel two.</Tab>
	<Tab title="Tab three">Contents of tab panel three.</Tab>
</Tabs>`}}});var l=v(o,2);$(l,{name:"Compact tab labels",args:{compact:!0},get template(){return E},parameters:{__svelteCsf:{rawCode:`<Tabs {...args}>
	<Tab title="Tab one">Contents of tab panel one.</Tab>
	<Tab title="Tab two">Contents of tab panel two.</Tab>
	<Tab title="Tab three">Contents of tab panel three.</Tab>
</Tabs>`}}}),f(c,e),I()}Z.__docgen={data:[],name:"Tabs.stories.svelte"};const D=bt(Z,At),Ot=["Default","TabPanelBorder","CompactTabLabels"],Rt={...D.Default,tags:["svelte-csf-v5"]},qt={...D.TabPanelBorder,tags:["svelte-csf-v5"]},Mt={...D.CompactTabLabels,tags:["svelte-csf-v5"]};export{Mt as CompactTabLabels,Rt as Default,qt as TabPanelBorder,Ot as __namedExportsOrder,At as default};
