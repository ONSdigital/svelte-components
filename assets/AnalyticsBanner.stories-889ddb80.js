import{S as le,i as ce,s as re,e as ye,a as G,z as te,d as W,E as pe,I as ge,o as he,x as d,L as c,y as ne,Q as P,w as b,Z as J,P as s,Y as K,R as we,ad as se,B as ke,p as de,j as N,m as U,k as ue,l as fe,b as Q,t as q,n as z}from"./index-93ed49d9.js";import{p as be,w as oe,M as ve,T as Ce,S as Ae}from"./collect-stories-46e6ba01.js";const ae=`This component will display a cookie banner and export a function that allows you to push events to the Google Analytics dataLayer array.

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { AnalyticsBanner, AnalyticsEvent } from "@onsvisual/svelte-components";

  // Example of an analytics event triggered by another event "e"
  function doAnalyticsEvent(e) {
    // Assumes that e.detail is in the form {key1: "value1", key2: "value2", etc}
    AnalyticsEvent({event: "eventName", ...e.detail});
  }
<\/script>

<AnalyticsBanner analyticsId="{id_string}" />
<!-- Rest of page content -->
\`\`\`
`;function ie(o){let e;function t(l,u){return l[3]?je:Be}let n=t(o),i=n(o);return{c(){e=d("div"),i.c(),c(e,"class","ons-cookies-banner svelte-1syey1g"),c(e,"role","region"),c(e,"aria-label","Cookies banner"),ne(e,"display",o[2]?"block":null)},m(l,u){G(l,e,u),i.m(e,null)},p(l,u){n===(n=t(l))&&i?i.p(l,u):(i.d(1),i=n(l),i&&(i.c(),i.m(e,null))),u&4&&ne(e,"display",l[2]?"block":null)},d(l){l&&W(e),i.d()}}}function je(o){let e,t,n,i,l,u=o[7](o[4])+"",m,p,a,f=o[7]("You can")+"",B,v,j,E=o[7]("change your cookie preferences")+"",M,C,R=o[7]("at any time")+"",V,Y,I,g,h,w,A,r,k;return{c(){e=d("div"),t=d("div"),n=d("div"),i=d("p"),l=d("span"),m=P(u),p=b(),a=d("span"),B=P(f),v=b(),j=d("a"),M=P(E),C=b(),V=P(R),Y=P("."),I=b(),g=d("div"),h=d("button"),w=d("span"),A=d("span"),A.textContent=`${o[7]("Hide")}`,c(j,"href",F+"/cookies"),c(a,"class","ons-cookies-banner__preferences-text"),c(i,"class","ons-cookies-banner__desc ons-u-mb-no@s ons-u-mr-s@s"),c(n,"class","ons-grid__col ons-grid__col--flex ons-col-auto ons-u-flex-shrink@s"),c(A,"class","ons-btn__text"),c(w,"class","ons-btn__inner"),c(h,"type","button"),c(h,"class","ons-btn ons-btn--secondary ons-btn--small ons-js-hide-button"),c(h,"aria-label",o[7]("Hide this message")),c(g,"class","ons-grid__col"),c(t,"class","ons-grid ons-grid--flex ons-grid--between ons-grid--gutterless ons-grid--no-wrap@s ons-grid--vertical-center"),c(e,"class","ons-container ons-cookies-banner__confirmation svelte-1syey1g"),J(e,"ons-page__container--wider",o[1]==="wider")},m(y,_){G(y,e,_),s(e,t),s(t,n),s(n,i),s(i,l),s(l,m),s(i,p),s(i,a),s(a,B),s(a,v),s(a,j),s(j,M),s(a,C),s(a,V),s(a,Y),s(t,I),s(t,g),s(g,h),s(h,w),s(w,A),r||(k=K(h,"click",o[15]),r=!0)},p(y,_){_&16&&u!==(u=y[7](y[4])+"")&&we(m,u),_&2&&J(e,"ons-page__container--wider",y[1]==="wider")},d(y){y&&W(e),r=!1,k()}}}function Be(o){let e,t,n,i,l,u,m,p,a,f,B=o[7]("We would like to set")+"",v,j,E,M=o[7]("additional cookies")+"",C,R,V=o[7]("to remember your settings and understand how you use the site. This helps us to improve our services.")+"",Y,I,g,h,w,A,r,k,y,_,L,S,T,D,H,_e=o[7]("View cookies")+"",$,Z,ee;return{c(){e=d("form"),t=d("div"),n=d("div"),i=d("div"),l=d("h2"),l.textContent=`${o[7]("Cookies on ons.gov.uk")}`,u=b(),m=d("div"),p=d("p"),p.textContent=`${o[7]("Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.")}`,a=b(),f=d("p"),v=P(B),j=b(),E=d("a"),C=P(M),R=b(),Y=P(V),I=b(),g=d("div"),h=d("div"),w=d("button"),A=d("span"),r=d("span"),r.textContent=`${o[7]("Accept additional cookies")}`,k=b(),y=d("div"),_=d("button"),L=d("span"),S=d("span"),S.textContent=`${o[7]("Reject additional cookies")}`,T=b(),D=d("div"),H=d("a"),$=P(_e),c(l,"class","ons-cookies-banner__title ons-u-mb-xs"),c(E,"href",F+"/cookies"),c(m,"class","ons-cookies-banner__statement"),c(i,"class","ons-grid__col ons-col-8@m"),c(n,"class","ons-grid"),c(r,"class","ons-btn__text"),c(A,"class","ons-btn__inner"),c(w,"type","submit"),c(w,"class","ons-btn ons-btn--small ons-js-accept-cookies ons-cookies-banner__btn"),c(w,"data-button","accept"),c(h,"class","ons-grid__col"),c(S,"class","ons-btn__text"),c(L,"class","ons-btn__inner"),c(_,"type","button"),c(_,"class","ons-btn ons-btn--small ons-js-reject-cookies ons-cookies-banner__btn"),c(_,"data-button","reject"),c(y,"class","ons-grid__col"),c(H,"class","ons-cookies-banner__link"),c(H,"href",F+"/cookies"),c(D,"class","ons-grid__col"),c(g,"class","ons-grid ons-grid--flex ons-u-mt-s"),c(t,"class","ons-container ons-cookies-banner__primary svelte-1syey1g"),J(t,"ons-page__container--wider",o[1]==="wider"),c(e,"action",F+"/cookies/accept-all"),c(e,"method","GET"),c(e,"id","global-cookie-message"),c(e,"aria-label","cookie banner")},m(O,x){G(O,e,x),s(e,t),s(t,n),s(n,i),s(i,l),s(i,u),s(i,m),s(m,p),s(m,a),s(m,f),s(f,v),s(f,j),s(f,E),s(E,C),s(f,R),s(f,Y),s(t,I),s(t,g),s(g,h),s(h,w),s(w,A),s(A,r),s(g,k),s(g,y),s(y,_),s(_,L),s(L,S),s(g,T),s(g,D),s(D,H),s(H,$),Z||(ee=[K(w,"click",se(o[13])),K(_,"click",se(o[14]))],Z=!0)},p(O,x){x&2&&J(t,"ons-page__container--wider",O[1]==="wider")},d(O){O&&W(e),Z=!1,ke(ee)}}}function Ee(o){let e,t=o[2]&&!o[0]&&ie(o);return{c(){t&&t.c(),e=ye()},m(n,i){t&&t.m(n,i),G(n,e,i)},p(n,[i]){n[2]&&!n[0]?t?t.p(n,i):(t=ie(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:te,o:te,d(n){t&&t.d(n),n&&W(e)}}}function De(o){window!=null&&window.dataLayer&&window.dataLayer.push(o)}let F="//www.ons.gov.uk";function Pe(){return-1<document.cookie.indexOf("ons_cookie_preferences_set=true")}function Re(o,e){const t=new RegExp(`'${o}':(.*?)[,}]`),n=e.match(t);return n?n[1]:null}function Ie(){var o=document.cookie.match(new RegExp("(^|;) ?cookies_policy=([^;]*)(;|$)"));if(o){console.debug("legacy cookies_policy found");var e=decodeURIComponent(o[2]),t=JSON.parse(e);return console.debug("usage is",t.usage),t.usage}var n=document.cookie.match("(?:^|; )ons_cookie_policy=({.*?})");if(n){console.debug("ons_cookie_policy found");var i=Re("usage",n[1]);return console.debug("usage is",i),i==="true"}return console.debug("no cookie found - opting out"),!1}function Le(o,e,t){let n;const i=pe("page");ge(o,i,r=>t(12,n=r));let{analyticsId:l="GTM-MBCBVQS"}=e,{analyticsProps:u={}}=e,{hideBanner:m=!1}=e,{usageCookies:p=!1}=e,{width:a="wide"}=e,{pageViewEnabled:f=!0}=e,B,v=!1,j=!1,E="",M=n&&n.url.host.startsWith("cy")?"cy":"en",C=null;function R(r){let k=31536e3,y=window.location.hostname,_=!0,L="{'essential':true,'settings':true,'usage':true,'campaigns':true}",S="{'essential':true,'settings':false,'usage':false,'campaigns':false}",T=r=="all"?L:S,D="/";document.cookie=`ons_cookie_message_displayed=${_};max-age=${k};domain=${y};path=${D};`,document.cookie=`ons_cookie_policy=${T};max-age=${k};domain=${y};path=${D};`,t(4,E=`You have ${r=="all"?"accepted":"rejected"} all additional cookies.`),r=="all"&&t(8,p=!0),t(3,j=!0),r=="all"&&V()}function V(){console.log("initialising analytics"),window.dataLayer=[{analyticsOptOut:!1,"gtm.whitelist":["google","hjtc","lcl"],"gtm.blacklist":["customScripts","sp","adm","awct","k","d","j"],...u}],function(r,k,y,_,L){r[_]=r[_]||[],r[_].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var S=k.head,T=k.createElement(y),D=_!="dataLayer"?"&l="+_:"";T.async=!0,T.src="https://www.googletagmanager.com/gtm.js?id="+L+D,S.appendChild(T)}(window,document,"script","dataLayer",l),n&&(C=`${n.url.href}`.replace(n.url.hash,""))}function Y(r){if(r&&C){const k=`${r.url.href}`.replace(r.url.hash,"");k!==C&&(C=k,De({event:"pageView",pageURL:C,...u}))}}he(()=>{B=!0,i||(M=document.location.host.startsWith("cy")?"cy":"en"),t(2,v=!Pe()),t(8,p=Ie()),p&&B&&V()});const I={"Cookies on ons.gov.uk":"Cwcis ar ons.gov.uk","Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.":"Ffeiliau bach a gaiff eu storio ar eich dyfais pan fyddwch yn mynd ar wefan yw cwcis. Rydym ni’n defnyddio rhai cwcis hanfodol i wneud i’r wefan hon weithio.","We would like to set":"Hoffem osod","additional cookies":"cwcis ychwanegol","to remember your settings and understand how you use the site. This helps us to improve our services.":"er mwyn cofio eich gosodiadau a deall sut rydych chi’n defnyddio’r wefan. Mae hyn yn ein helpu ni i wella ein gwasanaethau.","Accept additional cookies":"Derbyn cwcis ychwanegol","Reject additional cookies":"Gwrthod cwcis ychwanegol","View cookies":"Gweld cwcis","You have accepted all additional cookies.":"Rydych chi wedi derbyn yr holl gwcis ychwanegol.","You have rejected all additional cookies.":"Rydych chi wedi gwrthod yr holl gwcis ychwanegol.","You can":"Gallwch chi","change your cookie preferences":"newid eich dewisiadau o ran cwcis","at any time.":"ar unrhyw adeg.",Hide:"Cuddio","Hide this message":"Cuddiwch y neges yma"},g=r=>M=="cy"&&I[r]?I[r]:r,h=()=>R("all"),w=()=>R("reject"),A=()=>t(2,v=!1);return o.$$set=r=>{"analyticsId"in r&&t(9,l=r.analyticsId),"analyticsProps"in r&&t(10,u=r.analyticsProps),"hideBanner"in r&&t(0,m=r.hideBanner),"usageCookies"in r&&t(8,p=r.usageCookies),"width"in r&&t(1,a=r.width),"pageViewEnabled"in r&&t(11,f=r.pageViewEnabled)},o.$$.update=()=>{o.$$.dirty&6144&&f&&Y(n)},[m,a,v,j,E,i,R,g,p,l,u,f,n,h,w,A]}class X extends le{constructor(e){super(),ce(this,e,Le,Ee,re,{analyticsId:9,analyticsProps:10,hideBanner:0,usageCookies:8,width:1,pageViewEnabled:11})}}function Se(o){let e,t;const n=[o[0]];let i={};for(let l=0;l<n.length;l+=1)i=de(i,n[l]);return e=new X({props:i}),{c(){N(e.$$.fragment)},m(l,u){U(e,l,u),t=!0},p(l,u){const m=u&1?ue(n,[fe(l[0])]):{};e.$set(m)},i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Te(o){let e,t,n,i,l,u;const m=[{title:"Layout/AnalyticsBanner"},{component:X},{argTypes:{}},oe(ae)];let p={};for(let a=0;a<m.length;a+=1)p=de(p,m[a]);return e=new ve({props:p}),n=new Ce({props:{$$slots:{default:[Se,({args:a})=>({0:a}),({args:a})=>a?1:0]},$$scope:{ctx:o}}}),l=new Ae({props:{name:"Default",args:{}}}),{c(){N(e.$$.fragment),t=b(),N(n.$$.fragment),i=b(),N(l.$$.fragment)},m(a,f){U(e,a,f),G(a,t,f),U(n,a,f),G(a,i,f),U(l,a,f),u=!0},p(a,[f]){const B=f&0?ue(m,[m[0],f&0&&{component:X},m[2],f&0&&fe(oe(ae))]):{};e.$set(B);const v={};f&3&&(v.$$scope={dirty:f,ctx:a}),n.$set(v)},i(a){u||(Q(e.$$.fragment,a),Q(n.$$.fragment,a),Q(l.$$.fragment,a),u=!0)},o(a){q(e.$$.fragment,a),q(n.$$.fragment,a),q(l.$$.fragment,a),u=!1},d(a){z(e,a),a&&W(t),z(n,a),a&&W(i),z(l,a)}}}class Me extends le{constructor(e){super(),ce(this,e,null,Te,re,{})}}const me=be(Me,{meta:{title:"Layout/AnalyticsBanner"},stories:{"tpl:default":{storyId:"layout-analyticsbanner--default",name:"default",template:!0,source:"<AnalyticsBanner {...args} />",hasArgs:!0},Default:{storyId:"layout-analyticsbanner--default",name:"Default",template:!1,hasArgs:!1}},allocatedIds:["default","Meta","Template","Story","componentDocs","AnalyticsBanner","withComponentDocs"]}),Ge=me.meta,We=["Default"],He=me.stories.Default;export{He as Default,We as __namedExportsOrder,Ge as default};
//# sourceMappingURL=AnalyticsBanner.stories-889ddb80.js.map
