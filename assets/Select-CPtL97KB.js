import{p as ge,Q as ke,a as l,$ as we,l as xe,b as _e,c as $,f as L,i as v,e as m,h as Ve,s as K,aj as Le,t as C,R as ee,m as te,j as g,k as R,g as h,d as Ce,n as q,o as D,q as Se}from"./iframe-DgZwGItH.js";import{i as Oe}from"./create-runtime-stories-xZ2YYh46.js";import{h as Te}from"./svelte-head-W05OBU9T.js";import{a as Ae}from"./actions-CmyQtFvL.js";import{s as F}from"./attributes-2UgTCuWr.js";import{s as U}from"./class-Dzh9Da8g.js";import{D as Ie}from"./Dropdown-DG2ZeP-Z.js";import{I as Me}from"./Input-CtqWKO9y.js";var je=Le(g("<script><\/script><!>",1)),Ke=g("<label> </label>"),Re=g('<button type="reset" title="Clear selection" aria-label="Clear selection" class="ons-autocomplete-clear svelte-nc31vb"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 14 14" width="18"><path fill="currentColor" d="M13.6 1 l -0.71 -0.71 a 0.5 0.5 0 0 0 -0.71 0 l -5.25 5.25 l -5.25 -5.25 a 0.51 0.51 0 0 0 -0.71 0 l -0.71 0.71 a 0.5 0.5 0 0 0 0 0.71 l 5.25 5.25 l -5.25 5.25 a 0.5 0.5 0 0 0 0 0.71 l 0.71 0.71 a 0.5 0.5 0 0 0 0.71 0 l 5.25 -5.25 l 5.25 5.25 a 0.5 0.5 0 0 0 0.71 0 l 0.71 -0.71 a 0.5 0.5 0 0 0 0 -0.71 l -5.25 -5.25 l 5.25 -5.25 a 0.5 0.5 0 0 0 0 -0.71Z"></path></svg></button>'),qe=g("<div></div> <!>",1),De=g('<div><!> <div class="ons-autocomplete-wrapper svelte-nc31vb"><!></div></div>');function Fe(ae,a){ge(a,!1);const E=ke(),B=(e=1e3)=>new Promise(t=>setTimeout(t,e)),le=e=>`<svg class="${e==null?void 0:e.className}" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 11.75 7.7" width="18" style="z-index:1"><path fill="currentColor" d="m1.37.15 4.5 5.1 4.5-5.1a.37.37 0 0 1 .6 0l.7.7a.45.45 0 0 1 0 .5l-5.5 6.2a.37.37 0 0 1-.6 0l-5.5-6.1a.64.64 0 0 1 0-.6l.7-.7a.64.64 0 0 1 .6 0Z"></path></svg>`;let n,k=te(),N,S=te(!1),u=l(a,"id",8,"autocomplete"),O=l(a,"name",24,u),o=l(a,"mode",8,"default"),ie=l(a,"clearable",24,()=>o()!=="search"),H=l(a,"autoClear",24,()=>o()==="search"),w=l(a,"label",24,()=>o()==="search"?"Type to select":"Select an option"),T=l(a,"hideLabel",8,!1),Z=l(a,"placeholder",24,()=>o()==="search"?"Enter text":"Select one"),s=l(a,"value",12,null),x=l(a,"options",24,()=>[]),d=l(a,"labelKey",8,"label"),z=l(a,"groupKey",8,null),ne=l(a,"renderFallback",8,!1),se=l(a,"minLength",24,()=>o()==="search"?1:0),re=l(a,"loadOptions",8,(e,t)=>{const i=o()!=="search"&&x().map(p=>p[d()]).includes(e)?x():x().filter(p=>p[d()].match(new RegExp(`\\b${e.replace(/[^\w\s]/gi,"")}`,"i")));t(i)}),oe=l(a,"scriptUrl",8,"https://cdn.ons.gov.uk/vendor/accessible-autocomplete/3.0.1/accessible-autocomplete.min.js"),P=l(a,"clearInput",8,async()=>{await _(null),E("clear",null)}),de=l(a,"cls",8,null);async function _(e){K(S,!0),n.value=e||"",await B(110),n.focus({preventScroll:!0}),n.blur(),K(S,!1)}function ce(e){return e&&e[d()]}function Q(e,t=""){return e.replace(new RegExp(`\\b${t.replace(/[^\w\s]/gi,"")}`,"i"),i=>`<b>${i}</b>`)}function ue(e){const t=(n==null?void 0:n.value)||"";return e&&(z()?`${Q((e==null?void 0:e[d()])||"",t)} <span class="muted-text">${e[z()]}</span>`:Q((e==null?void 0:e[d()])||"",t))}async function W(e){e&&s()!==e&&(s(e),E("change",s()),s()&&H()&&(await B(0),P()()))}function pe(e){e.target.value||W(null)}function G(){!h(k)&&(window!=null&&window.accessibleAutocomplete)&&(N=window.accessibleAutocomplete,K(k,!0))}function A(e){var t;N({element:e,id:u(),name:O(),source:re(),autoselect:!0,onConfirm:W,confirmOnBlur:!1,placeholder:Z(),displayMenu:"overlay",showAllValues:o()==="default",dropdownArrow:le,minLength:se(),templates:{inputValue:ce,suggestion:ue}}),n=e.querySelector(`#${u()}`),_(((t=s())==null?void 0:t[d()])||""),n.addEventListener("blur",pe)}function fe(e){if(n){const t=e==null?void 0:e[d()];t&&n.value!==t?_(t):!e&&n.value&&_("")}}we(G),xe(()=>Ce(s()),()=>{fe(s())}),_e(),Oe();var J=$();Te(e=>{var t=je(),i=L(t);R(i),C(()=>F(i,"src",oe())),ee("load",i,G),m(e,t)});var ye=L(J);{var be=e=>{var t=$(),i=L(t);{var p=c=>{const M=D(()=>{var r;return(r=s())==null?void 0:r[d()]});Me(c,{get id(){return u()},get name(){return O()},get label(){return w()},get hideLabel(){return T()},get value(){return h(M)}})},I=c=>{Ie(c,{get id(){return u()},get name(){return O()},get options(){return x()},get label(){return w()},get hideLabel(){return T()},get placeholder(){return Z()},get value(){return s()}})};v(i,c=>{o()==="search"?c(p):c(I,!1)})}m(e,t)},me=e=>{var t=De(),i=q(t);{var p=r=>{var f=Ke();let y;var V=q(f);C(j=>{F(f,"for",u()),y=U(f,1,"ons-label",null,y,j),Se(V,w())},[()=>({"ons-u-vh":T()})],D),m(r,f)};v(i,r=>{w()&&r(p)})}var I=R(i,2),c=q(I);{var M=r=>{var f=qe(),y=L(f);let V;Ae(y,b=>A==null?void 0:A(b));var j=R(y,2);{var ve=b=>{var X=Re();ee("click",X,function(...he){var Y;(Y=P())==null||Y.apply(this,he)}),m(b,X)};v(j,b=>{ie()&&!H()&&s()&&b(ve)})}C(b=>{F(y,"id",`${u()??""}-container`),V=U(y,1,"ons-autocomplete svelte-nc31vb",null,V,b)},[()=>({"hide-menu":h(S)})],D),m(r,f)};v(c,r=>{h(k)&&r(M)})}C(()=>U(t,1,`ons-field ${de()??""}`,"svelte-nc31vb")),m(e,t)};v(ye,e=>{ne()&&!h(k)?e(be):e(me,!1)})}m(ae,J),Ve()}Fe.__docgen={data:[{name:"id",visibility:"public",description:"Unique id for the HTML element",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"autocomplete"'},{name:"name",visibility:"public",description:"Name for the HTML element",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"mode",visibility:"public",description:'The mode can be either "default" or "search"',keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"default",text:'"default"'},{kind:"const",type:"string",value:"search",text:'"search"'}],text:'"default" | "search"'},static:!1,readonly:!1,defaultValue:'"default"'},{name:"clearable",visibility:"public",description:"Defines whether the selection can be cleared",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"autoClear",visibility:"public",description:'Clear value on selection (default for "search" mode)',keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"label",visibility:"public",description:"A label to describe the element (expected for accessibility)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"hideLabel",visibility:"public",description:"Visually hide the label",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"placeholder",visibility:"public",description:"An optional placeholder text",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"value",visibility:"public",description:"A prop to bind to for the selected value",keywords:[],kind:"let",static:!1,readonly:!1,defaultValue:"null"},{name:"options",visibility:"public",description:"An array of options, formatted {id, label}",keywords:[],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1,defaultValue:"[]"},{name:"labelKey",visibility:"public",description:"The attribute of an option that defines its label/name",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"label"'},{name:"groupKey",visibility:"public",description:"The attribute of an option that defines its group (optional)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"renderFallback",visibility:"public",description:"When using SSR or pre-rendering, this option will render a text input or dropdown before the page is hydrated (allows for progressive enhancement).",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"minLength",visibility:"public",description:"Optional: Minimum query length to return results",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"..."},{name:"loadOptions",visibility:"public",description:"Optional: Override function for loading/filtering options based on the entered text",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1,defaultValue:"function"},{name:"scriptUrl",visibility:"public",description:"Optional: Override the default CDN URL for the accessible-autocomplete script",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"https://cdn.ons.gov.uk/vendor/accessible-autocomplete/3.0.1/accessible-autocomplete.min.js"'},{name:"clearInput",visibility:"public",description:"Call this function externally to clear the input",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1,defaultValue:"function"},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"}],name:"Select.svelte"};export{Fe as S};
