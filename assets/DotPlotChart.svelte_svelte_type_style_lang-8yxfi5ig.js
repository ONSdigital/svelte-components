var ya=Object.defineProperty;var wr=e=>{throw TypeError(e)};var ma=(e,t,n)=>t in e?ya(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var kr=(e,t,n)=>ma(e,typeof t!="symbol"?t+"":t,n),qn=(e,t,n)=>t.has(e)||wr("Cannot "+n);var At=(e,t,n)=>(qn(e,t,"read from private field"),n?n.call(e):t.get(e)),be=(e,t,n)=>t.has(e)?wr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),jn=(e,t,n,r)=>(qn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),pr=(e,t,n)=>(qn(e,t,"access private method"),n);import{d as xa,i as $n,e as Or,a as Br,g as Lr,h as Ie,l as Fn,r as _a}from"./linear-CZTuTj73.js";import{A as va,x as ba,p as Ht,a as s,$ as wa,ao as S,g as d,aP as G,l as h,b as ze,c as Jn,f as Ke,i as mt,e as P,h as It,X as Ae,m as Nt,s as Ft,d as f,ak as ht,a1 as z,aj as ka,W as l,j as _t,n as H,t as rt,T as tn,U as vt,k as xt,q as Wt,o as Et,an as pa,u as Sr,V as Sa}from"./iframe-BT89WHcf.js";import{i as se}from"./create-runtime-stories-Bd4Sgtpw.js";import{s as jt}from"./slot-BP_Qo1ZM.js";import{s as oe}from"./style-CcY6orqc.js";import{b as In}from"./this-COxTWlh9.js";import{s as R}from"./attributes-BZRH9-xu.js";import{e as pe,i as Se}from"./each-TiEKLRVu.js";import{s as De}from"./class-Dzh9Da8g.js";import{a as Da}from"./actions-BGWhd9jp.js";import{h as Ra}from"./svelte-head-CE3TM5QF.js";const za=()=>performance.now(),kt={tick:e=>requestAnimationFrame(e),now:()=>za(),tasks:new Set};function qr(){const e=kt.now();kt.tasks.forEach(t=>{t.c(e)||(kt.tasks.delete(t),t.f())}),kt.tasks.size!==0&&kt.tick(qr)}function Aa(e){let t;return kt.tasks.size===0&&kt.tick(qr),{promise:new Promise(n=>{kt.tasks.add(t={c:e,f:n})}),abort(){kt.tasks.delete(t)}}}var Ct,ie,Re,Xe,jr;const Ze=class Ze{constructor(t){be(this,Xe);be(this,Ct,new WeakMap);be(this,ie);be(this,Re);jn(this,Re,t)}observe(t,n){var r=At(this,Ct).get(t)||new Set;return r.add(n),At(this,Ct).set(t,r),pr(this,Xe,jr).call(this).observe(t,At(this,Re)),()=>{var a=At(this,Ct).get(t);a.delete(n),a.size===0&&(At(this,Ct).delete(t),At(this,ie).unobserve(t))}}};Ct=new WeakMap,ie=new WeakMap,Re=new WeakMap,Xe=new WeakSet,jr=function(){return At(this,ie)??jn(this,ie,new ResizeObserver(t=>{for(var n of t){Ze.entries.set(n.target,n);for(var r of At(this,Ct).get(n.target)||[])r(n)}}))},kr(Ze,"entries",new WeakMap);let Vn=Ze;var Ta=new Vn({box:"border-box"});function Dr(e,t,n){var r=Ta.observe(e,()=>n(e[t]));va(()=>(ba(()=>n(e[t])),r))}function Ma(e){return e===0?!0:e}function Mt(e){return Ma(e)?Array.isArray(e)?t=>e.map(n=>typeof n!="function"?t[n]:n(t)):typeof e!="function"?t=>t[e]:e:null}function Wn(e,t={}){return Object.fromEntries(Object.entries(e).filter(([n,r])=>r!==void 0&&t[n]===void 0))}function Ea(e,t=300){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}}class Rr extends Map{constructor(t,n=Hr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(Yn(this,t))}has(t){return super.has(Yn(this,t))}set(t,n){return super.set(Fr(this,t),n)}delete(t){return super.delete(Wr(this,t))}}class Ca extends Set{constructor(t,n=Hr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Yn(this,t))}add(t){return super.add(Fr(this,t))}delete(t){return super.delete(Wr(this,t))}}function Yn({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Fr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Wr({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Hr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Na(e,t,n={}){if(!Array.isArray(e))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof e}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const r={},a=Object.keys(t),i=a.length;let o,c,u,y,v,b,g;const x=e.length;for(o=0;o<i;o+=1){for(g=new Ca,y=a[o],v=t[y],c=0;c<x;c+=1)if(b=v(e[c]),Array.isArray(b)){const A=b.length;for(u=0;u<A;u+=1)g.add(b[u])}else g.add(b);const m=Array.from(g);(n.sort===!0||n[y]===!0)&&m.sort(xa),r[y]=m}return r}function Pa(e,t){if(!Array.isArray(e))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof e}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const n={},r=Object.keys(t),a=r.length;let i,o,c,u,y,v,b,g;const x=e.length;for(i=0;i<a;i+=1){for(u=r[i],b=t[u],y=null,v=null,o=0;o<x;o+=1)if(g=b(e[o],o),Array.isArray(g)){const m=g.length;for(c=0;c<m;c+=1)g[c]!==!1&&g[c]!==void 0&&g[c]!==null&&Number.isNaN(g[c])===!1&&((y===null||g[c]<y)&&(y=g[c]),(v===null||g[c]>v)&&(v=g[c]))}else g!==!1&&g!==void 0&&g!==null&&Number.isNaN(g)===!1&&((y===null||g<y)&&(y=g),(v===null||g>v)&&(v=g));n[u]=[y,v]}return n}function we(e,t){return e.length!==t.length?!1:e.every(n=>t.includes(n))}function Ir(e){return!!(typeof e.bandwidth=="function"||we(Object.keys(e),["domain","range","unknown","copy"]))}function Ga(e,t,n){const r=Object.entries(n).reduce((i,[o,c])=>{const u=Ir(c.scale)===!0?"ordinal":"other";return i[u]||(i[u]={}),i[u][o]=t[o],i},{ordinal:!1,other:!1});let a={};if(r.ordinal){const i=Object.fromEntries(Object.entries(n).map(([o,c])=>[o,c.sort]));a=Na(e,r.ordinal,i)}return r.other&&(a={...a,...Pa(e,r.other)}),a}function Oa(e=[],t){return Array.isArray(t)===!0?t.map((n,r)=>n===null?e[r]:n):e}function Ve(e){return function([n,r]){return typeof r=="function"&&(r=r(n[e])),n?Oa(n[e],r):r}}const zr=Symbol("implicit");function Ba(){var e=new Rr,t=[],n=[],r=zr;function a(i){let o=e.get(i);if(o===void 0){if(r!==zr)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Rr;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Ba(t,n).unknown(r)},$n.apply(a,arguments),a}function Ar(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Tr(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function La(e){var t=1,n=e(Ar(t),Tr(t));return n.constant=function(r){return arguments.length?e(Ar(t=+r),Tr(t)):t},Lr(n)}function qa(){var e=La(Or());return e.copy=function(){return Br(e,qa()).constant(e.constant())},$n.apply(e,arguments)}function Mr(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ja(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Fa(e){return e<0?-e*e:e*e}function Wa(e){var t=e(Ie,Ie),n=1;function r(){return n===1?e(Ie,Ie):n===.5?e(ja,Fa):e(Mr(n),Mr(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Lr(t)}function Vr(){var e=Wa(Or());return e.copy=function(){return Br(e,Vr()).exponent(e.exponent())},$n.apply(e,arguments),e}function Ha(){return Vr.apply(null,arguments).exponent(.5)}const ke={x:Fn,y:Fn,z:Fn,r:Ha};function Ia(e){return e.constant?"symlog":e.base?"log":e.exponent?e.exponent()===.5?"sqrt":"pow":"other"}function Er(e){return e}function Va(e){return t=>Math.log(e*t)}function Ya(e){return t=>e*Math.exp(t)}function Ua(e){return t=>Math.sign(t)*Math.log1p(Math.abs(t/e))}function $a(e){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*e}function Ye(e){return function(n){return n<0?-Math.pow(-n,e):Math.pow(n,e)}}function Ja(e){const t=Ia(e);if(t==="log"){const n=Math.sign(e.domain()[0]);return{lift:Va(n),ground:Ya(n),scaleType:t}}return t==="pow"?{lift:Ye(1),ground:Ye(1/1),scaleType:t}:t==="sqrt"?{lift:Ye(.5),ground:Ye(1/.5),scaleType:t}:t==="symlog"?{lift:Ua(1),ground:$a(1),scaleType:t}:{lift:Er,ground:Er,scaleType:t}}function Qe(e){return e.replace(/^\w/,t=>t.toUpperCase())}function nt(e,t=""){return`scale${Qe(t)}${Qe(e)}`}function Yr(e){if(typeof e.bandwidth=="function")return typeof e.paddingInner=="function"?nt("band"):nt("point");if(we(Object.keys(e),["domain","range","unknown","copy"]))return nt("ordinal");let t="";if(e.interpolator&&(e.domain().length===3?t="diverging":t="sequential"),e.quantiles)return nt("quantile",t);if(e.thresholds)return nt("quantize",t);if(e.constant)return nt("symlog",t);if(e.base)return nt("log",t);if(e.exponent)return e.exponent()===.5?nt("sqrt",t):nt("pow",t);if(we(Object.keys(e),["domain","range","invertExtent","unknown","copy"]))return nt("threshold");if(we(Object.keys(e),["invert","range","domain","unknown","copy","ticks","tickFormat","nice"]))return nt("identity");if(we(Object.keys(e),["invert","domain","range","rangeRound","round","clamp","unknown","copy","ticks","tickFormat","nice"]))return nt("radial");if(t)return nt(t);if(e.domain()[0]instanceof Date){const n=new Date;let r;return n.getDay=()=>r="time",n.getUTCDay=()=>r="utc",e.tickFormat(0,"%a")(n),nt(r)}return nt("linear")}const Qa=["scaleThreshold","scaleQuantile","scaleQuantize","scaleSequentialQuantile"];function Xa(e,t){if(typeof e.range!="function")throw new Error("Scale method `range` must be a function");if(typeof e.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t)||Qa.includes(Yr(e))||Ir(e)===!0)return e.domain();const{lift:n,ground:r}=Ja(e),a=e.domain()[0],i=Object.prototype.toString.call(a)==="[object Date]",[o,c]=e.domain().map(x=>n(i?x.getTime():x)),[u,y]=e.range(),v=t[0]||0,b=t[1]||0,g=(c-o)/(Math.abs(y-u)-v-b);return[o-v*g,b*g+c].map(x=>r(i?new Date(x):x))}function Za(e,t,n,r,a){let i,o;return a===!0?(i=0,o=100):(i=e==="r"?1:0,o=e==="y"?n:e==="r"?25:t),r===!0?[o,i]:[i,o]}function Ka(e,t,n,r,a,i){return a?typeof a=="function"?a({width:t,height:n}):a:Za(e,t,n,r,i)}function Ue(e){return function([n,r,a,i,o,c,u,y,v,b]){if(r===null)return null;const g=Ka(e,u,y,c,v,b),x=n===ke[e]?n():n.copy();return x.domain(a),(!x.interpolator||typeof x.interpolator=="function"&&x.interpolator().name.startsWith("identity"))&&x.range(g),i&&x.domain(Xa(x,i)),(o===!0||typeof o=="number")&&(typeof x.nice=="function"?x.nice(typeof o=="number"?o:void 0):console.error(`[Layer Cake] You set \`${e}Nice: true\` but the ${e}Scale does not have a \`.nice\` method. Ignoring...`)),x}}function $e([e,t]){return(n,r)=>{const a=e(n,r);return Array.isArray(a)?a.map(i=>t(i)):t(a)}}function Je([e]){if(typeof e=="function"){if(typeof e.range=="function")return e.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const yt="    ";function ti(e){const{r:t,g:n,b:r,opacity:a}=_a(e);return[t,n,r].every(i=>i>=0&&i<=255)?{r:t,g:n,b:r,o:a}:!1}function ei({r:e,g:t,b:n}){return(.2126*e+.7152*t+.0722*n)/255>.6?"black":"white"}function ni(e){console.log("/********* LayerCake Debug ************/"),console.log("Bounding box:"),ri(e.boundingBox),console.log("Data:"),console.log(yt,e.data),e.flatData&&(console.log("flatData:"),console.log(yt,e.flatData)),console.log("Scales:"),Object.keys(e.activeGetters).forEach(t=>{ai(t,e[`${t}Scale`],e[t])}),console.log(`/************ End LayerCake Debug ***************/
`)}function ri(e){Object.entries(e).forEach(([t,n])=>{console.log(`${yt}${t}:`,n)})}function ai(e,t,n){const r=Yr(t);console.log(`${yt}${e}:`),console.log(`${yt}${yt}Accessor: "${n.toString()}"`),console.log(`${yt}${yt}Type: ${r}`),Cr(t,"domain"),Cr(t,"range"," ")}function Cr(e,t,n=""){const r=e[t](),a=oi(r);a?ii(a,t,r):console.log(`${yt}${yt}${Qe(t)}:${n}`,r)}function ii(e,t,n){console.log(`${yt}${yt}${Qe(t)}:    %cArray%c(${n.length}) `+e[0]+"%c ]","color: #1377e4","color: #737373","color: #1478e4",...e[1],"color: #1478e4")}function oi(e){const t=[],n=e.map((r,a)=>{const i=ti(r);if(i!==!1){t.push(i);const o=a===e.length-1?" ":"";return`%c ${r}${o}`}return r});return t.length?[`%c[ ${n.join(", ")}`,t.map(r=>`background-color: rgba(${r.r}, ${r.g}, ${r.b}, ${r.o}); color:${ei(r)};`)]:null}var si=_t('<div class="layercake-container svelte-vhzpsp"><!></div>');function $i(e,t){Ht(t,!1);const[n,r]=Ae(),a=()=>l(Bt,"$_percentRange",n),i=()=>l(ue,"$_containerWidth",n),o=()=>l(de,"$_containerHeight",n),c=()=>l(pn,"$_data",n),u=()=>l(Ee,"$_flatData",n),y=()=>l(fe,"$_x",n),v=()=>l(ge,"$_y",n),b=()=>l(he,"$_z",n),g=()=>l(ye,"$_r",n),x=()=>l(Ce,"$_xNice",n),m=()=>l(Ne,"$_yNice",n),A=()=>l(Pe,"$_zNice",n),q=()=>l(Ge,"$_rNice",n),D=()=>l(Oe,"$_xReverse",n),M=()=>l(Be,"$_yReverse",n),T=()=>l(Le,"$_zReverse",n),I=()=>l(qe,"$_rReverse",n),dt=()=>l(je,"$_xPadding",n),K=()=>l(Fe,"$_yPadding",n),ft=()=>l(We,"$_zPadding",n),$=()=>l(He,"$_rPadding",n),tt=()=>l(Nn,"$_custom",n),ot=()=>l(Cn,"$_config",n),st=()=>l(On,"$box_d",n),bt=()=>l(Pn,"$activeGetters_d",n),ct=()=>l(me,"$xScale_d",n),gt=()=>l(xe,"$yScale_d",n),lt=()=>l(_e,"$zScale_d",n),at=()=>l(ve,"$rScale_d",n),Tt=()=>l(Lt,"$width_d",n),Pt=()=>l(qt,"$height_d",n),pt=()=>l(vr,"$aspectRatio_d",n),X=()=>l(An,"$_xDomainSort",n),W=()=>l(Tn,"$_yDomainSort",n),St=()=>l(Mn,"$_zDomainSort",n),V=()=>l(En,"$_rDomainSort",n),N=()=>l(Gn,"$padding_d",n),w=()=>l(wt,"$extents_d",n),B=()=>l(sr,"$xDomain_d",n),it=()=>l(cr,"$yDomain_d",n),et=()=>l(lr,"$zDomain_d",n),Vt=()=>l(ur,"$rDomain_d",n),p=()=>l(yr,"$xRange_d",n),j=()=>l(mr,"$yRange_d",n),U=()=>l(xr,"$zRange_d",n),Q=()=>l(_r,"$rRange_d",n),E=()=>l(dr,"$xGet_d",n),_=()=>l(fr,"$yGet_d",n),J=()=>l(gr,"$zGet_d",n),F=()=>l(hr,"$rGet_d",n),k=Nt(),L=Nt(),Dt=Ea(ni,200);let Gt=s(t,"ssr",8,!1),Ot=s(t,"pointerEvents",8,!0),Rt=s(t,"position",8,"relative"),en=s(t,"percentRange",8,!1),$r=s(t,"width",8,void 0),Jr=s(t,"height",8,void 0),Te=s(t,"containerWidth",28,()=>$r()||100),Me=s(t,"containerHeight",28,()=>Jr()||100),nn=s(t,"element",12,void 0),Yt=s(t,"x",8,void 0),Ut=s(t,"y",8,void 0),$t=s(t,"z",8,void 0),Jt=s(t,"r",8,void 0),Qt=s(t,"data",24,()=>[]),Xt=s(t,"xDomain",8,void 0),Zt=s(t,"yDomain",8,void 0),Kt=s(t,"zDomain",8,void 0),te=s(t,"rDomain",8,void 0),rn=s(t,"xNice",8,!1),an=s(t,"yNice",8,!1),on=s(t,"zNice",8,!1),sn=s(t,"rNice",8,!1),cn=s(t,"xPadding",8,void 0),ln=s(t,"yPadding",8,void 0),un=s(t,"zPadding",8,void 0),dn=s(t,"rPadding",8,void 0),fn=s(t,"xScale",24,()=>ke.x),ce=s(t,"yScale",24,()=>ke.y),gn=s(t,"zScale",24,()=>ke.z),hn=s(t,"rScale",24,()=>ke.r),ee=s(t,"xRange",8,void 0),ne=s(t,"yRange",8,void 0),re=s(t,"zRange",8,void 0),ae=s(t,"rRange",8,void 0),yn=s(t,"xReverse",8,!1),mn=s(t,"yReverse",8,void 0),xn=s(t,"zReverse",8,!1),_n=s(t,"rReverse",8,!1),Qr=s(t,"xDomainSort",8,!0),Xr=s(t,"yDomainSort",8,!0),Zr=s(t,"zDomainSort",8,!0),Kr=s(t,"rDomainSort",8,!0),vn=s(t,"padding",24,()=>({})),bn=s(t,"extents",24,()=>({})),le=s(t,"flatData",8,void 0),wn=s(t,"custom",24,()=>({})),Qn=s(t,"debug",8,!1),ta=s(t,"verbose",8,!0),kn=!1;wa(()=>{kn=!0});const C=Nt({}),Bt=S(en()),ue=S(Te()),de=S(Me()),Xn=S(Wn(bn())),pn=S(Qt()),Ee=S(le()||Qt()),Zn=S(vn()),fe=S(Mt(Yt())),ge=S(Mt(Ut())),he=S(Mt($t())),ye=S(Mt(Jt())),Kn=S(Xt()),tr=S(Zt()),er=S(Kt()),nr=S(te()),Ce=S(rn()),Ne=S(an()),Pe=S(on()),Ge=S(sn()),Oe=S(yn()),Be=S(d(k)),Le=S(xn()),qe=S(_n()),je=S(cn()),Fe=S(ln()),We=S(un()),He=S(dn()),rr=S(ee()),ar=S(ne()),ir=S(re()),or=S(ae()),Sn=S(fn()),Dn=S(ce()),Rn=S(gn()),zn=S(hn()),An=S(Qr()),Tn=S(Xr()),Mn=S(Zr()),En=S(Kr()),Cn=S(d(C)),Nn=S(wn()),Pn=G([fe,ge,he,ye],([O,Z,ut,Y])=>{const zt={};return O&&(zt.x=O),Z&&(zt.y=Z),ut&&(zt.z=ut),Y&&(zt.r=Y),zt}),Gn=G([Zn,ue,de],([O])=>Object.assign({top:0,right:0,bottom:0,left:0},O)),On=G([ue,de,Gn],([O,Z,ut])=>{const Y={};return Y.top=ut.top,Y.right=O-ut.right,Y.bottom=Z-ut.bottom,Y.left=ut.left,Y.width=Y.right-Y.left,Y.height=Y.bottom-Y.top,ta()===!0&&(Y.width<=0&&kn===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Y.height<=0&&kn===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?")),Y}),Lt=G([On],([O])=>O.width),qt=G([On],([O])=>O.height),wt=G([Ee,Pn,Xn,Sn,Dn,zn,Rn,An,Tn,Mn,En],([O,Z,ut,Y,zt,sa,ca,la,ua,da,fa])=>{const ga={x:{scale:Y,sort:la},y:{scale:zt,sort:ua},r:{scale:sa,sort:fa},z:{scale:ca,sort:da}},Bn=Wn(Z,ut),ha=Object.fromEntries(Object.keys(Bn).map(Ln=>[Ln,ga[Ln]]));return Object.keys(Bn).length>0?{...Ga(O,Bn,ha),...ut}:{}}),sr=G([wt,Kn],Ve("x")),cr=G([wt,tr],Ve("y")),lr=G([wt,er],Ve("z")),ur=G([wt,nr],Ve("r")),me=G([Sn,wt,sr,je,Ce,Oe,Lt,qt,rr,Bt],Ue("x")),dr=G([fe,me],$e),xe=G([Dn,wt,cr,Fe,Ne,Be,Lt,qt,ar,Bt],Ue("y")),fr=G([ge,xe],$e),_e=G([Rn,wt,lr,We,Pe,Le,Lt,qt,ir,Bt],Ue("z")),gr=G([he,_e],$e),ve=G([zn,wt,ur,He,Ge,qe,Lt,qt,or,Bt],Ue("r")),hr=G([ye,ve],$e),ea=G(me,O=>O.domain()),na=G(xe,O=>O.domain()),ra=G(_e,O=>O.domain()),aa=G(ve,O=>O.domain()),yr=G([me],Je),mr=G([xe],Je),xr=G([_e],Je),_r=G([ve],Je),vr=G([Lt,qt],([O,Z])=>O/Z);h(()=>(f(mn()),f(ce())),()=>{Ft(k,typeof mn()>"u"?typeof ce().bandwidth!="function":mn())}),h(()=>f(Yt()),()=>{Yt()&&ht(C,d(C).x=Yt())}),h(()=>f(Ut()),()=>{Ut()&&ht(C,d(C).y=Ut())}),h(()=>f($t()),()=>{$t()&&ht(C,d(C).z=$t())}),h(()=>f(Jt()),()=>{Jt()&&ht(C,d(C).r=Jt())}),h(()=>f(Xt()),()=>{Xt()&&ht(C,d(C).xDomain=Xt())}),h(()=>f(Zt()),()=>{Zt()&&ht(C,d(C).yDomain=Zt())}),h(()=>f(Kt()),()=>{Kt()&&ht(C,d(C).zDomain=Kt())}),h(()=>f(te()),()=>{te()&&ht(C,d(C).rDomain=te())}),h(()=>f(ee()),()=>{ee()&&ht(C,d(C).xRange=ee())}),h(()=>f(ne()),()=>{ne()&&ht(C,d(C).yRange=ne())}),h(()=>f(re()),()=>{re()&&ht(C,d(C).zRange=re())}),h(()=>f(ae()),()=>{ae()&&ht(C,d(C).rRange=ae())}),h(()=>f(en()),()=>{z(Bt,en())}),h(()=>f(Te()),()=>{z(ue,Te())}),h(()=>f(Me()),()=>{z(de,Me())}),h(()=>f(bn()),()=>{z(Xn,Wn(bn()))}),h(()=>f(Qt()),()=>{z(pn,Qt())}),h(()=>(f(le()),f(Qt())),()=>{z(Ee,le()||Qt())}),h(()=>f(vn()),()=>{z(Zn,vn())}),h(()=>f(Yt()),()=>{z(fe,Mt(Yt()))}),h(()=>f(Ut()),()=>{z(ge,Mt(Ut()))}),h(()=>f($t()),()=>{z(he,Mt($t()))}),h(()=>f(Jt()),()=>{z(ye,Mt(Jt()))}),h(()=>f(Xt()),()=>{z(Kn,Xt())}),h(()=>f(Zt()),()=>{z(tr,Zt())}),h(()=>f(Kt()),()=>{z(er,Kt())}),h(()=>f(te()),()=>{z(nr,te())}),h(()=>f(rn()),()=>{z(Ce,rn())}),h(()=>f(an()),()=>{z(Ne,an())}),h(()=>f(on()),()=>{z(Pe,on())}),h(()=>f(sn()),()=>{z(Ge,sn())}),h(()=>f(yn()),()=>{z(Oe,yn())}),h(()=>d(k),()=>{z(Be,d(k))}),h(()=>f(xn()),()=>{z(Le,xn())}),h(()=>f(_n()),()=>{z(qe,_n())}),h(()=>f(cn()),()=>{z(je,cn())}),h(()=>f(ln()),()=>{z(Fe,ln())}),h(()=>f(un()),()=>{z(We,un())}),h(()=>f(dn()),()=>{z(He,dn())}),h(()=>f(ee()),()=>{z(rr,ee())}),h(()=>f(ne()),()=>{z(ar,ne())}),h(()=>f(re()),()=>{z(ir,re())}),h(()=>f(ae()),()=>{z(or,ae())}),h(()=>f(fn()),()=>{z(Sn,fn())}),h(()=>f(ce()),()=>{z(Dn,ce())}),h(()=>f(gn()),()=>{z(Rn,gn())}),h(()=>f(hn()),()=>{z(zn,hn())}),h(()=>f(wn()),()=>{z(Nn,wn())}),h(()=>d(C),()=>{z(Cn,d(C))}),h(()=>{},()=>{Ft(L,{activeGetters:Pn,width:Lt,height:qt,percentRange:Bt,aspectRatio:vr,containerWidth:ue,containerHeight:de,x:fe,y:ge,z:he,r:ye,custom:Nn,data:pn,xNice:Ce,yNice:Ne,zNice:Pe,rNice:Ge,xDomainSort:An,yDomainSort:Tn,zDomainSort:Mn,rDomainSort:En,xReverse:Oe,yReverse:Be,zReverse:Le,rReverse:qe,xPadding:je,yPadding:Fe,zPadding:We,rPadding:He,padding:Gn,flatData:Ee,extents:wt,xDomain:ea,yDomain:na,zDomain:ra,rDomain:aa,xRange:yr,yRange:mr,zRange:xr,rRange:_r,config:Cn,xScale:me,xGet:dr,yScale:xe,yGet:fr,zScale:_e,zGet:gr,rScale:ve,rGet:hr})}),h(()=>d(L),()=>{ka("LayerCake",d(L))}),h(()=>(st(),f(Qn()),f(Gt()),c(),f(le()),u(),bt(),d(C),ct(),gt(),lt(),at()),()=>{st()&&Qn()===!0&&(Gt()===!0||typeof window<"u")&&Dt({data:c(),flatData:typeof le()<"u"?u():null,boundingBox:st(),activeGetters:bt(),x:d(C).x,y:d(C).y,z:d(C).z,r:d(C).r,xScale:ct(),yScale:gt(),zScale:lt(),rScale:at()})}),ze(),se();var br=Jn(),ia=Ke(br);{var oa=O=>{var Z=si();let ut;var Y=H(Z);jt(Y,t,"default",{get element(){return nn()},get width(){return Tt()},get height(){return Pt()},get aspectRatio(){return pt()},get containerWidth(){return i()},get containerHeight(){return o()},get activeGetters(){return bt()},get percentRange(){return a()},get x(){return y()},get y(){return v()},get z(){return b()},get r(){return g()},get custom(){return tt()},get data(){return c()},get xNice(){return x()},get yNice(){return m()},get zNice(){return A()},get rNice(){return q()},get xDomainSort(){return X()},get yDomainSort(){return W()},get zDomainSort(){return St()},get rDomainSort(){return V()},get xReverse(){return D()},get yReverse(){return M()},get zReverse(){return T()},get rReverse(){return I()},get xPadding(){return dt()},get yPadding(){return K()},get zPadding(){return ft()},get rPadding(){return $()},get padding(){return N()},get flatData(){return u()},get extents(){return w()},get xDomain(){return B()},get yDomain(){return it()},get zDomain(){return et()},get rDomain(){return Vt()},get xRange(){return p()},get yRange(){return j()},get zRange(){return U()},get rRange(){return Q()},get config(){return ot()},get xScale(){return ct()},get xGet(){return E()},get yScale(){return gt()},get yGet(){return _()},get zScale(){return lt()},get zGet(){return J()},get rScale(){return at()},get rGet(){return F()}},null),In(Z,zt=>nn(zt),()=>nn()),rt(()=>ut=oe(Z,"",ut,{position:Rt(),top:Rt()==="absolute"?"0":null,right:Rt()==="absolute"?"0":null,bottom:Rt()==="absolute"?"0":null,left:Rt()==="absolute"?"0":null,"pointer-events":Ot()===!1?"none":null})),Dr(Z,"clientWidth",Te),Dr(Z,"clientHeight",Me),P(O,Z)};mt(ia,O=>{(Gt()===!0||typeof window<"u")&&O(oa)})}P(e,br),It(),r()}var ci=vt("<title> </title>"),li=vt('<svg class="layercake-layout-svg svelte-u84d8d"><!><defs><!></defs><g class="layercake-layout-svg_g"><!></g></svg>');function Ji(e,t){Ht(t,!1);const[n,r]=Ae(),a=()=>l(q,"$containerWidth",n),i=()=>l(D,"$containerHeight",n),o=()=>l(M,"$padding",n);let c=s(t,"element",12,void 0),u=s(t,"innerElement",12,void 0),y=s(t,"zIndex",8,void 0),v=s(t,"pointerEvents",8,void 0),b=s(t,"viewBox",8,void 0),g=s(t,"label",8,void 0),x=s(t,"labelledBy",8,void 0),m=s(t,"describedBy",8,void 0),A=s(t,"title",8,void 0);const{containerWidth:q,containerHeight:D,padding:M}=tn("LayerCake");se();var T=li();let I;var dt=H(T);jt(dt,t,"title",{},ot=>{var st=Jn(),bt=Ke(st);{var ct=gt=>{var lt=ci(),at=H(lt);rt(()=>Wt(at,A())),P(gt,lt)};mt(bt,gt=>{A()&&gt(ct)})}P(ot,st)});var K=xt(dt),ft=H(K);jt(ft,t,"defs",{},null);var $=xt(K),tt=H($);jt(tt,t,"default",{get element(){return c()}},null),In($,ot=>u(ot),()=>u()),In(T,ot=>c(ot),()=>c()),rt(()=>{R(T,"viewBox",b()),R(T,"width",a()),R(T,"height",i()),R(T,"aria-label",g()),R(T,"aria-labelledby",x()),R(T,"aria-describedby",m()),I=oe(T,"",I,{"z-index":y(),"pointer-events":v()===!1?"none":null}),R($,"transform",`translate(${o().left??""}, ${o().top??""})`)}),P(e,T),It(),r()}function Nr(e){return Object.prototype.toString.call(e)==="[object Date]"}function ui(e){return e}function Qi(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function Un(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((a,i)=>Un(e[i],a));return a=>r.map(i=>i(a))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Nr(e)&&Nr(t)){const i=e.getTime(),c=t.getTime()-i;return u=>new Date(i+u*c)}const r=Object.keys(t),a={};return r.forEach(i=>{a[i]=Un(e[i],t[i])}),i=>{const o={};return r.forEach(c=>{o[c]=a[c](i)}),o}}if(n==="number"){const r=t-e;return a=>e+a*r}return()=>t}function Xi(e,t={}){const n=S(e);let r,a=e;function i(o,c){if(a=o,e==null)return n.set(e=o),Promise.resolve();let u=r,y=!1,{delay:v=0,duration:b=400,easing:g=ui,interpolate:x=Un}={...t,...c};if(b===0)return u&&(u.abort(),u=null),n.set(e=a),Promise.resolve();const m=kt.now()+v;let A;return r=Aa(q=>{if(q<m)return!0;y||(A=x(e,o),typeof b=="function"&&(b=b(e,o)),y=!0),u&&(u.abort(),u=null);const D=q-m;return D>b?(n.set(e=o),!1):(n.set(e=A(g(D/b))),!0)}),r.promise}return{set:i,update:(o,c)=>i(o(a,e),c),subscribe:n.subscribe}}function Zi(e,t,n){let r=[];return n?t.forEach(a=>{r.push(e.filter(i=>i[n]==a))}):r=[e],r}function Ki(e,t,n,r){let a=[],i=JSON.parse(JSON.stringify(e.filter(o=>o[r]==t[0])));return i.forEach(o=>o[n]=0),t.forEach(o=>{let c=JSON.parse(JSON.stringify(e.filter(u=>u[r]==o)));c.forEach((u,y)=>{u[n]+=i[y][n],i[y][n]=u[n]}),a.push(c)}),a}function di(e,t=[],n){let r="",a=[];t.forEach(o=>{o&&!a.includes(o)&&a.push(o)}),r+=a.join(",")+`
`,e.forEach(o=>{r+=a.map(c=>o[c]).join(",")+`
`});let i="data:text/csv;charset=utf-8,"+encodeURI(r);Ur(i,n+".csv")}function fi(e,t,n){try{n(e).then(r=>{let a=r.toDataURL();Ur(a,t+".png")})}catch(r){console.log(r)}}function Ur(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}function to(e){const t=String(e).split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}const Pr=1,Gr=5,gi=2;class hi{constructor(t,n,r,a,i){this.items=t,this.radiusFun=n,this.xFun=r,this.padding=a,this.yOffset=i,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,Pr),this.maxR=Math.max(...t.map(o=>n(o))),this.rng=this._sfc32(1,2,3,Pr)}calculateYPositions(){let t=this.items.map((a,i)=>({datum:a,originalIndex:i,x:this.xFun(a),r:this.radiusFun(a)+this.padding,y:null,placed:!1})).sort((a,i)=>a.x-i.x);t.forEach(function(a,i){a.index=i});let n=this.tieBreakFn;t.forEach(function(a){a.tieBreaker=n(a.x)});let r=[...t].sort((a,i)=>{let o=this.radiusFun(a.datum)+a.tieBreaker*Gr,c=this.radiusFun(i.datum)+i.tieBreaker*Gr;return o!=c?c-o:a.x-i.x});for(let a of r)a.placed=!0,a.y=this._getBestYPosition(a,t);return t.sort((a,i)=>a.originalIndex-i.originalIndex),t.map(a=>({x:a.x,y:a.y+this.yOffset,r:this.radiusFun(a.datum)}))}_sfc32(t,n,r,a){let i=function(){t>>>=0,n>>>=0,r>>>=0,a>>>=0;var o=t+n|0;return t=n^n>>>9,n=r+(r<<3)|0,r=r<<21|r>>>11,a=a+1|0,o=o+a|0,r=r+o|0,(o>>>0)/4294967296};for(let o=0;o<10;o++)i();return i}_getBestYPosition(t,n){let r=[];for(let i of[-1,1]){let o,c=t.r;for(let u=t.index+i;u>=0&&u<n.length&&(o=Math.abs(t.x-n[u].x))<c+this.maxR;u+=i){let y=n[u];if(!y.placed)continue;let v=c+y.r;if(o>=c+y.r)continue;let b=Math.sqrt(v*v-o*o),g=[y.y-b,y.y+b];r.push(g)}}if(r.length==0)return t.r*(this.rng()-.5)*gi;let a=r.flat();a.push(0),a.sort((i,o)=>{let c=Math.abs(i),u=Math.abs(o);return c<u?-1:c>u?1:i-o});for(let i=0;i<a.length;i++){let o=a[i];if(r.every(c=>o<=c[0]||o>=c[1]))return o}}}function eo(e,t){Ht(t,!1);const[n,r]=Ae(),a=()=>l(at,"$custom",n),i=()=>l(Tt,"$width",n),o=()=>l(T,"$data",n),c=()=>l(I,"$x",n),u=()=>l(dt,"$y",n),y=()=>l(K,"$r",n),v=()=>l(Pt,"$height",n),b=()=>l($,"$yGet",n),g=()=>l(st,"$yScale",n),x=()=>l(ot,"$xScale",n),m=()=>l(ft,"$xGet",n),A=()=>l(tt,"$rGet",n),q=()=>l(ct,"$rRange",n),D=()=>l(bt,"$yRange",n),M=()=>l(lt,"$yDomain",n),{data:T,x:I,y:dt,r:K,xGet:ft,yGet:$,rGet:tt,xScale:ot,yScale:st,yRange:bt,rRange:ct,xDomain:gt,yDomain:lt,custom:at,width:Tt,height:Pt}=tn("LayerCake");let pt=a().coords,X=a().type,W=i();function St(V,N,w,B,it,et,Vt){let p=N.mode,j=N.padding,U=N.animation&&et==W?N.duration:0;W=et;let Q;if(X=="bar"){let E=[],_=[];Q=V.map((J,F)=>J.map((k,L)=>{E[L]||(E[L]=0),_[L]||(_[L]=0);let Dt=p=="default"||p=="grouped"||p=="comparison"&&F==0?0:p=="stacked"&&w(k)>=0?E[L]:p=="stacked"?_[L]:w(k),Gt=p=="default"||p=="grouped"||p=="comparison"&&F==0?w(k):p=="stacked"&&w(k)>=0?E[L]+w(k):p=="stacked"?_[L]+w(k):w(k);w(k)>=0?E[L]+=w(k):_[L]+=w(k);let Ot=p=="grouped"?b()(k)+F*(g().bandwidth()/V.length):b()(k),Rt=p=="grouped"?Ot+g().bandwidth()/V.length:Ot+g().bandwidth();return{x0:Dt,x1:Gt,y0:Ot,y1:Rt}}))}else if(X=="column"){let E=[],_=[];Q=V.map((J,F)=>J.map((k,L)=>{E[L]||(E[L]=0),_[L]||(_[L]=0);let Dt=p=="grouped"&&x().bandwidth?m()(k)+F*(1/V.length)*x().bandwidth():p=="grouped"?m()(k)[0]+F*(1/V.length)*Math.max(0,m()(k)[1]-m()(k)[0]):x().bandwidth?m()(k):m()(k)[0],Gt=p=="grouped"&&x().bandwidth?Dt+x().bandwidth()/V.length:p=="grouped"?Dt+Math.max(0,m()(k)[1]-m()(k)[0])/V.length:x().bandwidth?Dt+x().bandwidth():Dt+Math.max(0,m()(k)[1]-m()(k)[0]),Ot=p=="default"||p=="grouped"||p=="comparison"&&F==0?0:p=="stacked"&&B(k)>=0?E[L]:p=="stacked"?_[L]:B(k),Rt=p=="default"||p=="grouped"||p=="comparison"&&F==0?B(k):p=="stacked"&&B(k)>=0?E[L]+B(k):p=="stacked"?_[L]+B(k):B(k);return B(k)>=0?E[L]+=B(k):_[L]+=B(k),{x0:Dt,x1:Gt,y0:Ot,y1:Rt}}))}else if(X=="scatter"){let E=_=>it?A()(_):q()[0];if(Q=B?V.map(_=>({x:w(_),y:B(_),r:E(_)})):new hi(V,_=>E(_),_=>m()(_),j,D()[0]/2).calculateYPositions().map(_=>({x:x().invert(_.x),y:g().invert(_.y),r:_.r})),!B&&N.yFitBeeswarm){const _=Math.max(...Q.map(F=>Math.abs(F.y))),J=_&&_>M()[1]?M()[1]/_:null;J&&(Q=Q.map(F=>({x:F.x,y:F.y*J,r:F.r})))}}else Q=V.map(E=>E.map(_=>({x:w(_),y:B(_)})));pt.set(Q,{duration:U})}h(()=>(o(),a(),c(),u(),y(),i(),v()),()=>{St(o(),a(),c(),u(),y(),i(),v())}),ze(),se(),It(),r()}var yi=vt('<line y2="0" x1="0" x2="0"></line>'),mi=vt('<line class="tick-mark svelte-awuugw"></line>'),xi=vt('<g><!><!><text class="svelte-awuugw"> </text></g>'),_i=vt('<text text-anchor="end" class="axisLabel svelte-awuugw"> </text>'),vi=vt("<g><!><!></g>");function no(e,t){Ht(t,!1);const[n,r]=Ae(),a=()=>l(g,"$xScale",n),i=()=>l(x,"$xDomain",n),o=()=>l(m,"$yRange",n),c=()=>l(b,"$height",n),u=()=>l(A,"$width",n),y=Nt(),v=Nt(),{height:b,xScale:g,xDomain:x,yRange:m,width:A}=tn("LayerCake");let q=s(t,"gridlines",8,!0),D=s(t,"tickDashed",8,!1),M=s(t,"tickMarks",8,!1),T=s(t,"tickColor",8,"#d9d9d9"),I=s(t,"zeroColor",8,"#B3B3B3"),dt=s(t,"textColor",8,"#707071"),K=s(t,"formatTick",8,N=>N),ft=s(t,"snapTicks",8,!1),$=s(t,"ticks",8,void 0),tt=s(t,"xTick",8,void 0),ot=s(t,"yTick",8,16),st=s(t,"forceTicks",8,!1),bt=s(t,"dxTick",8,0),ct=s(t,"dyTick",24,()=>M()?8:0),gt=s(t,"prefix",8,""),lt=s(t,"suffix",8,""),at=s(t,"xAxisLabel",8,"x axis label");function Tt(N,w){if(typeof w[0]=="number"&&w.length>1&&w.length<N.length&&w[w.length-1]<N[N.length-1]){const B=N[N.length-1]-w[w.length-1];return w.map(it=>it+B)}return w}function Pt(N){if(ft()===!0){if(N===i()[0])return"start";if(N===i()[1])return"end"}return"middle"}h(()=>a(),()=>{Ft(y,typeof a().bandwidth=="function")}),h(()=>(f($()),d(y),a(),f(st())),()=>{Ft(v,Array.isArray($())?$():d(y)?a().domain():typeof $()=="function"?$()(a().ticks()):typeof $()=="number"&&st()?Tt(a().ticks(),a().ticks($())):a().ticks($()))}),ze(),se();var pt=vi();let X;var W=H(pt);pe(W,1,()=>d(v),Se,(N,w,B)=>{var it=xi(),et=H(it);{var Vt=E=>{var _=yi();let J,F;rt(k=>{J=De(_,0,"gridline svelte-awuugw",null,J,k),R(_,"y1",c()*-1),F=oe(_,"",F,{stroke:d(w)===0?I():T(),"stroke-width":d(w)===0?1.5:1,filter:d(w)!==0?"contrast(calc(1/3)) brightness(1.5)":null})},[()=>({dashed:D()})],Et),P(E,_)};mt(et,E=>{q()!==!1&&E(Vt)})}var p=xt(et);{var j=E=>{var _=mi();R(_,"y1",0);let J;rt((F,k)=>{R(_,"y2",ct()),R(_,"x1",F),R(_,"x2",k),J=oe(_,"",J,{stroke:d(w)===0?I():T(),"stroke-width":d(w)===0?1.5:1,filter:d(w)!==0?"contrast(calc(1/3)) brightness(1.5)":null})},[()=>tt()||d(y)?a().bandwidth()/2:0,()=>tt()||d(y)?a().bandwidth()/2:0],Et),P(E,_)};mt(p,E=>{M()===!0&&E(j)})}var U=xt(p),Q=H(U);rt((E,_,J,F,k)=>{De(it,0,`tick tick-${d(w)??""}`,"svelte-awuugw"),R(it,"transform",`translate(${E??""},${_??""})`),R(U,"x",J),R(U,"y",ot()),R(U,"dx",bt()),R(U,"dy",ct()),R(U,"text-anchor",F),R(U,"fill",dt()),Wt(Q,k)},[()=>a()(d(w)),()=>Math.max(...o()),()=>tt()||d(y)?a().bandwidth()/2:0,()=>Pt(d(w)),()=>B==d(v).length-1?gt()+K()(d(w))+lt():K()(d(w))],Et),P(N,it)});var St=xt(W);{var V=N=>{var w=_i(),B=H(w);rt(it=>{R(w,"x",u()),R(w,"y",it),R(w,"dy",ct()),Wt(B,at())},[()=>Math.max(...o())+35],Et),P(N,w)};mt(St,N=>{at()&&N(V)})}rt(N=>X=De(pt,0,"axis x-axis svelte-awuugw",null,X,N),[()=>({snapTicks:ft()})],Et),P(e,pt),It(),r()}function Hn(e,t={}){if(!t.disable){const n=(D,M)=>typeof D=="number"?D:M,r=n(t.width,100),a=n(t.dyAdjust,.05),i=n(t.lineHeightEms,1),o=n(t.lineHeightSquishFactor,1);t.splitOnHyphen,t.centreVertically,+e.getAttribute("x"),+e.getAttribute("y");const c=e.getAttribute("text-anchor"),u=(D,M,T=null)=>{const I=document.createElementNS("http://www.w3.org/2000/svg",M);return T&&(I.textContent=T),D.append(I),I},y=[];e.textContent.split(/\s+/).forEach(function(D){{for(var M=D.split("-"),T=0;T<M.length-1;T++)y.push(M[T]+"-");y.push(M[M.length-1]+" ")}}),e.textContent="";let v=u(e,"tspan"),b="",g="",x=0;for(let D=0;D<y.length;D++){let M=y[D];g=b,b=b+M,++x,v.textContent=b.trim(),v.getComputedTextLength()>r&&x>1&&(v.textContent=g.trim(),g="",b=M,x=1,v=u(e,"tspan",M.trim()))}const m=e.childNodes;let A=i;if(m.length>2)for(let D=0;D<m.length;D++)A*=o;let q=0;m.forEach((D,M)=>{c==="end"&&M!==0&&(q=-D.getComputedTextLength());let T=M===0?a:1;M===0&&(T-=(m.length-1)*A/2),D.setAttribute("dx",q),D.setAttribute("dy",T+"em"),c!=="end"&&(q=-D.getComputedTextLength())})}}var bi=vt('<text text-anchor="start" class="axisLabel svelte-qy1sui"> </text>'),wi=vt("<line></line>"),ki=vt('<line class="tick-mark svelte-qy1sui"></line>'),pi=vt("<g><!><!><text> </text></g>"),Si=vt('<g class="axis y-axis"><!><!></g>');function ro(e,t){Ht(t,!1);const[n,r]=Ae(),a=()=>l(x,"$yScale",n),i=()=>l(b,"$padding",n),o=()=>l(g,"$xRange",n),c=()=>l(v,"$containerWidth",n),u=Nt(),y=Nt(),{containerWidth:v,padding:b,xRange:g,yScale:x}=tn("LayerCake");let m=s(t,"ticks",8,4),A=s(t,"tickMarks",8,!1),q=s(t,"gridlines",8,!0),D=s(t,"trimGridlinesLeft",8,!1),M=s(t,"trimGridlinesRight",8,!1),T=s(t,"tickDashed",8,!1),I=s(t,"tickColor",8,"#b3b3b3"),dt=s(t,"textColor",8,"#707070"),K=s(t,"formatTick",8,X=>X),ft=s(t,"wrapTicks",8,!1),$=s(t,"xTick",8,0),tt=s(t,"yTick",8,0),ot=s(t,"dxTick",24,()=>A()?8:0),st=s(t,"dyTick",24,()=>-4),bt=s(t,"textAnchor",8,"start"),ct=s(t,"prefix",8,""),gt=s(t,"suffix",8,""),lt=s(t,"yAxisLabel",8,"");h(()=>a(),()=>{Ft(u,typeof a().bandwidth=="function")}),h(()=>(f(m()),d(u),a()),()=>{Ft(y,Array.isArray(m())?m():d(u)?a().domain():typeof m()=="function"?m()(a().ticks()):a().ticks(m()))}),ze(),se();var at=Si(),Tt=H(at);{var Pt=X=>{var W=bi();R(W,"x",0);var St=H(W);rt(()=>{R(W,"y",d(u)?-6:-16),Wt(St,lt())}),P(X,W)};mt(Tt,X=>{lt()&&X(Pt)})}var pt=xt(Tt);pe(pt,1,()=>d(y),Se,(X,W,St)=>{var V=pi(),N=H(V);{var w=p=>{var j=wi();let U,Q;rt((E,_,J)=>{U=De(j,0,"gridline svelte-qy1sui",null,U,E),R(j,"x1",D()?i().left:0),R(j,"x2",M()?c()-i().right:c()),R(j,"y1",_),R(j,"y2",J),Q=oe(j,"",Q,{stroke:I(),"stroke-width":d(W)===0?1.5:1,filter:d(W)!==0?"contrast(calc(1/3)) brightness(1.5)":null})},[()=>({dashed:T()}),()=>tt()+(d(u)?a().bandwidth()/2:0),()=>tt()+(d(u)?a().bandwidth()/2:0)],Et),P(p,j)};mt(N,p=>{q()!==!1&&p(w)})}var B=xt(N);{var it=p=>{var j=ki();let U;rt((Q,E)=>{R(j,"x1",D()?i().left:0),R(j,"x2",(D()?i().left:0)+(d(u)?-6:6)),R(j,"y1",Q),R(j,"y2",E),U=oe(j,"",U,{stroke:I(),"stroke-width":d(W)===0?1.5:1,filter:d(W)!==0?"contrast(calc(1/3)) brightness(1.5)":null})},[()=>tt()+(d(u)?a().bandwidth()/2:0),()=>tt()+(d(u)?a().bandwidth()/2:0)],Et),P(p,j)};mt(B,p=>{A()===!0&&p(it)})}var et=xt(B),Vt=H(et);Da(et,(p,j)=>Hn==null?void 0:Hn(p,j),()=>({disable:!ft(),width:i().left})),rt((p,j,U)=>{De(V,0,`tick tick-${d(W)??""}`,"svelte-qy1sui"),R(V,"transform",`translate(${o()[0]+(d(u)?i().left:0)}, ${p??""})`),R(et,"x",D()?i().left-4:$()+(d(u)?-4:ot())),R(et,"y",j),R(et,"text-anchor",d(u)||D()?"end":bt()),R(et,"dy",D()?"0.6em":0),R(et,"fill",dt()),Wt(Vt,U)},[()=>a()(d(W)),()=>tt()+(d(u)?a().bandwidth()/2:0)+(d(u)?4:st()),()=>St==d(y).length-1?ct()+K()(d(W))+gt():K()(d(W))],Et),P(X,V)}),rt(()=>R(at,"transform",`translate(${-i().left}, 0)`)),P(e,at),It(),r()}var Di=_t('<h3 class="chart-title svelte-1s75boc"><!></h3>');function ao(e,t){var n=Di(),r=H(n);jt(r,t,"default",{},null),P(e,n)}var Ri=_t('<div class="chart-subtitle svelte-1dwvni9"><!></div>');function io(e,t){var n=Ri(),r=H(n);jt(r,t,"default",{},null),P(e,n)}var zi=_t('<div class="chart-footer svelte-1ndm0kq"><!></div>');function oo(e,t){var n=zi(),r=H(n);jt(r,t,"default",{},null),P(e,n)}var Ai=pa(_t('<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"><\/script><!>',1)),Ti=_t('<button class="svelte-ycm809">Download data (CSV)</button>'),Mi=_t('<button class="svelte-ycm809">Download image (PNG)</button>'),Ei=_t('<div class="chart-export svelte-ycm809"><!> <!> <!></div>');function so(e,t){Ht(t,!1);let n=s(t,"el",8),r=s(t,"data",8),a=s(t,"keys",24,()=>[]),i=s(t,"title",8,null),o=s(t,"output",24,()=>({}));se();var c=Ei();Ra(m=>{var A=Ai();xt(Ke(A)),P(m,A)});var u=H(c);{var y=m=>{var A=Ti();Sr("click",A,()=>di(r(),a(),i()?i():"chart")),P(m,A)};mt(u,m=>{o().csv&&m(y)})}var v=xt(u,2);{var b=m=>{var A=Sa("|");P(m,A)};mt(v,m=>{o().csv&&o().png&&m(b)})}var g=xt(v,2);{var x=m=>{var A=Mi();Sr("click",A,()=>fi(n(),i()?i():"chart",window.html2canvas)),P(m,A)};mt(g,m=>{o().png&&m(x)})}P(e,c),It()}var Ci=_t("<th> </th>"),Ni=_t("<td> </td>"),Pi=_t("<tr></tr>"),Gi=_t("<table><thead><tr></tr></thead><tbody></tbody></table>");function co(e,t){Ht(t,!1);const n=Nt();let r=s(t,"data",8),a=s(t,"key1",8,null),i=s(t,"key2",8,null),o=s(t,"key3",8,null),c=s(t,"key4",8,null);function u(g,x,m,A){let q=[];return g&&q.push(g),x&&q.push(x),m&&q.push(m),A&&q.push(A),q}h(()=>(f(a()),f(i()),f(o()),f(c())),()=>{Ft(n,u(a(),i(),o(),c()))}),ze();var y=Jn(),v=Ke(y);{var b=g=>{var x=Gi(),m=H(x),A=H(m);pe(A,5,()=>d(n),Se,(D,M)=>{var T=Ci(),I=H(T);rt(()=>Wt(I,d(M))),P(D,T)});var q=xt(m);pe(q,5,r,Se,(D,M)=>{var T=Pi();pe(T,5,()=>d(n),Se,(I,dt)=>{var K=Ni(),ft=H(K);rt(()=>Wt(ft,d(M)[d(dt)])),P(I,K)}),P(D,T)}),P(g,x)};mt(v,g=>{r()&&d(n)&&g(b)})}P(e,y),It()}export{no as A,so as E,oo as F,$i as L,eo as S,ao as T,Ji as a,Qi as b,to as c,ro as d,io as e,co as f,Zi as g,Ki as h,Ba as o,qa as s,Xi as t,Hn as w};
