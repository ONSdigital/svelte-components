import{p as ge,Q as ke,a as l,$ as we,l as xe,b as _e,c as $,f as V,i as v,e as m,h as Ve,aj as Le,t as L,R as ee,j as g,k as j,g as h,m as te,s as K,d as Ce,n as R,o as q,q as Se}from"./iframe-BD7JyiWe.js";import{i as Oe}from"./create-runtime-stories-CfzMKkzB.js";import{h as Te}from"./svelte-head-KhQ-w5ip.js";import{a as Ae}from"./actions-DagUszQ8.js";import{s as D}from"./attributes-CAz9ePsK.js";import{s as F}from"./class-Dzh9Da8g.js";import{D as Ie}from"./Dropdown-DnPzKXQ0.js";import{I as Me}from"./Input-BNPeyec_.js";var je=Le(g("<script><\/script><!>",1)),Ke=g("<label> </label>"),Re=g('<button type="reset" title="Clear selection" aria-label="Clear selection" class="ons-autocomplete-clear svelte-nc31vb"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 14 14" width="18"><path fill="currentColor" d="M13.6 1 l -0.71 -0.71 a 0.5 0.5 0 0 0 -0.71 0 l -5.25 5.25 l -5.25 -5.25 a 0.51 0.51 0 0 0 -0.71 0 l -0.71 0.71 a 0.5 0.5 0 0 0 0 0.71 l 5.25 5.25 l -5.25 5.25 a 0.5 0.5 0 0 0 0 0.71 l 0.71 0.71 a 0.5 0.5 0 0 0 0.71 0 l 5.25 -5.25 l 5.25 5.25 a 0.5 0.5 0 0 0 0.71 0 l 0.71 -0.71 a 0.5 0.5 0 0 0 0 -0.71 l -5.25 -5.25 l 5.25 -5.25 a 0.5 0.5 0 0 0 0 -0.71Z"></path></svg></button>'),qe=g("<div></div> <!>",1),De=g('<div><!> <div class="ons-autocomplete-wrapper svelte-nc31vb"><!></div></div>');function Fe(ae,a){ge(a,!1);const U=ke(),E=(e=1e3)=>new Promise(t=>setTimeout(t,e)),le=e=>`<svg class="${e==null?void 0:e.className}" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 11.75 7.7" width="18" style="z-index:1"><path fill="currentColor" d="m1.37.15 4.5 5.1 4.5-5.1a.37.37 0 0 1 .6 0l.7.7a.45.45 0 0 1 0 .5l-5.5 6.2a.37.37 0 0 1-.6 0l-5.5-6.1a.64.64 0 0 1 0-.6l.7-.7a.64.64 0 0 1 .6 0Z"></path></svg>`;let n,k=te(),B,C=te(!1),u=l(a,"id",8,"autocomplete"),S=l(a,"name",24,u),o=l(a,"mode",8,"default"),ie=l(a,"clearable",24,()=>o()!=="search"),N=l(a,"autoClear",24,()=>o()==="search"),w=l(a,"label",24,()=>o()==="search"?"Type to select":"Select an option"),O=l(a,"hideLabel",8,!1),H=l(a,"placeholder",24,()=>o()==="search"?"Enter text":"Select one"),s=l(a,"value",12,null),x=l(a,"options",24,()=>[]),d=l(a,"labelKey",8,"label"),Z=l(a,"groupKey",8,null),ne=l(a,"renderFallback",8,!1),se=l(a,"minLength",24,()=>o()==="search"?1:0),re=l(a,"loadOptions",8,(e,t)=>{const i=o()!=="search"&&x().map(p=>p[d()]).includes(e)?x():x().filter(p=>p[d()].match(new RegExp(`\\b${e.replace(/[^\w\s]/gi,"")}`,"i")));t(i)}),oe=l(a,"scriptUrl",8,"https://cdn.ons.gov.uk/vendor/accessible-autocomplete/3.0.1/accessible-autocomplete.min.js"),z=l(a,"clearInput",8,()=>{s(null),U("clear",null)}),de=l(a,"cls",8,null);async function P(e){K(C,!0),n.value=e||"",await E(110),n.focus({preventScroll:!0}),n.blur(),K(C,!1)}function ce(e){return e&&e[d()]}function Q(e,t=""){return e.replace(new RegExp(`\\b${t.replace(/[^\w\s]/gi,"")}`,"i"),i=>`<b>${i}</b>`)}function ue(e){const t=(n==null?void 0:n.value)||"";return e&&(Z()?`${Q((e==null?void 0:e[d()])||"",t)} <span class="muted-text">${e[Z()]}</span>`:Q((e==null?void 0:e[d()])||"",t))}async function W(e){e&&s()!==e&&(s(e),U("change",s()),s()&&N()&&(await E(0),z()()))}function pe(e){e.target.value||W(null)}function G(){!h(k)&&(window!=null&&window.accessibleAutocomplete)&&(B=window.accessibleAutocomplete,K(k,!0))}function T(e){var t;B({element:e,id:u(),name:S(),defaultValue:((t=s())==null?void 0:t[d()])||void 0,source:re(),autoselect:!0,onConfirm:W,confirmOnBlur:!1,placeholder:H(),displayMenu:"overlay",showAllValues:o()==="default",dropdownArrow:le,minLength:se(),templates:{inputValue:ce,suggestion:ue}}),n=e.querySelector(`#${u()}`),n.addEventListener("blur",pe)}function fe(e){if(n){const t=e==null?void 0:e[d()];t&&n.value!==t?P(t):!e&&n.value&&P("")}}we(G),xe(()=>Ce(s()),()=>{fe(s())}),_e(),Oe();var J=$();Te(e=>{var t=je(),i=V(t);j(i),L(()=>D(i,"src",oe())),ee("load",i,G),m(e,t)});var ye=V(J);{var be=e=>{var t=$(),i=V(t);{var p=c=>{const I=q(()=>{var r;return(r=s())==null?void 0:r[d()]});Me(c,{get id(){return u()},get name(){return S()},get label(){return w()},get hideLabel(){return O()},get value(){return h(I)}})},A=c=>{Ie(c,{get id(){return u()},get name(){return S()},get options(){return x()},get label(){return w()},get hideLabel(){return O()},get placeholder(){return H()},get value(){return s()}})};v(i,c=>{o()==="search"?c(p):c(A,!1)})}m(e,t)},me=e=>{var t=De(),i=R(t);{var p=r=>{var f=Ke();let y;var _=R(f);L(M=>{D(f,"for",u()),y=F(f,1,"ons-label",null,y,M),Se(_,w())},[()=>({"ons-u-vh":O()})],q),m(r,f)};v(i,r=>{w()&&r(p)})}var A=j(i,2),c=R(A);{var I=r=>{var f=qe(),y=V(f);let _;Ae(y,b=>T==null?void 0:T(b));var M=j(y,2);{var ve=b=>{var X=Re();ee("click",X,function(...he){var Y;(Y=z())==null||Y.apply(this,he)}),m(b,X)};v(M,b=>{ie()&&!N()&&s()&&b(ve)})}L(b=>{D(y,"id",`${u()??""}-container`),_=F(y,1,"ons-autocomplete svelte-nc31vb",null,_,b)},[()=>({"hide-menu":h(C)})],q),m(r,f)};v(c,r=>{h(k)&&r(I)})}L(()=>F(t,1,`ons-field ${de()??""}`,"svelte-nc31vb")),m(e,t)};v(ye,e=>{ne()&&!h(k)?e(be):e(me,!1)})}m(ae,J),Ve()}Fe.__docgen={data:[{name:"id",visibility:"public",description:"Unique id for the HTML element",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"autocomplete"'},{name:"name",visibility:"public",description:"Name for the HTML element",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"mode",visibility:"public",description:'The mode can be either "default" or "search"',keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"default",text:'"default"'},{kind:"const",type:"string",value:"search",text:'"search"'}],text:'"default" | "search"'},static:!1,readonly:!1,defaultValue:'"default"'},{name:"clearable",visibility:"public",description:"Defines whether the selection can be cleared",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"autoClear",visibility:"public",description:'Clear value on selection (default for "search" mode)',keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"label",visibility:"public",description:"A label to describe the element (expected for accessibility)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"hideLabel",visibility:"public",description:"Visually hide the label",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"placeholder",visibility:"public",description:"An optional placeholder text",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"value",visibility:"public",description:"A prop to bind to for the selected value",keywords:[],kind:"let",static:!1,readonly:!1,defaultValue:"null"},{name:"options",visibility:"public",description:"An array of options, formatted {id, label}",keywords:[],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1,defaultValue:"[]"},{name:"labelKey",visibility:"public",description:"The attribute of an option that defines its label/name",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"label"'},{name:"groupKey",visibility:"public",description:"The attribute of an option that defines its group (optional)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"renderFallback",visibility:"public",description:"When using SSR or pre-rendering, this option will render a text input or dropdown before the page is hydrated (allows for progressive enhancement).",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"minLength",visibility:"public",description:"Optional: Minimum query length to return results",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"..."},{name:"loadOptions",visibility:"public",description:"Optional: Override function for loading/filtering options based on the entered text",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1,defaultValue:"function"},{name:"scriptUrl",visibility:"public",description:"Optional: Override the default CDN URL for the accessible-autocomplete script",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"https://cdn.ons.gov.uk/vendor/accessible-autocomplete/3.0.1/accessible-autocomplete.min.js"'},{name:"clearInput",visibility:"public",description:"Call this function externally to clear the input",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1,defaultValue:"function"},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"}],name:"Select.svelte"};export{Fe as S};
