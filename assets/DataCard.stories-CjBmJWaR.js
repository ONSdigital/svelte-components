import{p as Z,a as y,j as C,f as I,k as w,n as k,t as P,o as z,e as $,h as F,q as A,g as B,i as N}from"./iframe-CbtXQGpi.js";import{i as Q,w as W,c as tt,d as et}from"./create-runtime-stories-C0J-SdQq.js";import{h as it}from"./html-BPrvTsL-.js";import{C as nt}from"./Card-BLqOtvn2.js";import{e as at,i as st}from"./each-DwLTWgD7.js";import{s as rt}from"./attributes-DtFI45NK.js";import{s as ot}from"./class-Dzh9Da8g.js";import{s as lt}from"./style-CcY6orqc.js";import{l as R}from"./linear-CZTuTj73.js";import{d as ut}from"./data-scatter-DUgoSHHp.js";import"./slot-BP_Qo1ZM.js";import"./GridCell-9VmnBLYO.js";import"./attributes-Co-1QMVx.js";function E(n){return function(){return n}}const L=Math.PI,O=2*L,D=1e-6,dt=O-D;function U(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function pt(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return U;const e=10**t;return function(i){this._+=i[0];for(let s=1,r=i.length;s<r;++s)this._+=Math.round(arguments[s]*e)/e+i[s]}}class ct{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?U:pt(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,s){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,e,i,s,r,p){this._append`C${+t},${+e},${+i},${+s},${this._x1=+r},${this._y1=+p}`}arcTo(t,e,i,s,r){if(t=+t,e=+e,i=+i,s=+s,r=+r,r<0)throw new Error(`negative radius: ${r}`);let p=this._x1,l=this._y1,a=i-t,o=s-e,f=p-t,c=l-e,d=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(d>D)if(!(Math.abs(c*a-o*f)>D)||!r)this._append`L${this._x1=t},${this._y1=e}`;else{let _=i-p,x=s-l,T=a*a+o*o,V=_*_+x*x,h=Math.sqrt(T),v=Math.sqrt(d),b=r*Math.tan((L-Math.acos((T+d-V)/(2*h*v)))/2),m=b/v,M=b/h;Math.abs(m-1)>D&&this._append`L${t+m*f},${e+m*c}`,this._append`A${r},${r},0,0,${+(c*_>f*x)},${this._x1=t+M*a},${this._y1=e+M*o}`}}arc(t,e,i,s,r,p){if(t=+t,e=+e,i=+i,p=!!p,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(s),a=i*Math.sin(s),o=t+l,f=e+a,c=1^p,d=p?s-r:r-s;this._x1===null?this._append`M${o},${f}`:(Math.abs(this._x1-o)>D||Math.abs(this._y1-f)>D)&&this._append`L${o},${f}`,i&&(d<0&&(d=d%O+O),d>dt?this._append`A${i},${i},0,1,${c},${t-l},${e-a}A${i},${i},0,1,${c},${this._x1=o},${this._y1=f}`:d>D&&this._append`A${i},${i},0,${+(d>=L)},${c},${this._x1=t+i*Math.cos(r)},${this._y1=e+i*Math.sin(r)}`)}rect(t,e,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function ft(n){let t=3;return n.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);t=i}return n},()=>new ct(t)}function ht(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function X(n){this._context=n}X.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:this._context.lineTo(n,t);break}}};function _t(n){return new X(n)}function vt(n){return n[0]}function mt(n){return n[1]}function yt(n,t){var e=E(!0),i=null,s=_t,r=null,p=ft(l);n=typeof n=="function"?n:n===void 0?vt:E(n),t=typeof t=="function"?t:t===void 0?mt:E(t);function l(a){var o,f=(a=ht(a)).length,c,d=!1,_;for(i==null&&(r=s(_=p())),o=0;o<=f;++o)!(o<f&&e(c=a[o],o,a))===d&&((d=!d)?r.lineStart():r.lineEnd()),d&&r.point(+n(c,o,a),+t(c,o,a));if(_)return r=null,_+""||null}return l.x=function(a){return arguments.length?(n=typeof a=="function"?a:E(+a),l):n},l.y=function(a){return arguments.length?(t=typeof a=="function"?a:E(+a),l):t},l.defined=function(a){return arguments.length?(e=typeof a=="function"?a:E(!!a),l):e},l.curve=function(a){return arguments.length?(s=a,i!=null&&(r=s(i)),l):s},l.context=function(a){return arguments.length?(a==null?i=r=null:r=s(i=a),l):i},l}var gt=C('<div><span class="ons-u-fs-s"> </span><br/><span class="x-tick--value svelte-1o1v576"> </span></div>'),bt=C('<div class="sparkline-container svelte-1o1v576"><div class="sparkline-point svelte-1o1v576"></div> <svg class="sparkline-chart svelte-1o1v576" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="sparkline svelte-1o1v576"></path></svg></div> <div class="x-ticks svelte-1o1v576"></div>',1);function Y(n,t){Z(t,!1);let e=y(t,"data",8),i=y(t,"xKey",8,"x"),s=y(t,"yKey",8,"y");function r(h,v){const b=h.map(m=>m[v]);return[Math.min(...b),Math.max(...b)]}const p=[e()[0][i()],e()[e().length-1][i()]],l=r(e(),s()),a=R().domain(p).range([0,100]),o=R().domain(l).range([100,0]),f=yt().x(h=>a(h[i()])).y(h=>o(h[s()]));Q();var c=bt(),d=I(c),_=k(d),x=w(_,2),T=k(x),V=w(d,2);at(V,5,()=>[e()[0],e()[e().length-1]],st,(h,v,b)=>{var m=gt();ot(m,1,`x-tick x-tick--${b===0?"start":"end"}`,"svelte-1o1v576");var M=k(m),K=k(M),q=w(M,2),u=k(q);P(()=>{A(K,B(v)[i()]),A(u,B(v)[s()])}),$(h,m)}),P((h,v)=>{lt(_,h),rt(T,"d",v)},[()=>[e()[e().length-1]].map(h=>`right: 0; top: ${o(h[s()])}%;`)[0],()=>f(e())],z),$(n,c),F()}Y.__docgen={data:[{name:"data",visibility:"public",description:"Array of data in the format [{x: value, y: value}, etc]",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"array",text:"object[]"},static:!1,readonly:!1},{name:"xKey",visibility:"public",description:"Key for the X values",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"x"'},{name:"yKey",visibility:"public",description:"Key for the Y values",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"y"'}],name:"Sparkline.svelte"};var kt=C('<p class="ons-u-fs-s"> </p>'),xt=C('<p class="headline-figures__figure ons-u-fs-3xl ons-u-fs-2xl@m ons-u-mb-no"> </p>'),$t=C('<p class="headline-figures__supporting-text ons-u-fs-r ons-u-mt-2xs ons-u-mb-no"><!></p>'),wt=C('<p class="ons-u-fs-s ons-u-mt-s ons-u-mb-no"> </p>'),Ct=C("<!> <!> <!> <!> <!>",1);function G(n,t){let e=y(t,"title",8,""),i=y(t,"subtitle",8,""),s=y(t,"href",8,""),r=y(t,"value",8,""),p=y(t,"mode",8,"number"),l=y(t,"caption",8,""),a=y(t,"data",8,null),o=y(t,"source",8,""),f=y(t,"cls",8,"");nt(n,{get title(){return e()},get href(){return s()},mode:"featured",get cls(){return f()},children:(c,d)=>{var _=Ct(),x=I(_);{var T=u=>{var g=kt(),S=k(g);P(()=>A(S,i())),$(u,g)};N(x,u=>{i()&&u(T)})}var V=w(x,2);{var h=u=>{Y(u,{get data(){return a()}})};N(V,u=>{p()==="sparkline"&&a()&&u(h)})}var v=w(V,2);{var b=u=>{var g=xt(),S=k(g);P(()=>A(S,r())),$(u,g)};N(v,u=>{r()&&u(b)})}var m=w(v,2);{var M=u=>{var g=$t(),S=k(g);it(S,l),$(u,g)};N(m,u=>{l()&&u(M)})}var K=w(m,2);{var q=u=>{var g=wt(),S=k(g);P(()=>A(S,o())),$(u,g)};N(K,u=>{o()&&u(q)})}$(c,_)},$$slots:{default:!0}})}G.__docgen={data:[{name:"title",visibility:"public",description:"Title of card",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"subtitle",visibility:"public",description:"Optional: Subtitle of card",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"href",visibility:"public",description:"Optional: URL link for card title",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"value",visibility:"public",description:"Big number (expects a pre-formatted text string)",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"type",type:"string",text:"string"},{kind:"type",type:"number",text:"number"}],text:"string | number"},static:!1,readonly:!1,defaultValue:'""'},{name:"mode",visibility:"public",description:"Mode for the data tile",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"number",text:'"number"'},{kind:"const",type:"string",value:"sparkline",text:'"sparkline"'},{kind:"const",type:"string",value:"bar",text:'"bar"'}],text:'"number" | "sparkline" | "bar"'},static:!1,readonly:!1,defaultValue:'"number"'},{name:"caption",visibility:"public",description:"Text caption describing the number",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"data",visibility:"public",description:"An array of data (required for charts)",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"object[]"},static:!1,readonly:!1,defaultValue:"null"},{name:"source",visibility:"public",description:"Text describing the source of the data",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'}],name:"DataCard.svelte"};const Mt=`A component for presenting key facts and figures as a grid of "cards".

Note: This component is experimental. Its attributes and options are likely to change. The intention is to include a range of simple chart types.

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { DataCard } from "@onsvisual/svelte-components";
<\/script>

<DataCard
  title="Consumer Price Index (CPI)",
  value="up 2.5%",
  caption="in 12 months to December 2024",
  source="Source: ONS"
/>
\`\`\`
`,St={title:"Data visualisation/DataCard",component:G,tags:["autodocs"],argTypes:{mode:{control:{type:"select"}}},parameters:W(Mt)},{Story:j}=et();var Dt=C("<!> <!>",1);function H(n,t){Z(t,!1),Q();var e=Dt(),i=I(e);j(i,{name:"Big number",args:{title:"Consumer Price Index (CPI)",value:"up 2.5%",caption:"in 12 months to December 2024",source:"Source: ONS"},parameters:{__svelteCsf:{rawCode:"<DataCard {...args} />"}}});var s=w(i,2);const r=z(()=>({title:"Example sparkline",subtitle:"Value in Â£ million",mode:"sparkline",data:ut.map(p=>({x:p.year,y:p.value})),value:"down 2.47",caption:"Change from 1979 to 2016",source:"Source: ONS"}));j(s,{name:"Sparkline",get args(){return B(r)},parameters:{__svelteCsf:{rawCode:"<DataCard {...args} />"}}}),$(n,e),F()}H.__docgen={data:[],name:"DataCard.stories.svelte"};const J=tt(H,St),jt=["BigNumber","Sparkline"],Zt={...J.BigNumber,tags:["svelte-csf-v5"]},zt={...J.Sparkline,tags:["svelte-csf-v5"]};export{Zt as BigNumber,zt as Sparkline,jt as __namedExportsOrder,St as default};
