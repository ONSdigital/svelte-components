import{p as yt,T as Ot,r as Rt,a as r,W as te,l as ge,b as bt,c as lt,f as ue,i as C,e as m,h as _t,X as kt,s as de,m as fe,d as w,U as Ve,g as l,k as _,t as Z,o as W,u as Xe,n as Ie,V as Ye,q as Ue,j as Ze,Y as a}from"./iframe-KpfOLoBS.js";import{i as St}from"./create-runtime-stories-Hnml5Fan.js";import{s as qe}from"./slot-BP_Qo1ZM.js";import{s as Gt}from"./style-CcY6orqc.js";import{b as Xt}from"./this-Ik-RE1sh.js";import{b as ht}from"./misc-DbKJ_z_Z.js";import{t as mt,L as qt,c as It,S as Yt,a as Vt,b as Zt,s as Jt,o as Nt,A as Qt,d as jt,g as pt,T as $t,e as er,f as tr,F as rr,E as ar}from"./DotPlotChart.svelte_svelte_type_style_lang-BVQ7A9Tm.js";import{e as nt,i as it}from"./each-CuKrsh8O.js";import{s as A}from"./attributes-C9gB30n4.js";import{s as lr}from"./class-Dzh9Da8g.js";import{c as nr}from"./attributes-Co-1QMVx.js";import{L as ir}from"./Legend-wLo65zUm.js";import{t as or}from"./defaultLocale-DJ2q5QjE.js";import{f as sr,l as cr}from"./linear-CZTuTj73.js";import{b as ur}from"./band-DBiACBU5.js";var gr=Ve('<polygon class="line-confidence svelte-4fmtu3"></polygon>'),dr=Ve('<g class="line-group svelte-4fmtu3"></g>'),fr=Ve("<text><!></text>"),xr=Ve('<polygon class="bar-rect svelte-4fmtu3"></polygon><!>',1),vr=Ve('<!><g class="bar-group svelte-4fmtu3"></g>',1);function hr(et,t){yt(t,!1);const[G,tt]=kt(),y=()=>te(we,"$custom",G),re=()=>te(ke,"$coords",G),i=()=>te(H,"$xScale",G),b=()=>te(U,"$data",G),Je=()=>te(he,"$config",G),v=()=>te(De,"$zGet",G),xe=()=>te(ae,"$zRange",G),B=()=>te(me,"$width",G),J=fe(),ve=fe(),N=fe(),P=fe(),{data:U,xScale:H,zGet:De,xDomain:Ae,zRange:ae,config:he,custom:we,width:me}=Ot("LayerCake"),ye=Rt();let le=r(t,"hover",8,!1),ne=r(t,"hovered",12,null),Q=r(t,"select",8,!1),z=r(t,"selected",12,null),ie=r(t,"highlighted",24,()=>[]),j=r(t,"overlayFill",8,!1),He=r(t,"directLabel",8,!1),be=r(t,"directLabelUnits",8,!1),_e=r(t,"formatTick",8,o=>o),X=r(t,"barHeight",8,40),ze=r(t,"suffix",8,""),Be=r(t,"prefix",8,""),p=7,ke=y().coords,L=y().idKey,Ee=y().colorHover?y().colorHover:"orange",F=y().colorSelect?y().colorSelect:"black",$=y().colorHighlight?y().colorHighlight:"black",Ce=y().lineWidth?y().lineWidth:2,oe=y().markerWidth?y().markerWidth:2.5;function ee(o,u){le()&&(ne(u?u[L]:null),ye("hover",{id:ne(),data:u,event:o}))}function Fe(o,u){Q()&&(z(u?u[L]:null),ye("select",{id:z(),data:u,event:o}))}ge(()=>y(),()=>{de(J,y().mode?y().mode:"default")}),ge(()=>w(X()),()=>{de(ve,X()<45?19/2:X()<65&&X()>45?19/2+1:19/2+4)}),ge(()=>{},()=>{de(N,(o,u,k,q)=>(u=Math.abs(u-o)<oe?o+oe:u,`${o},${k} ${o},${q} ${u},${q} ${u},${k}`))}),ge(()=>{},()=>{de(P,o=>{const u=[];for(let k=0;k<o[0].length;k++){const q=Math.min(...o.map(K=>K[k].x1)),Se=Math.max(...o.map(K=>K[k].x1));u.push({x0:q,x1:Se,y0:o[0][k].y0,y1:o[0][k].y1})}return u})}),bt(),St();var Ke=lt(),Me=ue(Ke);{var We=o=>{var u=vr(),k=ue(u);{var q=K=>{var se=dr();nt(se,5,()=>l(P)(re()),it,(x,E,I)=>{var O=gr();A(O,"data-id",I),A(O,"opacity",.3),Z((s,h)=>{A(O,"points",s),A(O,"fill",h)},[()=>l(N)(i()(l(E).x0),i()(l(E).x1),l(E).y0,l(E).y1),()=>j()&&b()[0][I][L]==z()?F:j()&&ie().includes(b()[0][I][L])?$:Je().z?v()(b()[0][I]):xe()[0]],W),m(x,O)}),m(K,se)};C(k,K=>{l(J)==="confidence"&&K(q)})}var Se=_(k);nt(Se,5,re,it,(K,se,x)=>{var E=lt(),I=ue(E);nt(I,1,()=>l(se),it,(O,s,h)=>{var Pe=lt(),Oe=ue(Pe);{var Ne=Re=>{var Te=xr(),D=ue(Te);A(D,"data-id",h);var Qe=_(D);{var rt=d=>{var n=fr(),S=Ie(n);{var Ge=Y=>{var V=Ye();Z(Le=>Ue(V,`${Be()??""}${Le??""}${ze()??""}`),[()=>_e()(l(s).x1)],W),m(Y,V)},je=Y=>{var V=Ye();Z(Le=>Ue(V,Le),[()=>_e()(l(s).x1)],W),m(Y,V)};C(S,Y=>{be()?Y(Ge):Y(je,!1)})}Z((Y,V,Le,pe)=>{A(n,"x",Y),A(n,"y",l(s).y1-(X()/2-l(ve))),A(n,"dx",V),A(n,"dy",Le),lr(n,0,pe,"svelte-4fmtu3")},[()=>i()(l(s).x1)>0?i()(l(s).x1)-5:Math.abs(i()(l(s).x1)-i()(0))<B()/p?i()(0):i()(l(s).x1),()=>i()(l(s).x1)>0?Math.abs(i()(l(s).x1)-i()(0))<B()/p?8:0:3,()=>console.log(i()(l(s).x1)>0?Math.abs(i()(l(s).x1)-i()(0))<B()/p?3:0:3),()=>nr(i()(l(s).x1)>0&&Math.abs(i()(l(s).x1)-i()(0))<B()/p?"bar-label-small":"bar-label")],W),m(d,n)};C(Qe,d=>{He()&&d(rt)})}Z((d,n,S)=>{A(D,"transform",`translate(${l(J)=="barcode"||l(J)=="comparison"&&x>0?-oe/2:0} 0)`),A(D,"points",d),A(D,"stroke",b()[x][h][L]==ne()?Ee:b()[x][h][L]==z()?F:$),A(D,"stroke-width",n),A(D,"fill",S),A(D,"tabindex",le()||Q()?0:-1)},[()=>l(N)(i()(l(s).x0),i()(l(s).x1),l(s).y0,l(s).y1),()=>b()[x][h][L]==ne()||b()[x][h][L]==z()||ie().includes(b()[x][h][L])?Ce:0,()=>j()&&b()[x][h][L]==z()?F:j()&&ie().includes(b()[x][h][L])?$:Je().z?v()(b()[x][h]):xe()[0]],W),Xe("mouseover",D,function(...d){var n;(n=le()?S=>ee(S,b()[x][h]):null)==null||n.apply(this,d)}),Xe("mouseleave",D,function(...d){var n;(n=le()?S=>ee(S,null):null)==null||n.apply(this,d)}),Xe("focus",D,function(...d){var n;(n=Q()?S=>ee(S,b()[x][h]):null)==null||n.apply(this,d)}),Xe("blur",D,function(...d){var n;(n=Q()?S=>ee(S,null):null)==null||n.apply(this,d)}),Xe("click",D,function(...d){var n;(n=Q()?S=>Fe(S,b()[x][h]):null)==null||n.apply(this,d)}),m(Re,Te)};C(Oe,Re=>{l(J)==="confidence"&&x>0||Re(Ne)})}m(O,Pe)}),m(K,E)}),m(o,u)};C(Me,o=>{re()&&o(We)})}m(et,Ke),_t(),tt()}var mr=Ze('<h5 class="visuallyhidden svelte-1fy6g2i"> </h5>'),yr=Ze("<!> <!> <!> <!>",1),br=Ze("<!> <!> <!> <!>",1),_r=Ze('<div class="visuallyhidden svelte-1fy6g2i"><!></div>'),kr=Ze('<div><!> <!> <!> <!> <!> <!> <div class="chart-container svelte-1fy6g2i" aria-hidden="true"><!></div> <!> <!></div> <!>',1);function Er(et,t){yt(t,!1);const[G,tt]=kt(),y=()=>te(n,"$xDomain",G),re=fe(),i=fe(),b=fe(),Je=/^%[a-zA-Z]/;let v=r(t,"data",12),xe=r(t,"barHeight",12,40),B=r(t,"height",12,null),J=r(t,"ssr",12,!1),ve=r(t,"animation",12,!0),N=r(t,"duration",12,800),P=r(t,"xKey",12,"x"),U=r(t,"yKey",12,"y"),H=r(t,"zKey",12,null),De=r(t,"idKey",28,U),Ae=r(t,"xScale",12,"linear"),ae=r(t,"xFormatTickString",12,""),he=r(t,"xFormatTick",28,()=>ae().match(Je)?or(ae()):ae()?sr(ae()):It),we=r(t,"yWrapTicks",12,!0),me=r(t,"xMax",12,null),ye=r(t,"xMin",12,null),le=r(t,"xAxis",12,!0),ne=r(t,"yAxis",12,!0),Q=r(t,"xTicks",12,4),z=r(t,"zDomain",12,null),ie=r(t,"textColor",12,"#666"),j=r(t,"tickColor",12,"#d9d9d9"),He=r(t,"tickDashed",12,!1),be=r(t,"title",12,null),_e=r(t,"subtitle",12,null),X=r(t,"alt",12,null),ze=r(t,"footer",12,null),Be=r(t,"legend",12,!1),p=r(t,"xAxisLabel",12,""),ke=r(t,"yAxisLabel",12,""),L=r(t,"table",12,!1),Ee=r(t,"snapTicks",12,!1),F=r(t,"mode",12,"default"),$=r(t,"padding",28,()=>({top:ke()?24:0,bottom:p()?55:20,left:35,right:0})),Ce=r(t,"color",12,null),oe=r(t,"colors",28,()=>Ce()?[Ce()]:["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]),ee=r(t,"markerWidth",12,2.5),Fe=r(t,"spacing",12,.2),Ke=r(t,"interactive",12,!0),Me=r(t,"xPrefix",12,""),We=r(t,"xSuffix",12,""),o=r(t,"yPrefix",12,""),u=r(t,"ySuffix",12,""),k=r(t,"hover",12,!1),q=r(t,"hovered",12,null),Se=r(t,"colorHover",12,"orange"),K=r(t,"select",12,!1),se=r(t,"selected",12,null),x=r(t,"colorSelect",12,"black"),E=r(t,"highlighted",28,()=>[]),I=r(t,"colorHighlight",12,"black"),O=r(t,"overlayFill",12,!1),s=r(t,"output",12,null),h=r(t,"directLabel",12,!1),Pe=r(t,"directLabelUnits",12,!1),Oe=fe();const Ne={duration:N(),easing:Zt},Re=mt(void 0,Ne),Te=(e,c,g)=>g.indexOf(e)==c;function D(e,c){let g=[];return c.forEach(f=>{let T=0,ce=0;e.filter(M=>M[U()]==f).map(M=>M[P()]).forEach(M=>{M>=0?T+=M:ce+=M}),T!=0&&g.push(T),ce!=0&&g.push(ce)}),g}function Qe(e,c,g,f){let T=c=="stacked"&&H()?D(e,e.map(M=>M[U()]).filter(Te)):e.map(M=>M[g]),ce=ye()?ye():Math.min(...T)>0?0:Math.min(...T),$e=f||(Math.max(...T)<0?0:Math.max(...T));return[ce,$e]}function rt(e,c,g,f){let T=Qe(e,c,g,f);(T[0]!=d[0]||T[1]!=d[1])&&(n.set(T,{duration:ve()?N():0}),d=T)}let d=Qe(v(),F(),P(),me());const n=mt(d,Ne);ge(()=>(w(v()),w(F()),w(P()),w(me())),()=>{rt(v(),F(),P(),me())}),ge(()=>(w(v()),w(U())),()=>{de(re,v().map(e=>e[U()]).filter(Te))}),ge(()=>(w(z()),w(H()),w(v())),()=>{de(i,Array.isArray(z())?z():H()&&typeof z()=="function"?v().map(e=>e[H()]).filter(Te).sort(z()):H()?v().map(e=>e[H()]).filter(Te):null)}),ge(()=>(w(v()),l(i),w(H())),()=>{de(b,pt(v(),l(i),H()))}),bt(),St();var S=kr(),Ge=ue(S),je=Ie(Ge);{var Y=e=>{$t(e,{children:(c,g)=>{var f=Ye();Z(()=>Ue(f,be())),m(c,f)},$$slots:{default:!0}})};C(je,e=>{be()&&e(Y)})}var V=_(je,2);{var Le=e=>{er(e,{children:(c,g)=>{var f=Ye();Z(()=>Ue(f,_e())),m(c,f)},$$slots:{default:!0}})};C(V,e=>{_e()&&e(Le)})}var pe=_(V,2);{var Tt=e=>{var c=mr(),g=Ie(c);Z(()=>Ue(g,X())),m(e,c)};C(pe,e=>{X()&&e(Tt)})}var ot=_(pe,2);qe(ot,t,"options",{},null);var st=_(ot,2);{var Lt=e=>{const c=W(()=>F()=="barcode"),g=W(()=>F()=="comparison"),f=W(()=>F()=="confidence");ir(e,{get domain(){return l(i)},get colors(){return oe()},get markerWidth(){return ee()},horizontal:!1,get line(){return l(c)},get comparison(){return l(g)},get confidence(){return l(f)},get yAxisLabel(){return ke()}})};C(st,e=>{Be()&&l(i)&&e(Lt)})}var ct=_(st,2);qe(ct,t,"legend",{},null);var at=_(ct,2);let ut;var Dt=Ie(at);const At=W(()=>typeof Ae()=="function"?Ae()():Ae()=="log"?Jt():cr()),Ht=W(()=>ur().paddingInner(Fe()).paddingOuter(Fe()).round(!0)),zt=W(Nt),Ct=W(()=>({type:"bar",mode:F(),idKey:De(),coords:Re,markerWidth:ee(),colorSelect:x(),colorHover:Se(),colorHighlight:I(),animation:ve(),duration:N()}));qt(Dt,{get padding(){return $()},get ssr(){return J()},get x(){return P()},get y(){return U()},get z(){return H()},get xDomain(){return y()},get yDomain(){return l(re)},get xScale(){return l(At)},get yScale(){return l(Ht)},get zScale(){return l(zt)},get zDomain(){return l(i)},get zRange(){return oe()},get data(){return l(b)},get flatData(){return v()},get custom(){return l(Ct)},children:(e,c)=>{var g=br(),f=ue(g);Yt(f,{});var T=_(f,2);qe(T,t,"back",{},null);var ce=_(T,2);Vt(ce,{get pointerEvents(){return Ke()},children:(M,Sr)=>{var dt=yr(),ft=ue(dt);{var wt=R=>{Qt(R,{get ticks(){return Q()},get formatTick(){return he()},get snapTicks(){return Ee()},get prefix(){return Me()},get suffix(){return We()},get textColor(){return ie()},get tickColor(){return j()},get tickDashed(){return He()},get xAxisLabel(){return p()}})};C(ft,R=>{le()&&R(wt)})}var xt=_(ft,2);{var Bt=R=>{jt(R,{gridlines:!1,get prefix(){return o()},get suffix(){return u()},get textColor(){return ie()},get tickColor(){return j()},get tickDashed(){return He()},get wrapTicks(){return we()},get yAxisLabel(){return ke()}})};C(xt,R=>{ne()&&R(Bt)})}var vt=_(xt,2);hr(vt,{get select(){return K()},get selected(){return se()},get hover(){return k()},get hovered(){return q()},get highlighted(){return E()},get directLabel(){return h()},get directLabelUnits(){return Pe()},get xFormatTick(){return he()},get overlayFill(){return O()},get prefix(){return Me()},get suffix(){return We()},get barHeight(){return xe()},get formatTick(){return he()},$$events:{hover(R){ht.call(this,t,R)},select(R){ht.call(this,t,R)}}});var Et=_(vt,2);qe(Et,t,"svg",{},null),m(M,dt)},$$slots:{default:!0}});var $e=_(ce,2);qe($e,t,"front",{},null),m(e,g)},$$slots:{default:!0}});var gt=_(at,2);{var Ft=e=>{var c=_r(),g=Ie(c);tr(g,{get data(){return v()},get key1(){return U()},get key2(){return P()}}),m(e,c)};C(gt,e=>{L()&&e(Ft)})}var Kt=_(gt,2);{var Mt=e=>{rr(e,{children:(c,g)=>{var f=Ye();Z(()=>Ue(f,ze())),m(c,f)},$$slots:{default:!0}})};C(Kt,e=>{ze()&&e(Mt)})}Xt(Ge,e=>de(Oe,e),()=>l(Oe));var Wt=_(Ge,2);{var Pt=e=>{const c=W(()=>[De(),U(),H(),P()]);ar(e,{get el(){return l(Oe)},get data(){return v()},get keys(){return l(c)},get title(){return be()},get output(){return s()}})};C(Wt,e=>{s()&&e(Pt)})}Z(()=>ut=Gt(at,"",ut,{height:typeof B()=="number"?`${B()}px`:B()?B():l(re)?`${$().top+$().bottom+xe()*l(re).length}px`:"300px"})),m(et,S);var Ut=_t({get data(){return v()},set data(e){v(e),a()},get barHeight(){return xe()},set barHeight(e){xe(e),a()},get height(){return B()},set height(e){B(e),a()},get ssr(){return J()},set ssr(e){J(e),a()},get animation(){return ve()},set animation(e){ve(e),a()},get duration(){return N()},set duration(e){N(e),a()},get xKey(){return P()},set xKey(e){P(e),a()},get yKey(){return U()},set yKey(e){U(e),a()},get zKey(){return H()},set zKey(e){H(e),a()},get idKey(){return De()},set idKey(e){De(e),a()},get xScale(){return Ae()},set xScale(e){Ae(e),a()},get xFormatTickString(){return ae()},set xFormatTickString(e){ae(e),a()},get xFormatTick(){return he()},set xFormatTick(e){he(e),a()},get yWrapTicks(){return we()},set yWrapTicks(e){we(e),a()},get xMax(){return me()},set xMax(e){me(e),a()},get xMin(){return ye()},set xMin(e){ye(e),a()},get xAxis(){return le()},set xAxis(e){le(e),a()},get yAxis(){return ne()},set yAxis(e){ne(e),a()},get xTicks(){return Q()},set xTicks(e){Q(e),a()},get zDomain(){return z()},set zDomain(e){z(e),a()},get textColor(){return ie()},set textColor(e){ie(e),a()},get tickColor(){return j()},set tickColor(e){j(e),a()},get tickDashed(){return He()},set tickDashed(e){He(e),a()},get title(){return be()},set title(e){be(e),a()},get subtitle(){return _e()},set subtitle(e){_e(e),a()},get alt(){return X()},set alt(e){X(e),a()},get footer(){return ze()},set footer(e){ze(e),a()},get legend(){return Be()},set legend(e){Be(e),a()},get xAxisLabel(){return p()},set xAxisLabel(e){p(e),a()},get yAxisLabel(){return ke()},set yAxisLabel(e){ke(e),a()},get table(){return L()},set table(e){L(e),a()},get snapTicks(){return Ee()},set snapTicks(e){Ee(e),a()},get mode(){return F()},set mode(e){F(e),a()},get padding(){return $()},set padding(e){$(e),a()},get color(){return Ce()},set color(e){Ce(e),a()},get colors(){return oe()},set colors(e){oe(e),a()},get markerWidth(){return ee()},set markerWidth(e){ee(e),a()},get spacing(){return Fe()},set spacing(e){Fe(e),a()},get interactive(){return Ke()},set interactive(e){Ke(e),a()},get xPrefix(){return Me()},set xPrefix(e){Me(e),a()},get xSuffix(){return We()},set xSuffix(e){We(e),a()},get yPrefix(){return o()},set yPrefix(e){o(e),a()},get ySuffix(){return u()},set ySuffix(e){u(e),a()},get hover(){return k()},set hover(e){k(e),a()},get hovered(){return q()},set hovered(e){q(e),a()},get colorHover(){return Se()},set colorHover(e){Se(e),a()},get select(){return K()},set select(e){K(e),a()},get selected(){return se()},set selected(e){se(e),a()},get colorSelect(){return x()},set colorSelect(e){x(e),a()},get highlighted(){return E()},set highlighted(e){E(e),a()},get colorHighlight(){return I()},set colorHighlight(e){I(e),a()},get overlayFill(){return O()},set overlayFill(e){O(e),a()},get output(){return s()},set output(e){s(e),a()},get directLabel(){return h()},set directLabel(e){h(e),a()},get directLabelUnits(){return Pe()},set directLabelUnits(e){Pe(e),a()}});return tt(),Ut}export{Er as B};
