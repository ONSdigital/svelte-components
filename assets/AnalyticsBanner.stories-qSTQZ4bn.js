import{p as fe,a as v,$ as Ue,l as de,b as qe,c as Ne,f as Qe,i as ue,e as I,h as _e,X as Fe,T as Je,s as p,m as f,g as t,W as Ke,d as Xe,j as z,n as e,t as K,k as d,o as pe,q as i,u as X}from"./iframe-BLXsI76k.js";import{i as ge,w as ze,c as Ze,d as ea}from"./create-runtime-stories-CPJgW_6A.js";import{s as V}from"./attributes-BkDU35oC.js";import{s as ye}from"./class-Dzh9Da8g.js";import{s as aa}from"./style-CcY6orqc.js";import{p as ve}from"./event-modifiers-CWmzcjye.js";import"./attributes-Co-1QMVx.js";function ta(_){window!=null&&window.dataLayer&&window.dataLayer.push(_)}var sa=z('<form method="GET" id="global-cookie-message" aria-label="cookie banner"><div><div class="ons-grid"><div class="ons-grid__col ons-col-8@m"><h2 class="ons-cookies-banner__title ons-u-mb-xs"> </h2> <div class="ons-cookies-banner__statement"><p> </p> <p> <a> </a> </p></div></div></div> <div class="ons-grid ons-grid--flex ons-u-mt-s"><div class="ons-grid__col"><button type="submit" class="ons-btn ons-btn--small ons-js-accept-cookies ons-cookies-banner__btn" data-button="accept"><span class="ons-btn__inner"><span class="ons-btn__text"> </span></span></button></div> <div class="ons-grid__col"><button type="button" class="ons-btn ons-btn--small ons-js-reject-cookies ons-cookies-banner__btn" data-button="reject"><span class="ons-btn__inner"><span class="ons-btn__text"> </span></span></button></div> <div class="ons-grid__col"><a class="ons-cookies-banner__link"> </a></div></div></div></form>'),oa=z('<div><div class="ons-grid ons-grid--flex ons-grid--between ons-grid--gutterless ons-grid--no-wrap@s ons-grid--vertical-center"><div class="ons-grid__col ons-grid__col--flex ons-col-auto ons-u-flex-shrink@s"><p class="ons-cookies-banner__desc ons-u-mb-no@s ons-u-mr-s@s"><span> </span> <span class="ons-cookies-banner__preferences-text"> <a> </a> </span></p></div> <div class="ons-grid__col"><button type="button" class="ons-btn ons-btn--secondary ons-btn--small ons-js-hide-button"><span class="ons-btn__inner"><span class="ons-btn__text"> </span></span></button></div></div></div>'),na=z('<div class="ons-cookies-banner svelte-pljvs8" role="region" aria-label="Cookies banner"><!></div>');function me(_,u){fe(u,!1);const[ke,we]=Fe(),g=()=>Ke(L(),"$page",ke),o=f();let be=v(u,"analyticsId",8,"GTM-MBCBVQS"),Z=v(u,"analyticsProps",24,()=>({})),L=v(u,"page",24,()=>Je("page")),xe=v(u,"hideBanner",8,!1),M=v(u,"usageCookies",12,!1),ee=v(u,"width",8,"wide"),ae=v(u,"pageViewEnabled",8,!0),te,P=f(!1),se=f(!1),oe=f(""),m=f("en"),h=f("https://www.ons.gov.uk"),k=null;function Ce(){var s;const a=((s=L())==null?void 0:s.url)||document.location;p(m,a.host.startsWith("cy")?"cy":"en"),p(h,t(m)==="cy"?"https://cy.ons.gov.uk":"https://www.ons.gov.uk")}function je(){return-1<document.cookie.indexOf("ons_cookie_message_displayed=true")}function Ae(a,s){const l=new RegExp(`'${a}':(.*?)[,}]`),n=s.match(l);return n?n[1]:null}function Be(){var a=document.cookie.match(new RegExp("(^|;) ?cookies_policy=([^;]*)(;|$)"));if(a){console.debug("legacy cookies_policy found");var s=decodeURIComponent(a[2]),l=JSON.parse(s);return console.debug("usage is",l.usage),l.usage}var n=document.cookie.match("(?:^|; )ons_cookie_policy=({.*?})");if(n){console.debug("ons_cookie_policy found");var y=Ae("usage",n[1]);return console.debug("usage is",y),y==="true"}return console.debug("no cookie found - opting out"),!1}function ne(a){let s=31536e3,l=window.location.hostname,n=!0,c=a=="all"?"{'essential':true,'settings':true,'usage':true,'campaigns':true}":"{'essential':true,'settings':false,'usage':false,'campaigns':false}",r="/";document.cookie=`ons_cookie_message_displayed=${n};max-age=${s};domain=${l};path=${r};`,document.cookie=`ons_cookie_policy=${c};max-age=${s};domain=${l};path=${r};`,p(oe,`You have ${a=="all"?"accepted":"rejected"} all additional cookies.`),a=="all"&&M(!0),p(se,!0),a=="all"&&ie()}function ie(){console.log("initialising analytics"),window.dataLayer=[{analyticsOptOut:!1,"gtm.whitelist":["google","hjtc","lcl"],"gtm.blacklist":["customScripts","sp","adm","awct","k","d","j"],...Z()}],function(a,s,l,n,y){a[n]=a[n]||[],a[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var E=s.head,c=s.createElement(l),r="";c.async=!0,c.src="https://www.googletagmanager.com/gtm.js?id="+y+r,E.appendChild(c)}(window,document,"script","dataLayer",be()),g()&&(k=`${g().url.href}`.replace(g().url.hash,""))}function Ve(a){if(a&&k){const s=`${a.url.href}`.replace(a.url.hash,"");s!==k&&(k=s,ta({event:"pageView",pageURL:k,...Z()}))}}Ue(()=>{Ce(),te=!0,L()||p(m,document.location.host.startsWith("cy")?"cy":"en"),p(P,!je()),M(Be()),M()&&te&&ie()});const le={"Cookies on ons.gov.uk":"Cwcis ar ons.gov.uk","Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.":"Ffeiliau bach a gaiff eu storio ar eich dyfais pan fyddwch yn mynd ar wefan yw cwcis. Rydym ni’n defnyddio rhai cwcis hanfodol i wneud i’r wefan hon weithio.","We would like to set":"Hoffem osod","additional cookies":"cwcis ychwanegol","to remember your settings and understand how you use the site. This helps us to improve our services.":"er mwyn cofio eich gosodiadau a deall sut rydych chi’n defnyddio’r wefan. Mae hyn yn ein helpu ni i wella ein gwasanaethau.","Accept additional cookies":"Derbyn cwcis ychwanegol","Reject additional cookies":"Gwrthod cwcis ychwanegol","View cookies":"Gweld cwcis","You have accepted all additional cookies.":"Rydych chi wedi derbyn yr holl gwcis ychwanegol.","You have rejected all additional cookies.":"Rydych chi wedi gwrthod yr holl gwcis ychwanegol.","You can":"Gallwch chi","change your cookie preferences":"newid eich dewisiadau o ran cwcis","at any time.":"ar unrhyw adeg.",Hide:"Cuddio","Hide this message":"Cuddiwch y neges yma"};de(()=>(Xe(ae()),g()),()=>{ae()&&Ve(g())}),de(()=>t(m),()=>{p(o,a=>t(m)==="cy"&&le[a]?le[a]:a)}),qe(),ge();var ce=Ne(),Pe=Qe(ce);{var Ee=a=>{var s=na();let l;var n=e(s);{var y=c=>{var r=sa(),w=e(r);let D;var b=e(w),O=e(b),x=e(O),W=e(x),Y=d(x,2),C=e(Y),j=e(C),H=d(C,2),R=e(H),A=d(R),B=e(A),U=d(A),q=d(b,2),$=e(q),S=e($),N=e(S),Q=e(N),F=e(Q),T=d($,2),G=e(T),J=e(G),De=e(J),Re=e(De),$e=d(T,2),re=e($e),Se=e(re);K((Te,Ge,Ie,Le,Me,Oe,We,Ye,He)=>{V(r,"action",t(h)+"/cookies/accept-all"),D=ye(w,1,"ons-container ons-cookies-banner__primary svelte-pljvs8",null,D,Te),i(W,Ge),i(j,Ie),i(R,`${Le??""} `),V(A,"href",t(h)+"/cookies"),i(B,Me),i(U,` ${Oe??""}`),i(F,We),i(Re,Ye),V(re,"href",t(h)+"/cookies"),i(Se,He)},[()=>({"ons-page__container--wider":ee()==="wider"}),()=>t(o)("Cookies on ons.gov.uk"),()=>t(o)("Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work."),()=>t(o)("We would like to set"),()=>t(o)("additional cookies"),()=>t(o)("to remember your settings and understand how you use the site. This helps us to improve our services."),()=>t(o)("Accept additional cookies"),()=>t(o)("Reject additional cookies"),()=>t(o)("View cookies")],pe),X("click",S,ve(()=>ne("all"))),X("click",G,ve(()=>ne("reject"))),I(c,r)},E=c=>{var r=oa();let w;var D=e(r),b=e(D),O=e(b),x=e(O),W=e(x),Y=d(x,2),C=e(Y),j=d(C),H=e(j),R=d(j),A=d(b,2),B=e(A),U=e(B),q=e(U),$=e(q);K((S,N,Q,F,T,G,J)=>{w=ye(r,1,"ons-container ons-cookies-banner__confirmation svelte-pljvs8",null,w,S),i(W,N),i(C,`${Q??""} `),V(j,"href",t(h)+"/cookies"),i(H,F),i(R,` ${T??""}.`),V(B,"aria-label",G),i($,J)},[()=>({"ons-page__container--wider":ee()==="wider"}),()=>t(o)(t(oe)),()=>t(o)("You can"),()=>t(o)("change your cookie preferences"),()=>t(o)("at any time"),()=>t(o)("Hide this message"),()=>t(o)("Hide")],pe),X("click",B,()=>p(P,!1)),I(c,r)};ue(n,c=>{t(se)?c(E,!1):c(y)})}K(()=>l=aa(s,"",l,{display:t(P)?"block":null})),I(a,s)};ue(Pe,a=>{t(P)&&!xe()&&a(Ee)})}I(_,ce),_e(),we()}me.__docgen={data:[{name:"analyticsId",visibility:"public",description:"Google analytics/tags manager ID",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"GTM-MBCBVQS"'},{name:"analyticsProps",visibility:"public",description:"Optional props to describe the content",keywords:[],kind:"let",static:!1,readonly:!1,defaultValue:"{}"},{name:"page",visibility:"public",description:'Optional: Pass the "page" store from "$app/state" in SvelteKit (gets read from context by default if it exists)',keywords:[],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1,defaultValue:"..."},{name:"hideBanner",visibility:"public",description:"Use this to hide the banner (only initialises analytics if cookies already accepted)",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"usageCookies",visibility:"public",description:"Bind to this value if you need to know if cookies have been accepted",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"width",visibility:"public",description:"Set the width of the banner",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"wide",text:'"wide"'},{kind:"const",type:"string",value:"wider",text:'"wider"'}],text:'"wide" | "wider"'},static:!1,readonly:!1,defaultValue:'"wide"'},{name:"pageViewEnabled",visibility:"public",description:"Enable automatic pageView event on route changes",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"}],name:"AnalyticsBanner.svelte"};const ia=`This component will display a cookie banner and export a function that allows you to push events to the Google Analytics dataLayer array.

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { AnalyticsBanner, AnalyticsEvent } from "@onsvisual/svelte-components";

  // Example of an analytics event triggered by another event "e"
  function doAnalyticsEvent(e) {
    // Assumes that e.detail is in the form {key1: "value1", key2: "value2", etc}
    AnalyticsEvent({event: "eventName", ...e.detail});
  }
<\/script>

<AnalyticsBanner analyticsId="{id_string}" />
<!-- Rest of page content -->
\`\`\`
`,la={title:"Layout/AnalyticsBanner",component:me,tags:["autodocs"],argTypes:{},parameters:{...ze(ia),layout:"fullscreen"}},{Story:ca}=ea();function he(_,u){fe(u,!1),ge(),ca(_,{name:"Default",args:{},parameters:{__svelteCsf:{rawCode:"<AnalyticsBanner {...args} />"}}}),_e()}he.__docgen={data:[],name:"AnalyticsBanner.stories.svelte"};const ra=Ze(he,la),ga=["Default"],ma={...ra.Default,tags:["svelte-csf-v5"]};export{ma as Default,ga as __namedExportsOrder,la as default};
