import{at as Ee,au as Me,p as ge,r as Re,a as o,aj as De,ao as Ae,l as w,b as je,j as T,f as He,i as te,t as F,e as I,h as me,X as he,n as S,k as P,o as _e,g as e,m as r,s as n,d as be,W as ke,T as Le,$ as We,a0 as Pe,a1 as ve,q as Xe}from"./iframe-KpfOLoBS.js";import{i as xe}from"./create-runtime-stories-Hnml5Fan.js";import{s as ie}from"./slot-BP_Qo1ZM.js";import{b as Fe,s as Ge}from"./attributes-C9gB30n4.js";import{s as C}from"./class-Dzh9Da8g.js";import{s as Je}from"./style-CcY6orqc.js";import{b as X}from"./this-Ik-RE1sh.js";import{c as we}from"./attributes-Co-1QMVx.js";import{C as Ke}from"./Container-BHGqqMwb.js";function Ne(s,t){Ee(window,["resize"],()=>Me(()=>t(window[s])))}const y=[];let D;if(typeof window<"u"){const s=()=>y.forEach(t=>t());window.addEventListener("scroll",s),window.addEventListener("resize",s)}if(typeof IntersectionObserver<"u"){const s=new Map,t=new IntersectionObserver((a,b)=>{a.forEach(l=>{const d=s.get(l.target),v=y.indexOf(d);l.isIntersecting?v===-1&&y.push(d):(d(),v!==-1&&y.splice(v,1))})},{rootMargin:"400px 0px"});D={add:({outer:a,update:b})=>{const{top:l,bottom:d}=a.getBoundingClientRect();l<window.innerHeight&&d>0&&y.push(b),s.set(a,b),t.observe(a)},remove:({outer:a,update:b})=>{if(s.get(a)){const l=y.indexOf(b);l!==-1&&y.splice(l,1),s.delete(a),t.unobserve(a)}}}}else D={add:({update:s})=>{y.push(s)},remove:({update:s})=>{const t=y.indexOf(s);t!==-1&&y.splice(t,1)}};var Qe=T('<div class="ons-u-mt-xl"></div>'),Ue=T('<div class="ons-u-mb-xl"></div>'),Ye=T("<!> <svelte-scroller-outer><svelte-scroller-background-container><svelte-scroller-background><!></svelte-scroller-background></svelte-scroller-background-container> <svelte-scroller-foreground><!></svelte-scroller-foreground></svelte-scroller-outer> <!>",3);function Ze(s,t){ge(t,!1);const[a,b]=he(),l=()=>ke(ne,"$sections",a),d=r(),v=r(),q=r(),A=r(),h=r(),f=Re();let c=o(t,"id",8,null),G=o(t,"splitscreen",8,!1),_=o(t,"marginTop",8,!1),se=o(t,"marginBottom",8,!0),k=o(t,"threshold",8,.7),j=0,J=1,K=o(t,"count",12,0),u=o(t,"index",12,null),g=o(t,"sectionId",12,null),H=o(t,"offset",12,0),z=o(t,"progress",12,0),O=o(t,"visible",12,!1),Se=o(t,"cls",8,"");const ne=Ae([]);De("sections",ne);let E,V=r(),L=r(),N=r(),le,m=r(0),x=r(),M=r(0),Q=r(1);function Ve(i){return E&&D.remove(E),K(i.length),U(),E={outer:e(V),update:U},D.add(E),()=>D.remove(E)}function U(){if(!e(L))return;const i=e(V).getBoundingClientRect();le=i.left,n(Q,i.right-le);const p=e(L).getBoundingClientRect(),de=e(N).getBoundingClientRect(),$=p.top<e(m)&&p.bottom>0,ze=$&&!O(),Oe=!$&&O();O($);const ce=p.bottom-p.top;de.bottom-de.top;const fe=e(v)-e(d);z((e(d)-p.top)/(ce-fe)),z()<=0?(n(M,0),n(x,!1)):z()>=1?(n(M,ce-fe),n(x,!1)):(n(M,e(d)),n(x,!0));for(let B=0;B<l().length;B++){const ee=l()[B],{top:ue}=ee.getBoundingClientRect(),pe=l()[B+1],ye=pe?pe.getBoundingClientRect().top:p.bottom;if(H((e(q)-ue)/(ye-ue)),ye>=e(q)){u()!==B&&(u(B),g(ee.dataset.id?ee.dataset.id:null),f("change",{id:c(),index:u(),sectionId:g()}));break}}ze&&(f("enter",{id:c(),index:u(),sectionId:g()}),f("change",{id:c(),index:u(),sectionId:g()})),Oe&&f("exit",{id:c(),index:u(),sectionId:g()})}w(()=>e(m),()=>{n(d,Math.round(j*e(m)))}),w(()=>e(m),()=>{n(v,Math.round(J*e(m)))}),w(()=>(be(k()),e(m)),()=>{n(q,Math.round(k()*e(m)))}),w(()=>be(k()),()=>{k(),U()}),w(()=>(e(x),e(M)),()=>{n(A,`
		position: ${e(x)?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${e(M)}px);
		z-index: 1;
	`)}),w(()=>(e(x),e(Q)),()=>{n(h,e(x)?`width:${e(Q)}px;`:"")}),w(()=>(e(V),l()),()=>{e(V)&&Ve(l())}),je(),xe();var oe=Ye(),ae=He(oe);{var Be=i=>{var p=Qe();I(i,p)};te(ae,i=>{_()&&i(Be)})}var R=P(ae,2);F(()=>Fe(R,"id",c()));let re;var W=S(R);C(W,1,"background-container svelte-1r0zgdq");var Y=S(W);C(Y,1,"svelte-1r0zgdq");var Ce=S(Y);ie(Ce,t,"background",{},null),X(Y,i=>n(N,i),()=>e(N));var Z=P(W,2);C(Z,1,"svelte-1r0zgdq");var Ie=S(Z);ie(Ie,t,"foreground",{},null),X(Z,i=>n(L,i),()=>e(L)),X(R,i=>n(V,i),()=>e(V));var Te=P(R,2);{var qe=i=>{var p=Ue();I(i,p)};te(Te,i=>{se()&&i(qe)})}F(i=>{re=C(R,1,we(Se()),"svelte-1r0zgdq",re,i),Je(W,`${e(A)??""}${e(h)??""}`)},[()=>({splitscreen:G()})],_e),Ne("innerHeight",i=>n(m,i)),I(s,oe),me(),b()}Ze.__docgen={data:[{name:"id",visibility:"public",description:"Sets the unique ID of the scroller",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"splitscreen",visibility:"public",description:"Enables splitscreen view (captions appear on left on larger screens)",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"marginTop",visibility:"public",description:"Adds a margin under the scroller section",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"marginBottom",visibility:"public",description:"Adds a margin under the scroller section",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"threshold",visibility:"public",description:"Set the threshold for the transition between scroller sections (0-1)",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.7"},{name:"count",visibility:"public",description:"Binding: Total number of sections within scroller",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"index",visibility:"public",description:"Binding: Current section index (number)",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"null"},{name:"sectionId",visibility:"public",description:"Binding: Current section id, if it has one set",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"offset",visibility:"public",description:"Binding: The progress between the start of current scroller section and next (0-1)",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"progress",visibility:"public",description:"Binding: The progress through the whole scroller (0-1)",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"visible",visibility:"public",description:"Binding: Whether the scroller is visible on screen or not",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'}],name:"Scroller.svelte"};var $e=T("<h2> </h2>"),et=T('<div class="ons-scroller-section svelte-1xgphlm"><!> <!></div>'),tt=T("<section><!></section>");function it(s,t){ge(t,!1);const[a,b]=he(),l=()=>ke(f,"$sections",a);let d=o(t,"id",8,""),v=o(t,"title",8,""),q=o(t,"hideTitle",8,!1),A=o(t,"cls",8,""),h=r();const f=Le("sections");We(()=>{f&&ve(f,[...l(),e(h)])}),Pe(()=>{f&&ve(f,l().filter(_=>_!==e(h)))}),xe();var c=tt(),G=S(c);Ke(G,{width:"narrow",children:(_,se)=>{var k=et(),j=S(k);{var J=u=>{var g=$e();let H;var z=S(g);F(O=>{H=C(g,1,"section-title",null,H,O),Xe(z,v())},[()=>({"ons-u-vh":q()})],_e),I(u,g)};te(j,u=>{v()&&u(J)})}var K=P(j,2);ie(K,t,"default",{},null),I(_,k)},$$slots:{default:!0}}),X(c,_=>n(h,_),()=>e(h)),F(()=>{Ge(c,"data-id",d()),C(c,1,we(A()),"svelte-1xgphlm")}),I(s,c),me(),b()}it.__docgen={data:[{name:"id",visibility:"public",description:"Sets the unique ID of the section (identifiable in associated scroll events)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"title",visibility:"public",description:"Optional: Sets the title of the section",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"hideTitle",visibility:"public",description:"Allows the h2 title tag for the section to be visually hidden",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'}],name:"ScrollerSection.svelte"};export{Ze as S,it as a};
