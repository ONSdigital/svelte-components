import{p as he,Q as ge,a as l,$ as ke,l as we,b as _e,c as Y,f as C,i as m,e as v,h as xe,s as K,aj as Ve,t as L,R as $,m as ee,j as g,k as R,g as h,d as Ce,n as q,o as D,q as Le}from"./iframe-Bu7RPEYL.js";import{i as Se}from"./create-runtime-stories-tJrnYzbx.js";import{h as Oe}from"./svelte-head-ItTMlsj-.js";import{a as Ae}from"./actions-B9dXvsMt.js";import{s as F}from"./attributes-BMngCuBp.js";import{s as M}from"./class-Dzh9Da8g.js";import{D as Ie}from"./Dropdown-D07YCYgP.js";import{I as Te}from"./Input-DsYpWHKX.js";var je=Ve(g("<script><\/script><!>",1)),Ke=g("<label> </label>"),Re=g('<button type="reset" title="Clear selection" aria-label="Clear selection" class="ons-autocomplete-clear svelte-nc31vb"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 14 14" width="18"><path fill="currentColor" d="M13.6 1 l -0.71 -0.71 a 0.5 0.5 0 0 0 -0.71 0 l -5.25 5.25 l -5.25 -5.25 a 0.51 0.51 0 0 0 -0.71 0 l -0.71 0.71 a 0.5 0.5 0 0 0 0 0.71 l 5.25 5.25 l -5.25 5.25 a 0.5 0.5 0 0 0 0 0.71 l 0.71 0.71 a 0.5 0.5 0 0 0 0.71 0 l 5.25 -5.25 l 5.25 5.25 a 0.5 0.5 0 0 0 0.71 0 l 0.71 -0.71 a 0.5 0.5 0 0 0 0 -0.71 l -5.25 -5.25 l 5.25 -5.25 a 0.5 0.5 0 0 0 0 -0.71Z"></path></svg></button>'),qe=g("<div></div> <!>",1),De=g('<div><!> <div class="ons-autocomplete-wrapper svelte-nc31vb"><!></div></div>');function Fe(te,a){he(a,!1);const U=ge(),E=(e=1e3)=>new Promise(t=>setTimeout(t,e)),ae=e=>`<svg class="${e==null?void 0:e.className}" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 11.75 7.7" width="18" style="z-index:1"><path fill="currentColor" d="m1.37.15 4.5 5.1 4.5-5.1a.37.37 0 0 1 .6 0l.7.7a.45.45 0 0 1 0 .5l-5.5 6.2a.37.37 0 0 1-.6 0l-5.5-6.1a.64.64 0 0 1 0-.6l.7-.7a.64.64 0 0 1 .6 0Z"></path></svg>`;let n,k=ee(),B,S=ee(!1),u=l(a,"id",8,"autocomplete"),r=l(a,"mode",8,"default"),le=l(a,"clearable",24,()=>r()!=="search"),N=l(a,"autoClear",24,()=>r()==="search"),w=l(a,"label",24,()=>r()==="search"?"Type to select":"Select an option"),O=l(a,"hideLabel",8,!1),Z=l(a,"placeholder",24,()=>r()==="search"?"Enter text":"Select one"),s=l(a,"value",12,null),_=l(a,"options",24,()=>[]),c=l(a,"labelKey",8,"label"),z=l(a,"groupKey",8,null),ie=l(a,"renderFallback",8,!1),ne=l(a,"minLength",24,()=>r()==="search"?1:0),se=l(a,"loadOptions",8,(e,t)=>{const i=r()!=="search"&&_().map(p=>p[c()]).includes(e)?_():_().filter(p=>p[c()].match(new RegExp(`\\b${e.replace(/[^\w\s]/gi,"")}`,"i")));t(i)}),oe=l(a,"scriptUrl",8,"https://cdn.ons.gov.uk/vendor/accessible-autocomplete/3.0.1/accessible-autocomplete.min.js"),P=l(a,"clearInput",8,async()=>{await x(null),U("clear",null)}),re=l(a,"cls",8,null);async function x(e){K(S,!0),n.value=e||"",await E(110),n.focus({preventScroll:!0}),n.blur(),K(S,!1)}function ce(e){return e&&e[c()]}function Q(e,t=""){return e.replace(new RegExp(`\\b${t.replace(/[^\w\s]/gi,"")}`,"i"),i=>`<b>${i}</b>`)}function de(e){const t=(n==null?void 0:n.value)||"";return e&&(z()?`${Q((e==null?void 0:e[c()])||"",t)} <span class="muted-text">${e[z()]}</span>`:Q((e==null?void 0:e[c()])||"",t))}async function W(e){e&&s()!==e&&(s(e),U("change",s()),s()&&N()&&(await E(0),P()()))}function ue(e){e.target.value||W(null)}function G(){!h(k)&&(window!=null&&window.accessibleAutocomplete)&&(B=window.accessibleAutocomplete,K(k,!0))}function A(e){var t;B({element:e,id:u(),name:`${u()}-input`,source:se(),autoselect:!0,onConfirm:W,confirmOnBlur:!1,placeholder:Z(),displayMenu:"overlay",showAllValues:r()==="default",dropdownArrow:ae,minLength:ne(),templates:{inputValue:ce,suggestion:de}}),n=e.querySelector(`#${u()}`),x(((t=s())==null?void 0:t[c()])||""),n.addEventListener("blur",ue)}function pe(e){if(n){const t=e==null?void 0:e[c()];t&&n.value!==t?x(t):!e&&n.value&&x("")}}ke(G),we(()=>Ce(s()),()=>{pe(s())}),_e(),Se();var H=Y();Oe(e=>{var t=je(),i=C(t);R(i),L(()=>F(i,"src",oe())),$("load",i,G),v(e,t)});var fe=C(H);{var ye=e=>{var t=Y(),i=C(t);{var p=d=>{const T=D(()=>{var o;return(o=s())==null?void 0:o[c()]});Te(d,{get id(){return u()},get label(){return w()},get hideLabel(){return O()},get value(){return h(T)}})},I=d=>{Ie(d,{get id(){return u()},get options(){return _()},get label(){return w()},get hideLabel(){return O()},get placeholder(){return Z()},get value(){return s()}})};m(i,d=>{r()==="search"?d(p):d(I,!1)})}v(e,t)},be=e=>{var t=De(),i=q(t);{var p=o=>{var f=Ke();let y;var V=q(f);L(j=>{F(f,"for",u()),y=M(f,1,"ons-label",null,y,j),Le(V,w())},[()=>({"ons-u-vh":O()})],D),v(o,f)};m(i,o=>{w()&&o(p)})}var I=R(i,2),d=q(I);{var T=o=>{var f=qe(),y=C(f);let V;Ae(y,b=>A==null?void 0:A(b));var j=R(y,2);{var ve=b=>{var J=Re();$("click",J,function(...me){var X;(X=P())==null||X.apply(this,me)}),v(b,J)};m(j,b=>{le()&&!N()&&s()&&b(ve)})}L(b=>{F(y,"id",`${u()??""}-container`),V=M(y,1,"ons-autocomplete svelte-nc31vb",null,V,b)},[()=>({"hide-menu":h(S)})],D),v(o,f)};m(d,o=>{h(k)&&o(T)})}L(()=>M(t,1,`ons-field ${re()??""}`,"svelte-nc31vb")),v(e,t)};m(fe,e=>{ie()&&!h(k)?e(ye):e(be,!1)})}v(te,H),xe()}Fe.__docgen={data:[{name:"id",visibility:"public",description:"Unique id for the element",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"autocomplete"'},{name:"mode",visibility:"public",description:'The mode can be either "default" or "search"',keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"default",text:'"default"'},{kind:"const",type:"string",value:"search",text:'"search"'}],text:'"default" | "search"'},static:!1,readonly:!1,defaultValue:'"default"'},{name:"clearable",visibility:"public",description:"Defines whether the selection can be cleared",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"autoClear",visibility:"public",description:'Clear value on selection (default for "search" mode)',keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"label",visibility:"public",description:"A label to describe the element (expected for accessibility)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"hideLabel",visibility:"public",description:"Visually hide the label",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"placeholder",visibility:"public",description:"An optional placeholder text",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"value",visibility:"public",description:"A prop to bind to for the selected value",keywords:[],kind:"let",static:!1,readonly:!1,defaultValue:"null"},{name:"options",visibility:"public",description:"An array of options, formatted {id, label}",keywords:[],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1,defaultValue:"[]"},{name:"labelKey",visibility:"public",description:"The attribute of an option that defines its label/name",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"label"'},{name:"groupKey",visibility:"public",description:"The attribute of an option that defines its group (optional)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"renderFallback",visibility:"public",description:"When using SSR or pre-rendering, this option will render a text input or dropdown before the page is hydrated (allows for progressive enhancement).",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"minLength",visibility:"public",description:"Optional: Minimum query length to return results",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"..."},{name:"loadOptions",visibility:"public",description:"Optional: Override function for loading/filtering options based on the entered text",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1,defaultValue:"function"},{name:"scriptUrl",visibility:"public",description:"Optional: Override the default CDN URL for the accessible-autocomplete script",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"https://cdn.ons.gov.uk/vendor/accessible-autocomplete/3.0.1/accessible-autocomplete.min.js"'},{name:"clearInput",visibility:"public",description:"Call this function externally to clear the input",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1,defaultValue:"function"},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"}],name:"Select.svelte"};export{Fe as S};
