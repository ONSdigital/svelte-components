import{S as fe,i as be,s as me,D as Se,q as P,x as v,w as X,e as Oe,af as w,U as L,a as C,H as T,Q as Be,u as Y,r as Z,v as $,b as F,t as J,d as S,O as Ve,z as ye,B as Ie,ag as ze,C as q,f as H,j as Te,m as xe,n as De,F as Ee,o as Me,A as re,a9 as Re,I as je,J as qe}from"./index-0eb67504.js";import{a as Ae}from"./collect-stories-767b64ae.js";import{C as He}from"./Container-f0f1f8e7.js";const{window:pe}=ze,Le=i=>({}),de=i=>({}),Fe=i=>({}),ae=i=>({});function ce(i){let t;return{c(){t=v("div"),q(t,"class","ons-spacer")},m(e,s){C(e,t,s)},d(e){e&&S(t)}}}function Je(i){let t,e,s,n,a,d,c,u,y,h,g;Se(i[23]);const p=i[22].background,f=P(p,i,i[21],ae),k=i[22].foreground,r=P(k,i,i[21],de);let m=i[2]&&ce();return{c(){t=v("svelte-scroller-outer"),e=v("svelte-scroller-background-container"),s=v("svelte-scroller-background"),f&&f.c(),a=X(),d=v("svelte-scroller-foreground"),r&&r.c(),c=X(),m&&m.c(),u=Oe(),w(s,"class","svelte-koluze"),w(e,"class","background-container svelte-koluze"),w(e,"style",n=""+(i[8]+i[7])),w(d,"class","svelte-koluze"),w(t,"id",i[0]),w(t,"class","svelte-koluze"),L(t,"splitscreen",i[1])},m(l,b){C(l,t,b),T(t,e),T(e,s),f&&f.m(s,null),i[24](s),T(t,a),T(t,d),r&&r.m(d,null),i[25](d),i[26](t),C(l,c,b),m&&m.m(l,b),C(l,u,b),y=!0,h||(g=Be(pe,"resize",i[23]),h=!0)},p(l,b){f&&f.p&&(!y||b[0]&2097152)&&Y(f,p,l,l[21],y?$(p,l[21],b,Fe):Z(l[21]),ae),(!y||b[0]&384&&n!==(n=""+(l[8]+l[7])))&&w(e,"style",n),r&&r.p&&(!y||b[0]&2097152)&&Y(r,k,l,l[21],y?$(k,l[21],b,Le):Z(l[21]),de),(!y||b[0]&1)&&w(t,"id",l[0]),(!y||b[0]&2)&&L(t,"splitscreen",l[1]),l[2]?m||(m=ce(),m.c(),m.m(u.parentNode,u)):m&&(m.d(1),m=null)},i(l){y||(F(f,l),F(r,l),y=!0)},o(l){J(f,l),J(r,l),y=!1},d(l){l&&S(t),f&&f.d(l),i[24](null),r&&r.d(l),i[25](null),i[26](null),l&&S(c),m&&m.d(l),l&&S(u),h=!1,g()}}}const _=[];let j;if(typeof window<"u"){const i=()=>_.forEach(t=>t());window.addEventListener("scroll",i),window.addEventListener("resize",i)}if(typeof IntersectionObserver<"u"){const i=new Map,t=new IntersectionObserver((e,s)=>{e.forEach(n=>{const a=i.get(n.target),d=_.indexOf(a);n.isIntersecting?d===-1&&_.push(a):(a(),d!==-1&&_.splice(d,1))})},{rootMargin:"400px 0px"});j={add:({outer:e,update:s})=>{const{top:n,bottom:a}=e.getBoundingClientRect();n<window.innerHeight&&a>0&&_.push(s),i.set(e,s),t.observe(e)},remove:({outer:e,update:s})=>{if(i.get(e)){const n=_.indexOf(s);n!==-1&&_.splice(n,1),i.delete(e),t.unobserve(e)}}}}else j={add:({update:i})=>{_.push(i)},remove:({update:i})=>{const t=_.indexOf(i);t!==-1&&_.splice(t,1)}};let Ne=0,Qe=1;function Ue(i,t,e){let s,n,a,d,c,u,{$$slots:y={},$$scope:h}=t;const g=Ve();let{id:p=null}=t,{splitscreen:f=!1}=t,{marginBottom:k=!0}=t,{threshold:r=.7}=t,{count:m=0}=t,{index:l=null}=t,{sectionId:b=null}=t,{offset:N=0}=t,{progress:x=0}=t,{visible:D=!1}=t;const Q=Ae([]);ye(i,Q,o=>e(20,u=o)),Ie("sections",Q);let E,O,M,A,ee,B=0,V,R=0,U=1;function ge(o){return E&&j.remove(E),e(10,m=o.length),W(),E={outer:O,update:W},j.add(E),()=>j.remove(E)}function W(){if(!M)return;const o=O.getBoundingClientRect();ee=o.left,e(19,U=o.right-ee);const I=M.getBoundingClientRect(),te=A.getBoundingClientRect(),G=I.top<B&&I.bottom>0,ve=G&&!D,Ce=!G&&D;e(15,D=G);const ie=I.bottom-I.top;te.bottom-te.top;const ne=n-s;e(14,x=(s-I.top)/(ie-ne)),x<=0?(e(18,R=0),e(17,V=!1)):x>=1?(e(18,R=ie-ne),e(17,V=!1)):(e(18,R=s),e(17,V=!0));for(let z=0;z<u.length;z++){const K=u[z],{top:se}=K.getBoundingClientRect(),le=u[z+1],oe=le?le.getBoundingClientRect().top:I.bottom;if(e(13,N=(a-se)/(oe-se)),oe>=a){l!==z&&(e(11,l=z),e(12,b=K.dataset.id?K.dataset.id:null),g("change",{id:p,index:l,sectionId:b}));break}}ve&&(g("enter",{id:p,index:l,sectionId:b}),g("change",{id:p,index:l,sectionId:b})),Ce&&g("exit",{id:p,index:l,sectionId:b})}function _e(){e(4,B=pe.innerHeight)}function he(o){H[o?"unshift":"push"](()=>{A=o,e(6,A)})}function ke(o){H[o?"unshift":"push"](()=>{M=o,e(5,M)})}function we(o){H[o?"unshift":"push"](()=>{O=o,e(3,O)})}return i.$$set=o=>{"id"in o&&e(0,p=o.id),"splitscreen"in o&&e(1,f=o.splitscreen),"marginBottom"in o&&e(2,k=o.marginBottom),"threshold"in o&&e(16,r=o.threshold),"count"in o&&e(10,m=o.count),"index"in o&&e(11,l=o.index),"sectionId"in o&&e(12,b=o.sectionId),"offset"in o&&e(13,N=o.offset),"progress"in o&&e(14,x=o.progress),"visible"in o&&e(15,D=o.visible),"$$scope"in o&&e(21,h=o.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16&&(s=Math.round(Ne*B)),i.$$.dirty[0]&16&&(n=Math.round(Qe*B)),i.$$.dirty[0]&65552&&(a=Math.round(r*B)),i.$$.dirty[0]&65536&&W(),i.$$.dirty[0]&393216&&e(8,d=`
		position: ${V?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${R}px);
		z-index: 1;
	`),i.$$.dirty[0]&655360&&e(7,c=V?`width:${U}px;`:""),i.$$.dirty[0]&1048584&&O&&ge(u)},[p,f,k,O,B,M,A,c,d,Q,m,l,b,N,x,D,r,V,R,U,u,h,y,_e,he,ke,we]}class We extends fe{constructor(t){super(),be(this,t,Ue,Je,me,{id:0,splitscreen:1,marginBottom:2,threshold:16,count:10,index:11,sectionId:12,offset:13,progress:14,visible:15},null,[-1,-1])}}We.__docgen={version:3,name:"Scroller.svelte",data:[{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the unique ID of the scroller",name:"id",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Enables splitscreen view (captions appear on left on larger screens)",name:"splitscreen",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Adds a margin under the scroller section",name:"marginBottom",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Set the threshold for the transition between scroller sections (0-1)",name:"threshold",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:.7},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: Total number of sections within scroller",name:"count",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: Current section index (number)",name:"index",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:null},{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Binding: Current section id, if it has one set",name:"sectionId",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: The progress between the start of current scroller section and next (0-1)",name:"offset",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: The progress through the whole scroller (0-1)",name:"progress",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Binding: Whether the scroller is visible on screen or not",name:"visible",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"change"},{visibility:"public",description:null,keywords:[],name:"enter"},{visibility:"public",description:null,keywords:[],name:"exit"}],slots:[{keywords:[],visibility:"public",description:"",name:"background"},{keywords:[],visibility:"public",description:"",name:"foreground"}],refs:[]};function ue(i){let t,e;return{c(){t=v("h2"),e=je(i[4]),q(t,"class","section-title"),L(t,"ons-u-vh",i[5])},m(s,n){C(s,t,n),T(t,e)},p(s,n){n&16&&qe(e,s[4]),n&32&&L(t,"ons-u-vh",s[5])},d(s){s&&S(t)}}}function Ge(i){let t,e,s,n=i[4]&&ue(i);const a=i[8].default,d=P(a,i,i[10],null);return{c(){t=v("div"),n&&n.c(),e=X(),d&&d.c(),q(t,"class","ons-scroller-section svelte-oszuw0")},m(c,u){C(c,t,u),n&&n.m(t,null),T(t,e),d&&d.m(t,null),s=!0},p(c,u){c[4]?n?n.p(c,u):(n=ue(c),n.c(),n.m(t,e)):n&&(n.d(1),n=null),d&&d.p&&(!s||u&1024)&&Y(d,a,c,c[10],s?$(a,c[10],u,null):Z(c[10]),null)},i(c){s||(F(d,c),s=!0)},o(c){J(d,c),s=!1},d(c){c&&S(t),n&&n.d(),d&&d.d(c)}}}function Ke(i){let t,e,s;return e=new He({props:{theme:i[1],themeOverrides:i[2],allowClientOverrides:i[3],width:"narrow",$$slots:{default:[Ge]},$$scope:{ctx:i}}}),{c(){t=v("section"),Te(e.$$.fragment),q(t,"data-id",i[0])},m(n,a){C(n,t,a),xe(e,t,null),i[9](t),s=!0},p(n,[a]){const d={};a&2&&(d.theme=n[1]),a&4&&(d.themeOverrides=n[2]),a&8&&(d.allowClientOverrides=n[3]),a&1072&&(d.$$scope={dirty:a,ctx:n}),e.$set(d),(!s||a&1)&&q(t,"data-id",n[0])},i(n){s||(F(e.$$.fragment,n),s=!0)},o(n){J(e.$$.fragment,n),s=!1},d(n){n&&S(t),De(e),i[9](null)}}}function Pe(i,t,e){let s,{$$slots:n={},$$scope:a}=t,{id:d=null}=t,{theme:c=null}=t,{themeOverrides:u=null}=t,{allowClientOverrides:y=!1}=t,{title:h=""}=t,{hideTitle:g=!1}=t,p;const f=Ee("sections");ye(i,f,r=>e(11,s=r)),Me(()=>{f&&re(f,s=[...s,p],s)}),Re(()=>{f&&re(f,s=s.filter(r=>r!==p),s)});function k(r){H[r?"unshift":"push"](()=>{p=r,e(6,p)})}return i.$$set=r=>{"id"in r&&e(0,d=r.id),"theme"in r&&e(1,c=r.theme),"themeOverrides"in r&&e(2,u=r.themeOverrides),"allowClientOverrides"in r&&e(3,y=r.allowClientOverrides),"title"in r&&e(4,h=r.title),"hideTitle"in r&&e(5,g=r.hideTitle),"$$scope"in r&&e(10,a=r.$$scope)},[d,c,u,y,h,g,p,f,n,k,a]}class Xe extends fe{constructor(t){super(),be(this,t,Pe,Ke,me,{id:0,theme:1,themeOverrides:2,allowClientOverrides:3,title:4,hideTitle:5})}}Xe.__docgen={version:3,name:"ScrollerSection.svelte",data:[{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the unique ID of the section",name:"id",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:'{"light"|"dark"|"lightblue"}'}],visibility:"public",description:"Sets a predefined theme",name:"theme",kind:"let",static:!1,readonly:!1,type:{kind:"union",text:'"light"|"dark"|"lightblue"',type:[{kind:"type",text:'"light"',type:'"light"'},{kind:"type",text:'"dark"',type:'"dark"'},{kind:"type",text:'"lightblue"',type:'"lightblue"'}]},defaultValue:null},{keywords:[{name:"type",description:"{object}"}],visibility:"public",description:"Define additional props to override the base theme",name:"themeOverrides",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"object",type:"object"},defaultValue:null},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Allows client imported CSS for embeddable content",name:"allowClientOverrides",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the title of the section",name:"title",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:""},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Allows the h2 title tag for the section to be visually hidden",name:"hideTitle",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[{keywords:[],visibility:"public",description:"",name:"default"}],refs:[]};export{We as S,Xe as a};
//# sourceMappingURL=ScrollerSection-eb34ff5e.js.map
