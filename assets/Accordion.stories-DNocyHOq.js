import{p as S,a as m,aj as F,$ as P,j as p,t as _,e as u,h as I,n as g,k as y,o as G,g as v,m as D,s as T,T as Z,i as N,q as E,f as q,Z as R,_ as z}from"./iframe-DRONkSsd.js";import{i as x,w as J,c as K,d as Q}from"./create-runtime-stories-DLzChHzu.js";import{s as M}from"./slot-BP_Qo1ZM.js";import{s as b}from"./attributes-DfYTFl74.js";import{s as H}from"./class-Dzh9Da8g.js";import{b as B}from"./this-yMqGqEwP.js";import{s as V,e as U}from"./utils-VWytQRnm.js";import"./attributes-Co-1QMVx.js";import"./_commonjsHelpers-CqkleIqs.js";class X{constructor(t,e){this.openDetailsEls=0,this.button=t,this.buttonInner=t.querySelector(".ons-accordion__toggle-all-inner"),this.group=t.getAttribute("data-group"),this.detailsEls=e.filter(s=>s.group===this.group),this.totalDetailsEls=this.detailsEls.length,this.buttonOpenEl=this.buttonInner.querySelector(".ons-btn__text"),this.buttonOpen=this.buttonOpenEl.innerHTML.trim(),this.closeButton=t.getAttribute("data-close-all"),this.open=this.detailsEls.find(s=>s.open===!0),this.detailsEls.forEach(s=>{s.onOpen=this.onOpen.bind(this),s.onClose=this.onClose.bind(this)}),this.open&&(this.openDetailsEls=this.totalDetailsEls),this.button.addEventListener("click",this.handleButtonClick.bind(this)),this.setButton(),this.button.classList.remove("ons-u-d-no")}handleButtonClick(t){t.preventDefault();const e=!this.canClose();this.detailsEls.forEach(s=>{s.setOpen(e)})}onOpen(){this.openDetailsEls++,this.setButton()}onClose(){this.openDetailsEls--,this.setButton()}canClose(){return this.openDetailsEls===this.totalDetailsEls}setButton(){this.canClose()?(this.buttonInner.innerHTML=this.closeButton,this.button.setAttribute("data-ga-label",this.buttonOpen),this.button.setAttribute("aria-expanded","true")):(this.buttonInner.innerHTML=this.buttonOpen,this.button.setAttribute("data-ga-label",this.closeButton),this.button.setAttribute("aria-expanded","false"))}}class Y{constructor(t){this.saveState=t.getAttribute("data-save-state")==="true",this.open=t.getAttribute("data-open")==="true",this.group=t.getAttribute("data-group"),this.details=t,this.detailsHeader=this.details.querySelector(".ons-js-details-heading"),this.content=this.details.querySelector(".ons-js-details-content"),this.detailsTitle=this.details.querySelector(".ons-js-corrections-details-title");const e=t.getAttribute("id");this.details.setAttribute("role","group"),this.detailsHeader.setAttribute("role","link"),this.detailsHeader.setAttribute("aria-controls",e),this.detailsHeader.setAttribute("tabindex",0),localStorage.getItem(e)||this.open?this.setOpen(!0):this.setOpen(!1),this.detailsHeader.addEventListener("click",this.toggle.bind(this)),this.detailsHeader.addEventListener("keydown",this.keyboardInteraction.bind(this)),this.details.classList.add("ons-details--initialised")}toggle(t){t.preventDefault(),this.setOpen(!this.isOpen)}setOpen(t){if(t!==this.isOpen){const e=t?"Open":"Close",s=t?"add":"remove",o=t?"set":"remove",n=t?"Close detail":"Show detail";this.isOpen=t,this.details[`${o}Attribute`]("open",""),this.details.classList[s]("ons-details--open"),this.detailsHeader.setAttribute("aria-expanded",t),this.content.setAttribute("aria-hidden",!t),this.detailsHeader.setAttribute("data-ga-action",`${e} panel`),this.detailsTitle&&(this.detailsTitle.textContent=n),this.onOpen&&this.onClose&&(t?this.onOpen():this.onClose())}this.saveState===!0&&t===!0?localStorage.setItem(this.details.getAttribute("id"),!0):localStorage.removeItem(this.details.getAttribute("id"))}keyboardInteraction(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),this.toggle(t);break}}}var tt=p('<div><button type="button" data-close-all="Hide all"><span class="ons-btn__inner ons-accordion__toggle-all-inner"><span class="ons-btn__text">Show all</span></span></button> <!></div>');function O(l,t){S(t,!1);let e=m(t,"id",24,V),s=m(t,"cls",8,null),o=m(t,"showToggle",8,!1),n=D(),a=D();F("dataGroup",e()),P(async()=>{await U(0);const k=[...v(n).querySelectorAll(".ons-js-details")].map(h=>new Y(h));new X(v(a),k)}),x();var i=tt(),d=g(i);let c;B(d,r=>T(a,r),()=>v(a));var A=y(d,2);M(A,t,"default",{},null),B(i,r=>T(n,r),()=>v(n)),_(r=>{b(i,"id",e()),H(i,1,`ons-accordion ${s()??""}`),c=H(d,1,"ons-btn ons-accordion__toggle-all ons-u-mb-s ons-u-d-no ons-btn--secondary ons-btn--small svelte-ijgx9p",null,c,r),b(d,"data-group",e())},[()=>({"hide-toggle":!o()})],G),u(l,i),I()}O.__docgen={data:[{name:"id",visibility:"public",description:"Optional: Set the unique ID of the accordion",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"cls",visibility:"public",description:"Optional: Set an additional CSS class for the component",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"showToggle",visibility:"public",description:'Option to include a "show all" toggle above the accordion',keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"}],name:"Accordion.svelte"};var et=p('<h3 class="ons-details__title ons-u-fs-r--b"> </h3>'),st=p('<h2 class="ons-details__title ons-u-fs-r--b"> </h2>'),it=p('<div class="ons-details ons-js-details ons-details--accordion"><div class="ons-details__heading ons-js-details-heading" role="button"><!> <span class="ons-details__icon"><svg class="ons-icon" viewBox="0 0 8 13" xmlns="http://www.w3.org/2000/svg" focusable="false" fill="currentColor" role="img" title="ons-icon-chevron"><path d="M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z" transform="translate(-5.02 -1.59)"></path></svg></span></div> <div class="ons-details__content ons-js-details-content"><!></div></div>');function w(l,t){S(t,!1);let e=m(t,"title",8,null),s=m(t,"id",24,()=>V(e())),o=m(t,"headingTag",8,"h2");const n=Z("dataGroup");x();var a=it(),i=g(a),d=g(i);{var c=h=>{var f=et(),C=g(f);_(()=>E(C,e())),u(h,f)},A=h=>{var f=st(),C=g(f);_(()=>E(C,e())),u(h,f)};N(d,h=>{o()==="h3"?h(c):h(A,!1)})}var r=y(i,2),k=g(r);M(k,t,"default",{},null),_(()=>{b(a,"id",s()),b(a,"data-group",n),b(r,"id",`${s()??""}-content`)}),u(l,a),I()}w.__docgen={data:[{name:"title",visibility:"public",description:"Sets the title of the accordion item",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"null"},{name:"id",visibility:"public",description:"Sets the unique ID of the accordion item",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"headingTag",visibility:"public",description:"Set the heading level for the accordion items",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"h2",text:'"h2"'},{kind:"const",type:"string",value:"h3",text:'"h3"'}],text:'"h2" | "h3"'},static:!1,readonly:!1,defaultValue:'"h2"'}],name:"AccordionItem.svelte"};const ot=`An accordion component.\r
\r
Based on [this ONS Design System component](https://service-manual.ons.gov.uk/design-system/components/accordion).\r
\r
<!-- prettier-ignore -->\r
\`\`\`html\r
<script>\r
  import { Accordion, AccordionItem } from "@onsvisual/svelte-components";\r
<\/script>\r
\r
<Accordion>\r
  <AccordionItem title="First item">\r
    <p>Contents of first item.</p>\r
  </AccordionItem>\r
  <AccordionItem title="Second item">\r
    <p>Contents of second item.</p>\r
  </AccordionItem>\r
</Accordion>\r
\`\`\`\r
`,L=(l,t=R)=>{O(l,z(t,{children:(e,s)=>{var o=rt(),n=q(o);w(n,{title:"First item",children:(i,d)=>{var c=at();u(i,c)},$$slots:{default:!0}});var a=y(n,2);w(a,{title:"Second item",children:(i,d)=>{var c=lt();u(i,c)},$$slots:{default:!0}}),u(e,o)},$$slots:{default:!0}}))},nt={title:"Layout/Accordion",component:O,tags:["autodocs"],argTypes:{},parameters:J(ot)},{Story:j}=Q();var at=p("<p>Contents of first item.</p>"),lt=p("<p>Contents of second item.</p>"),rt=p("<!> <!>",1),dt=p("<!> <!>",1);function $(l,t){S(t,!1),x();var e=dt(),s=q(e);j(s,{name:"Default",args:{},get template(){return L},parameters:{__svelteCsf:{rawCode:`<Accordion {...args}>\r
	<AccordionItem title="First item">\r
		<p>Contents of first item.</p>\r
	</AccordionItem>\r
	<AccordionItem title="Second item">\r
		<p>Contents of second item.</p>\r
	</AccordionItem>\r
</Accordion>`}}});var o=y(s,2);j(o,{name:"With 'show all' toggle",args:{showToggle:!0},get template(){return L},parameters:{__svelteCsf:{rawCode:`<Accordion {...args}>\r
	<AccordionItem title="First item">\r
		<p>Contents of first item.</p>\r
	</AccordionItem>\r
	<AccordionItem title="Second item">\r
		<p>Contents of second item.</p>\r
	</AccordionItem>\r
</Accordion>`}}}),u(l,e),I()}$.__docgen={data:[],name:"Accordion.stories.svelte"};const W=K($,nt),_t=["Default","WithShowAllToggle"],yt={...W.Default,tags:["svelte-csf-v5"]},At={...W.WithShowAllToggle,tags:["svelte-csf-v5"]};export{yt as Default,At as WithShowAllToggle,_t as __namedExportsOrder,nt as default};
