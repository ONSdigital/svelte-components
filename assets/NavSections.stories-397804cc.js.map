{"version":3,"file":"NavSections.stories-397804cc.js","sources":["../../src/layout/NavSections/docs/component.md?raw","../../src/layout/NavSections/NavSections.svelte","../../src/layout/NavSections/SectionBacklink.svelte","../../src/layout/NavSections/NavSection.svelte","../../src/layout/NavSections/NavSections.stories.svelte"],"sourcesContent":["export default \"Use this layou component to allow users to quickly jump to sections of a long page of content.\\n\\nAs the user scrolls down the page, the table of contents will remain accessible at the top of the viewport and will highlight the subheading of the section in view.\\n\\nNote: These examples will not preview correctly in the iframes on this page. You can select the examples from the menu instead.\\n\\n<!-- prettier-ignore -->\\n```html\\n<script>\\n  import { NavSections, NavSection } from \\\"@onsvisual/svelte-components\\\";\\n</script>\\n\\n<NavSections>\\n  <NavSection title=\\\"Section one\\\">\\n    <p>Contents of first section.</p>\\n  </NavSection>\\n  <NavSection title=\\\"Subsection A\\\" subsection>\\n    <p>Contents of subsection.</p>\\n  </NavSection>\\n  <NavSection title=\\\"Subsection B\\\" subsection>\\n    <p>Contents of subsection.</p>\\n  </NavSection>\\n  <NavSection title=\\\"Section two\\\">\\n    <p>Contents of third section.</p>\\n  </NavSection>\\n</NavSections>\\n```\\n\"","<script>\n  import { onMount, setContext } from \"svelte\";\n  import { writable } from \"svelte/store\";\n  import Container from \"../../wrappers/Container/Container.svelte\";\n\n  /**\n   * ID for back-linking to table of contents\n   * @type {string}\n   */\n  export let id = \"toc\";\n  /**\n   * (Optional) Sets a css class for the section\n   * @type {string}\n   */\n  export let cls = null;\n  /**\n   * Sets the width of the container\n   * @type {\"narrow\"|\"medium\"|\"wide\"|\"wider\"|\"full\"}\n   */\n  export let width = \"wide\";\n  /**\n   * A label for the page contents nav\n   * @type {string}\n   */\n  export let contentsLabel = \"Page contents\";\n  /**\n   * Don't include table of contents (allows for custom uses of nav panel)\n   * @type {boolean}\n   */\n  export let noContents = false;\n  /**\n   * Sets a predefined theme\n   * @type {\"light\"|\"dark\"|\"lightblue\"}\n   */\n  export let theme = null;\n  /**\n   * Define additional props to override the base theme\n   * @type {object}\n   */\n  export let themeOverrides = null;\n  /**\n   * Overrides the background CSS for the section\n   * @type {string}\n   */\n  export let background = null;\n  /**\n   * Allows client imported CSS for embeddable content\n   * @type {boolean}\n   */\n  export let allowClientOverrides = false;\n  /**\n   * Optional margin above section\n   * @type {boolean}\n   */\n  export let marginTop = false;\n  /**\n   * Optional margin below section\n   * @type {boolean}\n   */\n  export let marginBottom = true;\n\n  let active;\n\n  setContext(\"tocId\", id);\n\n  const sections = writable([]);\n  setContext(\"sections\", sections);\n\n  const observer = writable();\n  setContext(\"observer\", observer);\n\n  onMount(() => {\n    if (!noContents) {\n      $observer = new IntersectionObserver(\n        (entries, observer) => {\n          for (let i = 0; i < entries.length; i++) {\n            if (entries[i].isIntersecting) {\n              active = entries[i].target.id;\n              break;\n            }\n          }\n        },\n        {\n          root: null,\n          rootMargin: `0% 0% -70% 0%`,\n          threshold: 0,\n        }\n      );\n    }\n  });\n</script>\n\n<Container\n  cls=\"{cls}\"\n  theme=\"{theme}\"\n  themeOverrides=\"{themeOverrides}\"\n  allowClientOverrides=\"{allowClientOverrides}\"\n  width=\"{width}\"\n  marginTop=\"{marginTop}\"\n  marginBottom=\"{marginBottom}\"\n  background=\"{background}\"\n>\n  <div class=\"ons-grid ons-js-toc-container ons-u-ml-no\">\n    <slot name=\"header\" />\n    <div class=\"ons-grid__col ons-col-4@m ons-u-pl-no ons-grid__col--sticky@m\" id=\"{id}\">\n      <aside class=\"ons-toc-container\" role=\"complementary\">\n        <nav class=\"ons-toc\" aria-label=\"Pages in this guide\">\n          <slot name=\"before-nav\" />\n          {#if !noContents}\n            {#if contentsLabel}\n              <h2 class=\"ons-toc__title ons-u-fs-r--b ons-u-mb-s\">\n                {contentsLabel}\n              </h2>\n            {/if}\n            <ol class=\"ons-list ons-u-mb-m ons-list--dashed\">\n              {#each $sections as section}\n                <li\n                  class=\"ons-list__item\"\n                  class:ons-list__item-indented=\"{section.dataset.subsection === 'true'}\"\n                >\n                  <a\n                    href=\"#{section.id}\"\n                    class=\"ons-list__link\"\n                    class:ons-toc__link-active=\"{section.id === active}\"\n                  >\n                    {section.title}\n                  </a>\n                </li>\n              {/each}\n            </ol>\n          {/if}\n          <slot name=\"after-nav\" />\n        </nav>\n      </aside>\n    </div>\n    <div class=\"ons-nav-sections ons-grid__col ons-col-8@m ons-u-pl-no\">\n      <slot name=\"before\" />\n      {#if $observer}\n        <slot />\n      {/if}\n      <slot name=\"after\" />\n    </div>\n    <slot name=\"footer\" />\n  </div>\n</Container>\n\n<style>\n  @media (min-width: 740px) {\n    .ons-col-4\\@m {\n      max-width: 280px;\n      width: 280px;\n    }\n    .ons-col-8\\@m {\n      max-width: calc(100% - 280px);\n      width: calc(100% - 280px);\n    }\n  }\n  .ons-list__item-indented {\n    margin-left: 50px !important;\n  }\n  .ons-nav-sections :global(section:first-of-type h2) {\n    margin-top: 27px !important;\n  }\n</style>\n","<script>\n  /**\n   * ID for contents nav section (for back links)\n   * @type {string}\n   */\n  export let tocId = \"toc\";\n</script>\n\n<div class=\"ons-u-mt-l ons-u-d-no@m\">\n  <div class=\"ons-back-to\">\n    <a href=\"#{tocId}\" class=\"ons-back-to__link\">\n      <span class=\"ons-back-to__icon\"\n        ><svg\n          class=\"ons-svg-icon ons-u-mr-xs\"\n          width=\"16\"\n          height=\"17\"\n          viewBox=\"0 0 16 17\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          focusable=\"false\"\n          aria-hidden=\"true\"\n          role=\"presentation\"\n        >\n          <path\n            d=\"M0 8.07275L1.41 9.48275L7 3.90275V16.0728H9V3.90275L14.58 9.49275L16 8.07275L8 0.0727539L0 8.07275Z\"\n            fill=\"currentColor\"></path>\n        </svg>\n      </span>Back to contents</a\n    >\n  </div>\n</div>\n","<script>\n  import { onMount, onDestroy, getContext } from \"svelte\";\n  import { slugify } from \"../../js/utils.js\";\n  import SectionBacklink from \"./SectionBacklink.svelte\";\n\n  /**\n   * Sets the title of the section\n   * @type {string}\n   */\n  export let title = \"Section title\";\n  /**\n   * Sets the unique ID of the section (if not set, this will be slugified from the title)\n   * @type {string}\n   */\n  export let id = slugify(title);\n  /**\n   * (Optional) Sets a css class for the section\n   * @type {string}\n   */\n  export let cls = null;\n  /**\n   * Allows the h2 title tag for the section to be visually hidden\n   * @type {boolean}\n   */\n  export let hideTitle = false;\n  /**\n   * Treat a section as sub-section. It will have an h3 title, and will be indented in the contents table\n   * @type {boolean}\n   */\n  export let subsection = false;\n\n  const sections = getContext(\"sections\");\n  const observer = getContext(\"observer\");\n  const tocId = getContext(\"tocId\");\n\n  let section;\n\n  onMount(() => {\n    if (sections && observer) {\n      $sections = [...section.parentElement.childNodes].filter((c) => c.tagName === \"SECTION\");\n      $observer.observe(section);\n    }\n  });\n\n  onDestroy(() => {\n    if (sections && observer) {\n      $sections = $sections.filter((s) => s.id !== id);\n      $observer.unobserve(section);\n    }\n  });\n</script>\n\n<section\n  id=\"{id}\"\n  title=\"{title}\"\n  data-subsection=\"{subsection}\"\n  class=\"{cls}\"\n  aria-label=\"{title}\"\n  bind:this=\"{section}\"\n>\n  {#if title}\n    {#if subsection}\n      <h3 class=\"subsection-title ons-u-fs-m\" class:ons-u-vh=\"{hideTitle}\">{title}</h3>\n    {:else}\n      <h2 class=\"section-title ons-u-mt-l ons-u-pb-no ons-u-pt-no\" class:ons-u-vh=\"{hideTitle}\">\n        {title}\n      </h2>\n    {/if}\n  {/if}\n  <slot />\n  {#if tocId}\n    <SectionBacklink tocId=\"{tocId}\" />\n  {/if}\n</section>\n","<script>\n  import { Meta, Template, Story } from \"@storybook/addon-svelte-csf\";\n\n  // @ts-ignore\n  import componentDocs from \"./docs/component.md?raw\";\n  import NavSections from \"./NavSections.svelte\";\n  import NavSection from \"./NavSection.svelte\";\n  import { withComponentDocs } from \"../../js/withParams.js\";\n</script>\n\n<Meta\n  title=\"Layout/NavSections\"\n  component=\"{NavSections}\"\n  argTypes=\"{{}}\"\n  {...withComponentDocs(componentDocs)}\n/>\n\n<Template let:args>\n  <NavSections>\n    <NavSection title=\"Section one\">\n      <p>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in\n        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n      </p>\n    </NavSection>\n    <NavSection title=\"Subsection A\" subsection>\n      <p>\n        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla\n        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt\n        mollit anim id est laborum.\n      </p>\n    </NavSection>\n    <NavSection title=\"Subsection B\" subsection>\n      <p>\n        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla\n        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt\n        mollit anim id est laborum.\n      </p>\n    </NavSection>\n    <NavSection title=\"Section two\">\n      <p>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in\n        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n      </p>\n    </NavSection>\n  </NavSections>\n</Template>\n\n<Story name=\"Default\" args=\"{{}}\" />\n"],"names":["componentDocs","ctx","create_if_block_2","i","insert","target","ol","anchor","h2","t0_value","attr","a","a_href_value","toggle_class","li","append","dirty","set_data","t0","create_if_block_1","create_if_block","div2","div0","aside","nav","div1","id","$$props","cls","width","contentsLabel","noContents","theme","themeOverrides","background","allowClientOverrides","marginTop","marginBottom","active","setContext","sections","writable","observer","onMount","$observer","entries","$$invalidate","span","tocId","h3","section_1","if_block1","title","slugify","hideTitle","subsection","getContext","section","set_store_value","$sections","c","onDestroy","s","$$value","p","NavSections","withComponentDocs","get_spread_object"],"mappings":"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"}