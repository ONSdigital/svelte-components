import{p as mt,P as qt,r as It,a as r,W as j,l as fe,b as yt,c as tt,f as ge,i as F,e as S,h as bt,X as _t,s as xe,m as he,d as B,U as Ie,g as l,k as m,t as de,o as M,u as Re,q as Xe,n as qe,j as Ce,Y as a,V as rt}from"./iframe-Ctfpl9ZJ.js";import{i as kt}from"./create-runtime-stories-DgJbsNY1.js";import{s as Ge}from"./slot-BP_Qo1ZM.js";import{s as Ut}from"./style-CcY6orqc.js";import{b as Yt}from"./this-Bh_Zmyuy.js";import{b as ht}from"./misc-DE_n4L7q.js";import{t as vt,L as Vt,c as Jt,S as Nt,a as Qt,b as Zt,s as jt,o as pt,A as $t,d as er,g as tr,T as rr,e as ar,f as lr,F as nr,E as ir}from"./DotPlotChart.svelte_svelte_type_style_lang-Bxtb_LkM.js";import{e as at,i as lt}from"./each-a10QJc0s.js";import{s as L}from"./attributes-Cz_CYo18.js";import{s as or}from"./class-Dzh9Da8g.js";import{c as sr}from"./attributes-Co-1QMVx.js";import{f as ur,l as cr}from"./linear-CZTuTj73.js";import{L as gr}from"./Legend-BTT-romR.js";import{b as dr}from"./band-D29EiVDJ.js";var fr=Ie('<polygon class="line-confidence svelte-4fmtu3"></polygon>'),xr=Ie('<g class="line-group svelte-4fmtu3"></g>'),hr=Ie("<text> </text>"),vr=Ie('<polygon class="bar-rect svelte-4fmtu3"></polygon><!>',1),mr=Ie('<!><g class="bar-group svelte-4fmtu3"></g>',1);function yr(Ze,t){mt(t,!1);const[X,je]=_t(),y=()=>j(Ke,"$custom",X),p=()=>j(Me,"$coords",X),i=()=>j(P,"$xScale",X),b=()=>j(O,"$data",X),h=()=>j(We,"$config",X),$=()=>j(z,"$zGet",X),E=()=>j(ve,"$zRange",X),q=()=>j(me,"$width",X),V=he(),Se=he(),ee=he(),te=he(),{data:O,xScale:P,zGet:z,xDomain:Fe,zRange:ve,config:We,custom:Ke,width:me}=qt("LayerCake"),ye=It();let re=r(t,"hover",8,!1),ae=r(t,"hovered",12,null),J=r(t,"select",8,!1),C=r(t,"selected",12,null),le=r(t,"highlighted",24,()=>[]),N=r(t,"overlayFill",8,!1),De=r(t,"directLabel",8),be=r(t,"xFormatTickString",8),I=r(t,"barHeight",8),Te=r(t,"suffix",8),He=r(t,"prefix",8),ne=7,Me=y().coords,A=y().idKey,R=y().colorHover?y().colorHover:"orange",Q=y().colorSelect?y().colorSelect:"black",ie=y().colorHighlight?y().colorHighlight:"black",Ae=y().lineWidth?y().lineWidth:2,oe=y().markerWidth?y().markerWidth:2.5;function Z(u,s){re()&&(ae(s?s[A]:null),ye("hover",{id:ae(),data:s,event:u}))}function Pe(u,s){J()&&(C(s?s[A]:null),ye("select",{id:C(),data:s,event:u}))}fe(()=>y(),()=>{xe(V,y().mode?y().mode:"default")}),fe(()=>B(I()),()=>{xe(Se,I()<45?19/2:I()<65&&I()>45?19/2+1:19/2+4)}),fe(()=>{},()=>{xe(ee,(u,s,D,U)=>(s=Math.abs(s-u)<oe?u+oe:s,`${u},${D} ${u},${U} ${s},${U} ${s},${D}`))}),fe(()=>{},()=>{xe(te,u=>{const s=[];for(let D=0;D<u[0].length;D++){const U=Math.min(...u.map(W=>W[D].x1)),ke=Math.max(...u.map(W=>W[D].x1));s.push({x0:U,x1:ke,y0:u[0][D].y0,y1:u[0][D].y1})}return s})}),yt(),kt();var se=tt(),_e=ge(se);{var we=u=>{var s=mr(),D=ge(s);{var U=W=>{var ue=xr();at(ue,5,()=>l(te)(p()),lt,(x,G,Y)=>{var w=fr();L(w,"data-id",Y),L(w,"opacity",.3),de((c,d)=>{L(w,"points",c),L(w,"fill",d)},[()=>l(ee)(i()(l(G).x0),i()(l(G).x1),l(G).y0,l(G).y1),()=>N()&&b()[0][Y][A]==C()?Q:N()&&le().includes(b()[0][Y][A])?ie:h().z?$()(b()[0][Y]):E()[0]],M),S(x,w)}),S(W,ue)};F(D,W=>{l(V)==="confidence"&&W(U)})}var ke=m(D);at(ke,5,p,lt,(W,ue,x)=>{var G=tt(),Y=ge(G);at(Y,1,()=>l(ue),lt,(w,c,d)=>{var Le=tt(),Be=ge(Le);{var Ee=ze=>{var Ue=vr(),v=ge(Ue);L(v,"data-id",d);var pe=m(v);{var Ye=_=>{var n=hr(),T=qe(n);de((Ve,Oe,Je,$e,Ne)=>{L(n,"x",Ve),L(n,"y",l(c).y1-(I()/2-l(Se))),L(n,"dx",Oe),L(n,"dy",Je),or(n,0,$e,"svelte-4fmtu3"),Xe(T,`${He()??""}${Ne??""}${Te()??""}`)},[()=>i()(l(c).x1)>0?i()(l(c).x1)-5:Math.abs(i()(l(c).x1)-i()(0))<q()/ne?i()(0):i()(l(c).x1),()=>i()(l(c).x1)>0?Math.abs(i()(l(c).x1)-i()(0))<q()/ne?8:0:3,()=>console.log(i()(l(c).x1)>0?Math.abs(i()(l(c).x1)-i()(0))<q()/ne?3:0:3),()=>sr(i()(l(c).x1)>0&&Math.abs(i()(l(c).x1)-i()(0))<q()/ne?"bar-label-small":"bar-label"),()=>ur(be())(l(c).x1)],M),S(_,n)};F(pe,_=>{De()==="true"&&_(Ye)})}de((_,n,T)=>{L(v,"transform",`translate(${l(V)=="barcode"||l(V)=="comparison"&&x>0?-oe/2:0} 0)`),L(v,"points",_),L(v,"stroke",b()[x][d][A]==ae()?R:b()[x][d][A]==C()?Q:ie),L(v,"stroke-width",n),L(v,"fill",T),L(v,"tabindex",re()||J()?0:-1)},[()=>l(ee)(i()(l(c).x0),i()(l(c).x1),l(c).y0,l(c).y1),()=>b()[x][d][A]==ae()||b()[x][d][A]==C()||le().includes(b()[x][d][A])?Ae:0,()=>N()&&b()[x][d][A]==C()?Q:N()&&le().includes(b()[x][d][A])?ie:h().z?$()(b()[x][d]):E()[0]],M),Re("mouseover",v,function(..._){var n;(n=re()?T=>Z(T,b()[x][d]):null)==null||n.apply(this,_)}),Re("mouseleave",v,function(..._){var n;(n=re()?T=>Z(T,null):null)==null||n.apply(this,_)}),Re("focus",v,function(..._){var n;(n=J()?T=>Z(T,b()[x][d]):null)==null||n.apply(this,_)}),Re("blur",v,function(..._){var n;(n=J()?T=>Z(T,null):null)==null||n.apply(this,_)}),Re("click",v,function(..._){var n;(n=J()?T=>Pe(T,b()[x][d]):null)==null||n.apply(this,_)}),S(ze,Ue)};F(Be,ze=>{l(V)==="confidence"&&x>0||ze(Ee)})}S(w,Le)}),S(W,G)}),S(u,s)};F(_e,u=>{p()&&u(we)})}S(Ze,se),bt(),je()}var br=Ce('<h5 class="visuallyhidden svelte-1fy6g2i"> </h5>'),_r=Ce('<div style="margin-top: 40px"></div>'),kr=Ce("<!> <!> <!> <!>",1),Sr=Ce("<!> <!> <!> <!>",1),Dr=Ce('<div class="visuallyhidden svelte-1fy6g2i"><!></div>'),Tr=Ce('<div><!> <!> <!> <!> <!> <!> <!> <div class="chart-container svelte-1fy6g2i" aria-hidden="true"><!></div> <!> <!></div> <!>',1);function Gr(Ze,t){mt(t,!1);const[X,je]=_t(),y=()=>j(T,"$xDomain",X),p=he(),i=he(),b=he();let h=r(t,"data",12),$=r(t,"barHeight",12,40),E=r(t,"height",12,null),q=r(t,"ssr",12,!1),V=r(t,"ssrWidth",12,300),Se=r(t,"ssrHeight",28,()=>typeof E()=="number"?E():300),ee=r(t,"animation",12,!0),te=r(t,"duration",12,800),O=r(t,"xKey",12,"x"),P=r(t,"yKey",12,"y"),z=r(t,"zKey",12,null),Fe=r(t,"idKey",28,P),ve=r(t,"xScale",12,"linear"),We=r(t,"xFormatTick",12,Jt),Ke=r(t,"yWrapTicks",12,!0),me=r(t,"xMax",12,null),ye=r(t,"xMin",12,null),re=r(t,"xAxis",12,!0),ae=r(t,"yAxis",12,!0),J=r(t,"xTicks",12,4),C=r(t,"zDomain",12,null),le=r(t,"textColor",12,"#666"),N=r(t,"tickColor",12,"#d9d9d9"),De=r(t,"tickDashed",12,!1),be=r(t,"title",12,null),I=r(t,"subtitle",12,null),Te=r(t,"alt",12,null),He=r(t,"footer",12,null),ne=r(t,"legend",12,!1),Me=r(t,"table",12,!1),A=r(t,"snapTicks",12,!1),R=r(t,"mode",12,"default"),Q=r(t,"padding",28,()=>({top:0,bottom:20,left:35,right:0})),ie=r(t,"color",12,null),Ae=r(t,"colors",28,()=>ie()?[ie()]:["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]),oe=r(t,"markerWidth",12,2.5),Z=r(t,"spacing",12,.2),Pe=r(t,"interactive",12,!0),se=r(t,"xPrefix",12,""),_e=r(t,"xSuffix",12,""),we=r(t,"yPrefix",12,""),u=r(t,"ySuffix",12,""),s=r(t,"hover",12,!1),D=r(t,"hovered",12,null),U=r(t,"colorHover",12,"orange"),ke=r(t,"select",12,!1),W=r(t,"selected",12,null),ue=r(t,"colorSelect",12,"black"),x=r(t,"highlighted",28,()=>[]),G=r(t,"colorHighlight",12,"black"),Y=r(t,"overlayFill",12,!1),w=r(t,"output",12,null),c=r(t,"xAxisLabel",12,""),d=r(t,"yAxisLabel",12,""),Le=r(t,"directLabel",12),Be=r(t,"xFormatTickString",12),Ee=he();const ze={duration:te(),easing:Zt},Ue=vt(void 0,ze),v=(e,o,g)=>g.indexOf(e)==o;function pe(e,o){let g=[];return o.forEach(f=>{let H=0,ce=0;e.filter(K=>K[P()]==f).map(K=>K[O()]).forEach(K=>{K>=0?H+=K:ce+=K}),H!=0&&g.push(H),ce!=0&&g.push(ce)}),g}function Ye(e,o,g,f){let H=o=="stacked"&&z()?pe(e,e.map(K=>K[P()]).filter(v)):e.map(K=>K[g]),ce=ye()?ye():Math.min(...H)>0?0:Math.min(...H),Qe=f||(Math.max(...H)<0?0:Math.max(...H));return[ce,Qe]}function _(e,o,g,f){let H=Ye(e,o,g,f);(H[0]!=n[0]||H[1]!=n[1])&&(T.set(H,{duration:ee()?te():0}),n=H)}let n=Ye(h(),R(),O(),me());const T=vt(n,ze);fe(()=>(B(h()),B(R()),B(O()),B(me())),()=>{_(h(),R(),O(),me())}),fe(()=>(B(h()),B(P())),()=>{xe(p,h().map(e=>e[P()]).filter(v))}),fe(()=>(B(C()),B(z()),B(h())),()=>{xe(i,Array.isArray(C())?C():z()&&typeof C()=="function"?h().map(e=>e[z()]).filter(v).sort(C()):z()?h().map(e=>e[z()]).filter(v):null)}),fe(()=>(B(h()),l(i),B(z())),()=>{xe(b,tr(h(),l(i),z()))}),yt(),kt();var Ve=Tr(),Oe=ge(Ve),Je=qe(Oe);{var $e=e=>{rr(e,{children:(o,g)=>{var f=rt();de(()=>Xe(f,be())),S(o,f)},$$slots:{default:!0}})};F(Je,e=>{be()&&e($e)})}var Ne=m(Je,2);{var St=e=>{ar(e,{children:(o,g)=>{var f=rt();de(()=>Xe(f,I())),S(o,f)},$$slots:{default:!0}})};F(Ne,e=>{I()&&e(St)})}var nt=m(Ne,2);{var Dt=e=>{var o=br(),g=qe(o);de(()=>Xe(g,Te())),S(e,o)};F(nt,e=>{Te()&&e(Dt)})}var it=m(nt,2);Ge(it,t,"options",{},null);var ot=m(it,2);{var Tt=e=>{const o=M(()=>R()=="barcode"),g=M(()=>R()=="comparison"),f=M(()=>R()=="confidence");gr(e,{get domain(){return l(i)},get colors(){return Ae()},get markerWidth(){return oe()},horizontal:!1,get line(){return l(o)},get comparison(){return l(g)},get confidence(){return l(f)},get yAxisLabel(){return d()}})};F(ot,e=>{ne()&&l(i)&&e(Tt)})}var st=m(ot,2);Ge(st,t,"legend",{},null);var ut=m(st,2);{var Ht=e=>{var o=_r();S(e,o)};F(ut,e=>{d()&&e(Ht)})}var et=m(ut,2),At=qe(et);const Lt=M(()=>q()?Se():null),zt=M(()=>q()?V():null),Ct=M(()=>typeof ve()=="function"?ve()():ve()=="log"?jt():cr()),Ft=M(()=>dr().paddingInner(Z()).paddingOuter(Z()).round(!0)),Wt=M(pt),Kt=M(()=>({type:"bar",mode:R(),idKey:Fe(),coords:Ue,markerWidth:oe(),colorSelect:ue(),colorHover:U(),colorHighlight:G(),animation:ee(),duration:te()}));Vt(At,{get padding(){return Q()},get ssr(){return q()},get height(){return l(Lt)},get width(){return l(zt)},get x(){return O()},get y(){return P()},get z(){return z()},get xDomain(){return y()},get yDomain(){return l(p)},get xScale(){return l(Ct)},get yScale(){return l(Ft)},get zScale(){return l(Wt)},get zDomain(){return l(i)},get zRange(){return Ae()},get data(){return l(b)},get flatData(){return h()},get custom(){return l(Kt)},children:(e,o)=>{var g=Sr(),f=ge(g);Nt(f,{});var H=m(f,2);Ge(H,t,"back",{},null);var ce=m(H,2);Qt(ce,{get pointerEvents(){return Pe()},children:(K,Hr)=>{var gt=kr(),dt=ge(gt);{var Rt=k=>{$t(k,{get ticks(){return J()},get formatTick(){return We()},get snapTicks(){return A()},get prefix(){return se()},get suffix(){return _e()},get textColor(){return le()},get tickColor(){return N()},get tickDashed(){return De()},get xAxisLabel(){return c()}})};F(dt,k=>{re()&&k(Rt)})}var ft=m(dt,2);{var Gt=k=>{er(k,{gridlines:!1,get prefix(){return we()},get suffix(){return u()},get textColor(){return le()},get tickColor(){return N()},get tickDashed(){return De()},get wrapTicks(){return Ke()},get yAxisLabel(){return d()}})};F(ft,k=>{ae()&&k(Gt)})}var xt=m(ft,2);yr(xt,{get select(){return ke()},get selected(){return W()},get hover(){return s()},get hovered(){return D()},get highlighted(){return x()},get directLabel(){return Le()},get xFormatTickString(){return Be()},get overlayFill(){return Y()},get suffix(){return _e()},set suffix(k){_e(k)},get prefix(){return se()},set prefix(k){se(k)},get barHeight(){return $()},set barHeight(k){$(k)},$$events:{hover(k){ht.call(this,t,k)},select(k){ht.call(this,t,k)}},$$legacy:!0});var Xt=m(xt,2);Ge(Xt,t,"svg",{},null),S(K,gt)},$$slots:{default:!0}});var Qe=m(ce,2);Ge(Qe,t,"front",{},null),S(e,g)},$$slots:{default:!0}});var ct=m(et,2);{var Mt=e=>{var o=Dr(),g=qe(o);lr(g,{get data(){return h()},get key1(){return P()},get key2(){return O()}}),S(e,o)};F(ct,e=>{Me()&&e(Mt)})}var Pt=m(ct,2);{var wt=e=>{nr(e,{children:(o,g)=>{var f=rt();de(()=>Xe(f,He())),S(o,f)},$$slots:{default:!0}})};F(Pt,e=>{He()&&e(wt)})}Yt(Oe,e=>xe(Ee,e),()=>l(Ee));var Bt=m(Oe,2);{var Et=e=>{const o=M(()=>[Fe(),P(),z(),O()]);ir(e,{get el(){return l(Ee)},get data(){return h()},get keys(){return l(o)},get title(){return be()},get output(){return w()}})};F(Bt,e=>{w()&&e(Et)})}de(()=>Ut(et,`height: ${(typeof E()=="number"?`${E()}px`:E()?E():l(p)?`${Q().top+Q().bottom+$()*l(p).length}px`:"300px")??""}`)),S(Ze,Ve);var Ot=bt({get data(){return h()},set data(e){h(e),a()},get barHeight(){return $()},set barHeight(e){$(e),a()},get height(){return E()},set height(e){E(e),a()},get ssr(){return q()},set ssr(e){q(e),a()},get ssrWidth(){return V()},set ssrWidth(e){V(e),a()},get ssrHeight(){return Se()},set ssrHeight(e){Se(e),a()},get animation(){return ee()},set animation(e){ee(e),a()},get duration(){return te()},set duration(e){te(e),a()},get xKey(){return O()},set xKey(e){O(e),a()},get yKey(){return P()},set yKey(e){P(e),a()},get zKey(){return z()},set zKey(e){z(e),a()},get idKey(){return Fe()},set idKey(e){Fe(e),a()},get xScale(){return ve()},set xScale(e){ve(e),a()},get xFormatTick(){return We()},set xFormatTick(e){We(e),a()},get yWrapTicks(){return Ke()},set yWrapTicks(e){Ke(e),a()},get xMax(){return me()},set xMax(e){me(e),a()},get xMin(){return ye()},set xMin(e){ye(e),a()},get xAxis(){return re()},set xAxis(e){re(e),a()},get yAxis(){return ae()},set yAxis(e){ae(e),a()},get xTicks(){return J()},set xTicks(e){J(e),a()},get zDomain(){return C()},set zDomain(e){C(e),a()},get textColor(){return le()},set textColor(e){le(e),a()},get tickColor(){return N()},set tickColor(e){N(e),a()},get tickDashed(){return De()},set tickDashed(e){De(e),a()},get title(){return be()},set title(e){be(e),a()},get subtitle(){return I()},set subtitle(e){I(e),a()},get alt(){return Te()},set alt(e){Te(e),a()},get footer(){return He()},set footer(e){He(e),a()},get legend(){return ne()},set legend(e){ne(e),a()},get table(){return Me()},set table(e){Me(e),a()},get snapTicks(){return A()},set snapTicks(e){A(e),a()},get mode(){return R()},set mode(e){R(e),a()},get padding(){return Q()},set padding(e){Q(e),a()},get color(){return ie()},set color(e){ie(e),a()},get colors(){return Ae()},set colors(e){Ae(e),a()},get markerWidth(){return oe()},set markerWidth(e){oe(e),a()},get spacing(){return Z()},set spacing(e){Z(e),a()},get interactive(){return Pe()},set interactive(e){Pe(e),a()},get xPrefix(){return se()},set xPrefix(e){se(e),a()},get xSuffix(){return _e()},set xSuffix(e){_e(e),a()},get yPrefix(){return we()},set yPrefix(e){we(e),a()},get ySuffix(){return u()},set ySuffix(e){u(e),a()},get hover(){return s()},set hover(e){s(e),a()},get hovered(){return D()},set hovered(e){D(e),a()},get colorHover(){return U()},set colorHover(e){U(e),a()},get select(){return ke()},set select(e){ke(e),a()},get selected(){return W()},set selected(e){W(e),a()},get colorSelect(){return ue()},set colorSelect(e){ue(e),a()},get highlighted(){return x()},set highlighted(e){x(e),a()},get colorHighlight(){return G()},set colorHighlight(e){G(e),a()},get overlayFill(){return Y()},set overlayFill(e){Y(e),a()},get output(){return w()},set output(e){w(e),a()},get xAxisLabel(){return c()},set xAxisLabel(e){c(e),a()},get yAxisLabel(){return d()},set yAxisLabel(e){d(e),a()},get directLabel(){return Le()},set directLabel(e){Le(e),a()},get xFormatTickString(){return Be()},set xFormatTickString(e){Be(e),a()}});return je(),Ot}export{Gr as B};
