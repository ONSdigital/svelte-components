import{S as le,i as ce,s as re,e as pe,a as G,z as te,d as W,E as ye,I as ge,o as he,x as d,L as r,y as ne,Q as I,w as b,Z as J,P as n,Y as X,R as we,ad as se,B as ke,p as de,j as N,m as U,k as ue,l as fe,b as Q,t as q,n as z}from"./index-93ed49d9.js";import{p as be,w as ae,M as ve,T as Ce,S as Ae}from"./collect-stories-46e6ba01.js";const oe=`This component will display a cookie banner and export a function that allows you to push events to the Google Analytics dataLayer array.

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { AnalyticsBanner, AnalyticsEvent } from "@onsvisual/svelte-components";

  // Example of an analytics event triggered by another event "e"
  function doAnalyticsEvent(e) {
    // Assumes that e.detail is in the form {key1: "value1", key2: "value2", etc}
    AnalyticsEvent({event: "eventName", ...e.detail});
  }
<\/script>

<AnalyticsBanner analyticsId="{id_string}" />
<!-- Rest of page content -->
\`\`\`
`;function ie(o){let e;function t(i,u){return i[3]?Be:je}let s=t(o),l=s(o);return{c(){e=d("div"),l.c(),r(e,"class","ons-cookies-banner svelte-1syey1g"),r(e,"role","region"),r(e,"aria-label","Cookies banner"),ne(e,"display",o[2]?"block":null)},m(i,u){G(i,e,u),l.m(e,null)},p(i,u){s===(s=t(i))&&l?l.p(i,u):(l.d(1),l=s(i),l&&(l.c(),l.m(e,null))),u&4&&ne(e,"display",i[2]?"block":null)},d(i){i&&W(e),l.d()}}}function Be(o){let e,t,s,l,i,u=o[7](o[4])+"",m,y,a,f=o[7]("You can")+"",j,v,B,D=o[7]("change your cookie preferences")+"",S,C,P=o[7]("at any time")+"",T,V,L,g,k,h,A,c,w;return{c(){e=d("div"),t=d("div"),s=d("div"),l=d("p"),i=d("span"),m=I(u),y=b(),a=d("span"),j=I(f),v=b(),B=d("a"),S=I(D),C=b(),T=I(P),V=I("."),L=b(),g=d("div"),k=d("button"),h=d("span"),A=d("span"),A.textContent=`${o[7]("Hide")}`,r(B,"href",F+"/cookies"),r(a,"class","ons-cookies-banner__preferences-text"),r(l,"class","ons-cookies-banner__desc ons-u-mb-no@s ons-u-mr-s@s"),r(s,"class","ons-grid__col ons-grid__col--flex ons-col-auto ons-u-flex-shrink@s"),r(A,"class","ons-btn__text"),r(h,"class","ons-btn__inner"),r(k,"type","button"),r(k,"class","ons-btn ons-btn--secondary ons-btn--small ons-js-hide-button"),r(g,"class","ons-grid__col"),r(t,"class","ons-grid ons-grid--flex ons-grid--between ons-grid--gutterless ons-grid--no-wrap@s ons-grid--vertical-center"),r(e,"class","ons-container ons-cookies-banner__confirmation svelte-1syey1g"),J(e,"ons-page__container--wider",o[1]==="wider")},m(p,_){G(p,e,_),n(e,t),n(t,s),n(s,l),n(l,i),n(i,m),n(l,y),n(l,a),n(a,j),n(a,v),n(a,B),n(B,S),n(a,C),n(a,T),n(a,V),n(t,L),n(t,g),n(g,k),n(k,h),n(h,A),c||(w=X(k,"click",o[15]),c=!0)},p(p,_){_&16&&u!==(u=p[7](p[4])+"")&&we(m,u),_&2&&J(e,"ons-page__container--wider",p[1]==="wider")},d(p){p&&W(e),c=!1,w()}}}function je(o){let e,t,s,l,i,u,m,y,a,f,j=o[7]("We would like to set")+"",v,B,D,S=o[7]("additional cookies")+"",C,P,T=o[7]("to remember your settings and understand how you use the site. This helps us to improve our services.")+"",V,L,g,k,h,A,c,w,p,_,R,E,M,Y,O,_e=o[7]("View cookies")+"",x,Z,ee;return{c(){e=d("form"),t=d("div"),s=d("div"),l=d("div"),i=d("h2"),i.textContent=`${o[7]("Cookies on ons.gov.uk")}`,u=b(),m=d("div"),y=d("p"),y.textContent=`${o[7]("Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.")}`,a=b(),f=d("p"),v=I(j),B=b(),D=d("a"),C=I(S),P=b(),V=I(T),L=b(),g=d("div"),k=d("div"),h=d("button"),A=d("span"),c=d("span"),c.textContent=`${o[7]("Accept additional cookies")}`,w=b(),p=d("div"),_=d("button"),R=d("span"),E=d("span"),E.textContent=`${o[7]("Reject additional cookies")}`,M=b(),Y=d("div"),O=d("a"),x=I(_e),r(i,"class","ons-cookies-banner__title ons-u-mb-xs"),r(D,"href",F+"/cookies"),r(m,"class","ons-cookies-banner__statement"),r(l,"class","ons-grid__col ons-col-8@m"),r(s,"class","ons-grid"),r(c,"class","ons-btn__text"),r(A,"class","ons-btn__inner"),r(h,"type","submit"),r(h,"class","ons-btn ons-btn--small ons-js-accept-cookies ons-cookies-banner__btn"),r(h,"data-button","accept"),r(k,"class","ons-grid__col"),r(E,"class","ons-btn__text"),r(R,"class","ons-btn__inner"),r(_,"type","button"),r(_,"class","ons-btn ons-btn--small ons-js-reject-cookies ons-cookies-banner__btn"),r(_,"data-button","reject"),r(p,"class","ons-grid__col"),r(O,"class","ons-cookies-banner__link"),r(O,"href",F+"/cookies"),r(Y,"class","ons-grid__col"),r(g,"class","ons-grid ons-grid--flex ons-u-mt-s"),r(t,"class","ons-container ons-cookies-banner__primary svelte-1syey1g"),J(t,"ons-page__container--wider",o[1]==="wider"),r(e,"action",F+"/cookies/accept-all"),r(e,"method","GET"),r(e,"id","global-cookie-message"),r(e,"aria-label","cookie banner")},m(H,K){G(H,e,K),n(e,t),n(t,s),n(s,l),n(l,i),n(l,u),n(l,m),n(m,y),n(m,a),n(m,f),n(f,v),n(f,B),n(f,D),n(D,C),n(f,P),n(f,V),n(t,L),n(t,g),n(g,k),n(k,h),n(h,A),n(A,c),n(g,w),n(g,p),n(p,_),n(_,R),n(R,E),n(g,M),n(g,Y),n(Y,O),n(O,x),Z||(ee=[X(h,"click",se(o[13])),X(_,"click",se(o[14]))],Z=!0)},p(H,K){K&2&&J(t,"ons-page__container--wider",H[1]==="wider")},d(H){H&&W(e),Z=!1,ke(ee)}}}function De(o){let e,t=o[2]&&!o[0]&&ie(o);return{c(){t&&t.c(),e=pe()},m(s,l){t&&t.m(s,l),G(s,e,l)},p(s,[l]){s[2]&&!s[0]?t?t.p(s,l):(t=ie(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:te,o:te,d(s){t&&t.d(s),s&&W(e)}}}function Ee(o){window!=null&&window.dataLayer&&window.dataLayer.push(o)}let F="//www.ons.gov.uk";function Ie(){return-1<document.cookie.indexOf("cookies_preferences_set=true")}function Pe(){var o=document.cookie.match(new RegExp("(^|;) ?cookies_policy=([^;]*)(;|$)"));if(o){var e=decodeURIComponent(o[2]),t=JSON.parse(e);return t.usage}return!1}function Le(o,e,t){let s;const l=ye("page");ge(o,l,c=>t(12,s=c));let{analyticsId:i="GTM-MBCBVQS"}=e,{analyticsProps:u={}}=e,{hideBanner:m=!1}=e,{usageCookies:y=!1}=e,{width:a="wide"}=e,{pageViewEnabled:f=!0}=e,j,v=!1,B=!1,D="",S=s&&s.url.host.startsWith("cy")?"cy":"en",C=null;function P(c){let w=31536e3,p=window.location.hostname,_=!0,R=`%7B%22essential%22%3Atrue%2C%22usage%22%3A${c=="all"?"true":"false"}%7D`,E="/";document.cookie=`cookies_preferences_set=${_};max-age=${w};domain=${p};path=${E};`,document.cookie=`cookies_policy=${R};max-age=${w};domain=${p};path=${E};`,t(4,D=`You have ${c=="all"?"accepted":"rejected"} all additional cookies.`),c=="all"&&t(8,y=!0),t(3,B=!0),c=="all"&&T()}function T(){console.log("initialising analytics"),window.dataLayer=[{analyticsOptOut:!1,"gtm.whitelist":["google","hjtc","lcl"],"gtm.blacklist":["customScripts","sp","adm","awct","k","d","j"],...u}],function(c,w,p,_,R){c[_]=c[_]||[],c[_].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var E=w.head,M=w.createElement(p),Y=_!="dataLayer"?"&l="+_:"";M.async=!0,M.src="https://www.googletagmanager.com/gtm.js?id="+R+Y,E.appendChild(M)}(window,document,"script","dataLayer",i),s&&(C=`${s.url.href}`.replace(s.url.hash,""))}function V(c){if(c&&C){const w=`${c.url.href}`.replace(c.url.hash,"");w!==C&&(C=w,Ee({event:"pageView",pageURL:C,...u}))}}he(()=>{j=!0,l||(S=document.location.host.startsWith("cy")?"cy":"en"),t(2,v=!Ie()),t(8,y=Pe()),y&&j&&T()});const L={"Cookies on ons.gov.uk":"Cwcis ar ons.gov.uk","Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.":"Ffeiliau bach a gaiff eu storio ar eich dyfais pan fyddwch yn mynd ar wefan yw cwcis. Rydym ni’n defnyddio rhai cwcis hanfodol i wneud i’r wefan hon weithio.","We would like to set":"Hoffem osod","additional cookies":"cwcis ychwanegol","to remember your settings and understand how you use the site. This helps us to improve our services.":"er mwyn cofio eich gosodiadau a deall sut rydych chi’n defnyddio’r wefan. Mae hyn yn ein helpu ni i wella ein gwasanaethau.","Accept additional cookies":"Derbyn cwcis ychwanegol","Reject additional cookies":"Gwrthod cwcis ychwanegol","View cookies":"Gweld cwcis","You have accepted all additional cookies.":"Rydych chi wedi derbyn yr holl gwcis ychwanegol.","You have rejected all additional cookies.":"Rydych chi wedi gwrthod yr holl gwcis ychwanegol.","You can":"Gallwch chi","change your cookie preferences":"newid eich dewisiadau o ran cwcis","at any time.":"ar unrhyw adeg.",Hide:"Cuddio"},g=c=>S=="cy"&&L[c]?L[c]:c,k=()=>P("all"),h=()=>P("reject"),A=()=>t(2,v=!1);return o.$$set=c=>{"analyticsId"in c&&t(9,i=c.analyticsId),"analyticsProps"in c&&t(10,u=c.analyticsProps),"hideBanner"in c&&t(0,m=c.hideBanner),"usageCookies"in c&&t(8,y=c.usageCookies),"width"in c&&t(1,a=c.width),"pageViewEnabled"in c&&t(11,f=c.pageViewEnabled)},o.$$.update=()=>{o.$$.dirty&6144&&f&&V(s)},[m,a,v,B,D,l,P,g,y,i,u,f,s,k,h,A]}class $ extends le{constructor(e){super(),ce(this,e,Le,De,re,{analyticsId:9,analyticsProps:10,hideBanner:0,usageCookies:8,width:1,pageViewEnabled:11})}}function Re(o){let e,t;const s=[o[0]];let l={};for(let i=0;i<s.length;i+=1)l=de(l,s[i]);return e=new $({props:l}),{c(){N(e.$$.fragment)},m(i,u){U(e,i,u),t=!0},p(i,u){const m=u&1?ue(s,[fe(i[0])]):{};e.$set(m)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){q(e.$$.fragment,i),t=!1},d(i){z(e,i)}}}function Se(o){let e,t,s,l,i,u;const m=[{title:"Layout/AnalyticsBanner"},{component:$},{argTypes:{}},ae(oe)];let y={};for(let a=0;a<m.length;a+=1)y=de(y,m[a]);return e=new ve({props:y}),s=new Ce({props:{$$slots:{default:[Re,({args:a})=>({0:a}),({args:a})=>a?1:0]},$$scope:{ctx:o}}}),i=new Ae({props:{name:"Default",args:{}}}),{c(){N(e.$$.fragment),t=b(),N(s.$$.fragment),l=b(),N(i.$$.fragment)},m(a,f){U(e,a,f),G(a,t,f),U(s,a,f),G(a,l,f),U(i,a,f),u=!0},p(a,[f]){const j=f&0?ue(m,[m[0],f&0&&{component:$},m[2],f&0&&fe(ae(oe))]):{};e.$set(j);const v={};f&3&&(v.$$scope={dirty:f,ctx:a}),s.$set(v)},i(a){u||(Q(e.$$.fragment,a),Q(s.$$.fragment,a),Q(i.$$.fragment,a),u=!0)},o(a){q(e.$$.fragment,a),q(s.$$.fragment,a),q(i.$$.fragment,a),u=!1},d(a){z(e,a),a&&W(t),z(s,a),a&&W(l),z(i,a)}}}class Te extends le{constructor(e){super(),ce(this,e,null,Se,re,{})}}const me=be(Te,{meta:{title:"Layout/AnalyticsBanner"},stories:{"tpl:default":{storyId:"layout-analyticsbanner--default",name:"default",template:!0,source:"<AnalyticsBanner {...args} />",hasArgs:!0},Default:{storyId:"layout-analyticsbanner--default",name:"Default",template:!1,hasArgs:!1}},allocatedIds:["default","Meta","Template","Story","componentDocs","AnalyticsBanner","withComponentDocs"]}),Ye=me.meta,Ge=["Default"],We=me.stories.Default;export{We as Default,Ge as __namedExportsOrder,Ye as default};
//# sourceMappingURL=AnalyticsBanner.stories-de216914.js.map
