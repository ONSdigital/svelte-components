import{S as le,i as ce,s as re,e as pe,a as G,z as te,d as W,E as ye,I as ge,o as he,x as d,L as c,y as ne,Q as R,w as b,Z as J,P as s,Y as K,R as we,ad as se,B as ke,p as de,j as N,m as U,k as ue,l as fe,b as Q,t as q,n as z}from"./index-93ed49d9.js";import{p as be,w as oe,M as ve,T as Ce,S as Ae}from"./collect-stories-46e6ba01.js";const ae=`This component will display a cookie banner and export a function that allows you to push events to the Google Analytics dataLayer array.

<!-- prettier-ignore -->
\`\`\`html
<script>
  import { AnalyticsBanner, AnalyticsEvent } from "@onsvisual/svelte-components";

  // Example of an analytics event triggered by another event "e"
  function doAnalyticsEvent(e) {
    // Assumes that e.detail is in the form {key1: "value1", key2: "value2", etc}
    AnalyticsEvent({event: "eventName", ...e.detail});
  }
<\/script>

<AnalyticsBanner analyticsId="{id_string}" />
<!-- Rest of page content -->
\`\`\`
`;function ie(o){let e;function t(l,u){return l[3]?Be:je}let n=t(o),i=n(o);return{c(){e=d("div"),i.c(),c(e,"class","ons-cookies-banner svelte-1syey1g"),c(e,"role","region"),c(e,"aria-label","Cookies banner"),ne(e,"display",o[2]?"block":null)},m(l,u){G(l,e,u),i.m(e,null)},p(l,u){n===(n=t(l))&&i?i.p(l,u):(i.d(1),i=n(l),i&&(i.c(),i.m(e,null))),u&4&&ne(e,"display",l[2]?"block":null)},d(l){l&&W(e),i.d()}}}function Be(o){let e,t,n,i,l,u=o[7](o[4])+"",m,y,a,f=o[7]("You can")+"",j,v,B,D=o[7]("change your cookie preferences")+"",S,C,I=o[7]("at any time")+"",T,M,P,g,h,w,A,r,k;return{c(){e=d("div"),t=d("div"),n=d("div"),i=d("p"),l=d("span"),m=R(u),y=b(),a=d("span"),j=R(f),v=b(),B=d("a"),S=R(D),C=b(),T=R(I),M=R("."),P=b(),g=d("div"),h=d("button"),w=d("span"),A=d("span"),A.textContent=`${o[7]("Hide")}`,c(B,"href",F+"/cookies"),c(a,"class","ons-cookies-banner__preferences-text"),c(i,"class","ons-cookies-banner__desc ons-u-mb-no@s ons-u-mr-s@s"),c(n,"class","ons-grid__col ons-grid__col--flex ons-col-auto ons-u-flex-shrink@s"),c(A,"class","ons-btn__text"),c(w,"class","ons-btn__inner"),c(h,"type","button"),c(h,"class","ons-btn ons-btn--secondary ons-btn--small ons-js-hide-button"),c(h,"aria-label",o[7]("Hide this message")),c(g,"class","ons-grid__col"),c(t,"class","ons-grid ons-grid--flex ons-grid--between ons-grid--gutterless ons-grid--no-wrap@s ons-grid--vertical-center"),c(e,"class","ons-container ons-cookies-banner__confirmation svelte-1syey1g"),J(e,"ons-page__container--wider",o[1]==="wider")},m(p,_){G(p,e,_),s(e,t),s(t,n),s(n,i),s(i,l),s(l,m),s(i,y),s(i,a),s(a,j),s(a,v),s(a,B),s(B,S),s(a,C),s(a,T),s(a,M),s(t,P),s(t,g),s(g,h),s(h,w),s(w,A),r||(k=K(h,"click",o[15]),r=!0)},p(p,_){_&16&&u!==(u=p[7](p[4])+"")&&we(m,u),_&2&&J(e,"ons-page__container--wider",p[1]==="wider")},d(p){p&&W(e),r=!1,k()}}}function je(o){let e,t,n,i,l,u,m,y,a,f,j=o[7]("We would like to set")+"",v,B,D,S=o[7]("additional cookies")+"",C,I,T=o[7]("to remember your settings and understand how you use the site. This helps us to improve our services.")+"",M,P,g,h,w,A,r,k,p,_,L,E,V,Y,H,_e=o[7]("View cookies")+"",$,Z,ee;return{c(){e=d("form"),t=d("div"),n=d("div"),i=d("div"),l=d("h2"),l.textContent=`${o[7]("Cookies on ons.gov.uk")}`,u=b(),m=d("div"),y=d("p"),y.textContent=`${o[7]("Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.")}`,a=b(),f=d("p"),v=R(j),B=b(),D=d("a"),C=R(S),I=b(),M=R(T),P=b(),g=d("div"),h=d("div"),w=d("button"),A=d("span"),r=d("span"),r.textContent=`${o[7]("Accept additional cookies")}`,k=b(),p=d("div"),_=d("button"),L=d("span"),E=d("span"),E.textContent=`${o[7]("Reject additional cookies")}`,V=b(),Y=d("div"),H=d("a"),$=R(_e),c(l,"class","ons-cookies-banner__title ons-u-mb-xs"),c(D,"href",F+"/cookies"),c(m,"class","ons-cookies-banner__statement"),c(i,"class","ons-grid__col ons-col-8@m"),c(n,"class","ons-grid"),c(r,"class","ons-btn__text"),c(A,"class","ons-btn__inner"),c(w,"type","submit"),c(w,"class","ons-btn ons-btn--small ons-js-accept-cookies ons-cookies-banner__btn"),c(w,"data-button","accept"),c(h,"class","ons-grid__col"),c(E,"class","ons-btn__text"),c(L,"class","ons-btn__inner"),c(_,"type","button"),c(_,"class","ons-btn ons-btn--small ons-js-reject-cookies ons-cookies-banner__btn"),c(_,"data-button","reject"),c(p,"class","ons-grid__col"),c(H,"class","ons-cookies-banner__link"),c(H,"href",F+"/cookies"),c(Y,"class","ons-grid__col"),c(g,"class","ons-grid ons-grid--flex ons-u-mt-s"),c(t,"class","ons-container ons-cookies-banner__primary svelte-1syey1g"),J(t,"ons-page__container--wider",o[1]==="wider"),c(e,"action",F+"/cookies/accept-all"),c(e,"method","GET"),c(e,"id","global-cookie-message"),c(e,"aria-label","cookie banner")},m(O,x){G(O,e,x),s(e,t),s(t,n),s(n,i),s(i,l),s(i,u),s(i,m),s(m,y),s(m,a),s(m,f),s(f,v),s(f,B),s(f,D),s(D,C),s(f,I),s(f,M),s(t,P),s(t,g),s(g,h),s(h,w),s(w,A),s(A,r),s(g,k),s(g,p),s(p,_),s(_,L),s(L,E),s(g,V),s(g,Y),s(Y,H),s(H,$),Z||(ee=[K(w,"click",se(o[13])),K(_,"click",se(o[14]))],Z=!0)},p(O,x){x&2&&J(t,"ons-page__container--wider",O[1]==="wider")},d(O){O&&W(e),Z=!1,ke(ee)}}}function De(o){let e,t=o[2]&&!o[0]&&ie(o);return{c(){t&&t.c(),e=pe()},m(n,i){t&&t.m(n,i),G(n,e,i)},p(n,[i]){n[2]&&!n[0]?t?t.p(n,i):(t=ie(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:te,o:te,d(n){t&&t.d(n),n&&W(e)}}}function Ee(o){window!=null&&window.dataLayer&&window.dataLayer.push(o)}let F="//www.ons.gov.uk";function Re(){return-1<document.cookie.indexOf("cookies_preferences_set=true")}function Ie(o,e){const t=new RegExp(`'${o}':(.*?)[,}]`),n=e.match(t);return n?n[1]:null}function Pe(){var o=document.cookie.match(new RegExp("(^|;) ?cookies_policy=([^;]*)(;|$)"));if(o){console.debug("legacy cookies_policy found");var e=decodeURIComponent(o[2]),t=JSON.parse(e);return console.debug("usage is",t.usage),t.usage}var n=document.cookie.match("(?:^|; )ons_cookie_policy=({.*?})");if(n){console.debug("ons_cookie_policy found");var i=Ie("usage",n[1]);return console.debug("usage is",i),i==="true"}return console.debug("no cookie found - opting out"),!1}function Le(o,e,t){let n;const i=ye("page");ge(o,i,r=>t(12,n=r));let{analyticsId:l="GTM-MBCBVQS"}=e,{analyticsProps:u={}}=e,{hideBanner:m=!1}=e,{usageCookies:y=!1}=e,{width:a="wide"}=e,{pageViewEnabled:f=!0}=e,j,v=!1,B=!1,D="",S=n&&n.url.host.startsWith("cy")?"cy":"en",C=null;function I(r){let k=31536e3,p=window.location.hostname,_=!0,L=`%7B%22essential%22%3Atrue%2C%22usage%22%3A${r=="all"?"true":"false"}%7D`,E="/";document.cookie=`cookies_preferences_set=${_};max-age=${k};domain=${p};path=${E};`,document.cookie=`cookies_policy=${L};max-age=${k};domain=${p};path=${E};`,t(4,D=`You have ${r=="all"?"accepted":"rejected"} all additional cookies.`),r=="all"&&t(8,y=!0),t(3,B=!0),r=="all"&&T()}function T(){console.log("initialising analytics"),window.dataLayer=[{analyticsOptOut:!1,"gtm.whitelist":["google","hjtc","lcl"],"gtm.blacklist":["customScripts","sp","adm","awct","k","d","j"],...u}],function(r,k,p,_,L){r[_]=r[_]||[],r[_].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var E=k.head,V=k.createElement(p),Y=_!="dataLayer"?"&l="+_:"";V.async=!0,V.src="https://www.googletagmanager.com/gtm.js?id="+L+Y,E.appendChild(V)}(window,document,"script","dataLayer",l),n&&(C=`${n.url.href}`.replace(n.url.hash,""))}function M(r){if(r&&C){const k=`${r.url.href}`.replace(r.url.hash,"");k!==C&&(C=k,Ee({event:"pageView",pageURL:C,...u}))}}he(()=>{j=!0,i||(S=document.location.host.startsWith("cy")?"cy":"en"),t(2,v=!Re()),t(8,y=Pe()),y&&j&&T()});const P={"Cookies on ons.gov.uk":"Cwcis ar ons.gov.uk","Cookies are small files stored on your device when you visit a website. We use some essential cookies to make this website work.":"Ffeiliau bach a gaiff eu storio ar eich dyfais pan fyddwch yn mynd ar wefan yw cwcis. Rydym ni’n defnyddio rhai cwcis hanfodol i wneud i’r wefan hon weithio.","We would like to set":"Hoffem osod","additional cookies":"cwcis ychwanegol","to remember your settings and understand how you use the site. This helps us to improve our services.":"er mwyn cofio eich gosodiadau a deall sut rydych chi’n defnyddio’r wefan. Mae hyn yn ein helpu ni i wella ein gwasanaethau.","Accept additional cookies":"Derbyn cwcis ychwanegol","Reject additional cookies":"Gwrthod cwcis ychwanegol","View cookies":"Gweld cwcis","You have accepted all additional cookies.":"Rydych chi wedi derbyn yr holl gwcis ychwanegol.","You have rejected all additional cookies.":"Rydych chi wedi gwrthod yr holl gwcis ychwanegol.","You can":"Gallwch chi","change your cookie preferences":"newid eich dewisiadau o ran cwcis","at any time.":"ar unrhyw adeg.",Hide:"Cuddio","Hide this message":"Cuddio'r neges hon"},g=r=>S=="cy"&&P[r]?P[r]:r,h=()=>I("all"),w=()=>I("reject"),A=()=>t(2,v=!1);return o.$$set=r=>{"analyticsId"in r&&t(9,l=r.analyticsId),"analyticsProps"in r&&t(10,u=r.analyticsProps),"hideBanner"in r&&t(0,m=r.hideBanner),"usageCookies"in r&&t(8,y=r.usageCookies),"width"in r&&t(1,a=r.width),"pageViewEnabled"in r&&t(11,f=r.pageViewEnabled)},o.$$.update=()=>{o.$$.dirty&6144&&f&&M(n)},[m,a,v,B,D,i,I,g,y,l,u,f,n,h,w,A]}class X extends le{constructor(e){super(),ce(this,e,Le,De,re,{analyticsId:9,analyticsProps:10,hideBanner:0,usageCookies:8,width:1,pageViewEnabled:11})}}function Se(o){let e,t;const n=[o[0]];let i={};for(let l=0;l<n.length;l+=1)i=de(i,n[l]);return e=new X({props:i}),{c(){N(e.$$.fragment)},m(l,u){U(e,l,u),t=!0},p(l,u){const m=u&1?ue(n,[fe(l[0])]):{};e.$set(m)},i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Te(o){let e,t,n,i,l,u;const m=[{title:"Layout/AnalyticsBanner"},{component:X},{argTypes:{}},oe(ae)];let y={};for(let a=0;a<m.length;a+=1)y=de(y,m[a]);return e=new ve({props:y}),n=new Ce({props:{$$slots:{default:[Se,({args:a})=>({0:a}),({args:a})=>a?1:0]},$$scope:{ctx:o}}}),l=new Ae({props:{name:"Default",args:{}}}),{c(){N(e.$$.fragment),t=b(),N(n.$$.fragment),i=b(),N(l.$$.fragment)},m(a,f){U(e,a,f),G(a,t,f),U(n,a,f),G(a,i,f),U(l,a,f),u=!0},p(a,[f]){const j=f&0?ue(m,[m[0],f&0&&{component:X},m[2],f&0&&fe(oe(ae))]):{};e.$set(j);const v={};f&3&&(v.$$scope={dirty:f,ctx:a}),n.$set(v)},i(a){u||(Q(e.$$.fragment,a),Q(n.$$.fragment,a),Q(l.$$.fragment,a),u=!0)},o(a){q(e.$$.fragment,a),q(n.$$.fragment,a),q(l.$$.fragment,a),u=!1},d(a){z(e,a),a&&W(t),z(n,a),a&&W(i),z(l,a)}}}class Me extends le{constructor(e){super(),ce(this,e,null,Te,re,{})}}const me=be(Me,{meta:{title:"Layout/AnalyticsBanner"},stories:{"tpl:default":{storyId:"layout-analyticsbanner--default",name:"default",template:!0,source:"<AnalyticsBanner {...args} />",hasArgs:!0},Default:{storyId:"layout-analyticsbanner--default",name:"Default",template:!1,hasArgs:!1}},allocatedIds:["default","Meta","Template","Story","componentDocs","AnalyticsBanner","withComponentDocs"]}),Ge=me.meta,We=["Default"],He=me.stories.Default;export{He as Default,We as __namedExportsOrder,Ge as default};
//# sourceMappingURL=AnalyticsBanner.stories-11be49ea.js.map
