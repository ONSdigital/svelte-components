import{S as fe,i as be,s as pe,D as Be,q as P,x as w,w as X,e as Ce,ag as k,U as j,a as v,H as T,Q as Ve,u as Y,r as Z,v as $,b as F,t as J,d as S,O as Ie,z as me,B as ze,ah as xe,C as A,f as L,j as Te,m as Ee,n as Me,F as Oe,o as Re,A as re,a9 as De,I as qe,J as Ae}from"./index-4c87ff1b.js";import{a as He}from"./collect-stories-1e766e4e.js";import{C as Le}from"./Container-5a878ab8.js";const{window:ye}=xe,je=n=>({}),ce=n=>({}),Fe=n=>({}),de=n=>({});function ae(n){let t;return{c(){t=w("div"),A(t,"class","ons-spacer")},m(e,s){v(e,t,s)},d(e){e&&S(t)}}}function Je(n){let t,e,s,i,d,c,a,u,p,g,y;Be(n[23]);const _=n[22].background,r=P(_,n,n[21],de),B=n[22].foreground,m=P(B,n,n[21],ce);let b=n[2]&&ae();return{c(){t=w("svelte-scroller-outer"),e=w("svelte-scroller-background-container"),s=w("svelte-scroller-background"),r&&r.c(),d=X(),c=w("svelte-scroller-foreground"),m&&m.c(),a=X(),b&&b.c(),u=Ce(),k(s,"class","svelte-koluze"),k(e,"class","background-container svelte-koluze"),k(e,"style",i=""+(n[8]+n[7])),k(c,"class","svelte-koluze"),k(t,"id",n[0]),k(t,"class","svelte-koluze"),j(t,"splitscreen",n[1])},m(l,f){v(l,t,f),T(t,e),T(e,s),r&&r.m(s,null),n[24](s),T(t,d),T(t,c),m&&m.m(c,null),n[25](c),n[26](t),v(l,a,f),b&&b.m(l,f),v(l,u,f),p=!0,g||(y=Ve(ye,"resize",n[23]),g=!0)},p(l,f){r&&r.p&&(!p||f[0]&2097152)&&Y(r,_,l,l[21],p?$(_,l[21],f,Fe):Z(l[21]),de),(!p||f[0]&384&&i!==(i=""+(l[8]+l[7])))&&k(e,"style",i),m&&m.p&&(!p||f[0]&2097152)&&Y(m,B,l,l[21],p?$(B,l[21],f,je):Z(l[21]),ce),(!p||f[0]&1)&&k(t,"id",l[0]),(!p||f[0]&2)&&j(t,"splitscreen",l[1]),l[2]?b||(b=ae(),b.c(),b.m(u.parentNode,u)):b&&(b.d(1),b=null)},i(l){p||(F(r,l),F(m,l),p=!0)},o(l){J(r,l),J(m,l),p=!1},d(l){l&&S(t),r&&r.d(l),n[24](null),m&&m.d(l),n[25](null),n[26](null),l&&S(a),b&&b.d(l),l&&S(u),g=!1,y()}}}const h=[];let q;if(typeof window<"u"){const n=()=>h.forEach(t=>t());window.addEventListener("scroll",n),window.addEventListener("resize",n)}if(typeof IntersectionObserver<"u"){const n=new Map,t=new IntersectionObserver((e,s)=>{e.forEach(i=>{const d=n.get(i.target),c=h.indexOf(d);i.isIntersecting?c===-1&&h.push(d):(d(),c!==-1&&h.splice(c,1))})},{rootMargin:"400px 0px"});q={add:({outer:e,update:s})=>{const{top:i,bottom:d}=e.getBoundingClientRect();i<window.innerHeight&&d>0&&h.push(s),n.set(e,s),t.observe(e)},remove:({outer:e,update:s})=>{if(n.get(e)){const i=h.indexOf(s);i!==-1&&h.splice(i,1),n.delete(e),t.unobserve(e)}}}}else q={add:({update:n})=>{h.push(n)},remove:({update:n})=>{const t=h.indexOf(n);t!==-1&&h.splice(t,1)}};let Ne=0,Qe=1;function Ue(n,t,e){let s,i,d,c,a,u,{$$slots:p={},$$scope:g}=t;const y=Ie();let{id:_=null}=t,{splitscreen:r=!1}=t,{marginBottom:B=!0}=t,{threshold:m=.7}=t,{count:b=0}=t,{index:l=0}=t,{sectionId:f=null}=t,{offset:N=0}=t,{progress:E=0}=t,{visible:M=!1}=t;const Q=He([]);me(n,Q,o=>e(20,u=o)),ze("sections",Q);let O,C,R,H,ee,V=0,I,D=0,U=1;function ge(o){return O&&q.remove(O),e(10,b=o.length),W(),O={outer:C,update:W},q.add(O),()=>q.remove(O)}function W(){if(!R)return;const o=C.getBoundingClientRect();ee=o.left,e(19,U=o.right-ee);const z=R.getBoundingClientRect(),te=H.getBoundingClientRect(),G=z.top<V&&z.bottom>0,ve=G&&!M,Se=!G&&M;e(15,M=G);const ne=z.bottom-z.top;te.bottom-te.top;const ie=i-s;e(14,E=(s-z.top)/(ne-ie)),E<=0?(e(18,D=0),e(17,I=!1)):E>=1?(e(18,D=ne-ie),e(17,I=!1)):(e(18,D=s),e(17,I=!0));for(let x=0;x<u.length;x++){const K=u[x],{top:se}=K.getBoundingClientRect(),le=u[x+1],oe=le?le.getBoundingClientRect().top:z.bottom;if(e(13,N=(d-se)/(oe-se)),oe>=d){l!==x&&(e(11,l=x),e(12,f=K.dataset.id?K.dataset.id:null),y("change",{id:_,index:l,sectionId:f}));break}}ve&&(y("enter",{id:_,index:l,sectionId:f}),y("change",{id:_,index:l,sectionId:f})),Se&&y("exit",{id:_,index:l,sectionId:f})}function _e(){e(4,V=ye.innerHeight)}function he(o){L[o?"unshift":"push"](()=>{H=o,e(6,H)})}function ke(o){L[o?"unshift":"push"](()=>{R=o,e(5,R)})}function we(o){L[o?"unshift":"push"](()=>{C=o,e(3,C)})}return n.$$set=o=>{"id"in o&&e(0,_=o.id),"splitscreen"in o&&e(1,r=o.splitscreen),"marginBottom"in o&&e(2,B=o.marginBottom),"threshold"in o&&e(16,m=o.threshold),"count"in o&&e(10,b=o.count),"index"in o&&e(11,l=o.index),"sectionId"in o&&e(12,f=o.sectionId),"offset"in o&&e(13,N=o.offset),"progress"in o&&e(14,E=o.progress),"visible"in o&&e(15,M=o.visible),"$$scope"in o&&e(21,g=o.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16&&(s=Math.round(Ne*V)),n.$$.dirty[0]&16&&(i=Math.round(Qe*V)),n.$$.dirty[0]&65552&&(d=Math.round(m*V)),n.$$.dirty[0]&65536&&W(),n.$$.dirty[0]&393216&&e(8,c=`
		position: ${I?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${D}px);
		z-index: 1;
	`),n.$$.dirty[0]&655360&&e(7,a=I?`width:${U}px;`:""),n.$$.dirty[0]&1048584&&C&&ge(u)},[_,r,B,C,V,R,H,a,c,Q,b,l,f,N,E,M,m,I,D,U,u,g,p,_e,he,ke,we]}class We extends fe{constructor(t){super(),be(this,t,Ue,Je,pe,{id:0,splitscreen:1,marginBottom:2,threshold:16,count:10,index:11,sectionId:12,offset:13,progress:14,visible:15},null,[-1,-1])}}We.__docgen={version:3,name:"Scroller.svelte",data:[{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the unique ID of the scroller",name:"id",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Enables splitscreen view (captions appear on left on larger screens)",name:"splitscreen",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Adds a margin under the scroller section",name:"marginBottom",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Set the threshold for the transition between scroller sections (0-1)",name:"threshold",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:.7},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: Total number of sections within scroller",name:"count",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: Current section index (number)",name:"index",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Binding: Current section id, if it has one set",name:"sectionId",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: The progress between the start of current scroller section and next (0-1)",name:"offset",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: The progress through the whole scroller (0-1)",name:"progress",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Binding: Whether the scroller is visible on screen or not",name:"visible",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"change"},{visibility:"public",description:null,keywords:[],name:"enter"},{visibility:"public",description:null,keywords:[],name:"exit"}],slots:[{keywords:[],visibility:"public",description:"",name:"background"},{keywords:[],visibility:"public",description:"",name:"foreground"}],refs:[]};function ue(n){let t,e;return{c(){t=w("h2"),e=qe(n[2]),A(t,"class","section-title"),j(t,"ons-u-vh",n[3])},m(s,i){v(s,t,i),T(t,e)},p(s,i){i&4&&Ae(e,s[2]),i&8&&j(t,"ons-u-vh",s[3])},d(s){s&&S(t)}}}function Ge(n){let t,e,s,i=n[2]&&ue(n);const d=n[6].default,c=P(d,n,n[8],null);return{c(){t=w("div"),i&&i.c(),e=X(),c&&c.c(),A(t,"class","ons-scroller-section svelte-oszuw0")},m(a,u){v(a,t,u),i&&i.m(t,null),T(t,e),c&&c.m(t,null),s=!0},p(a,u){a[2]?i?i.p(a,u):(i=ue(a),i.c(),i.m(t,e)):i&&(i.d(1),i=null),c&&c.p&&(!s||u&256)&&Y(c,d,a,a[8],s?$(d,a[8],u,null):Z(a[8]),null)},i(a){s||(F(c,a),s=!0)},o(a){J(c,a),s=!1},d(a){a&&S(t),i&&i.d(),c&&c.d(a)}}}function Ke(n){let t,e,s;return e=new Le({props:{theme:n[1],width:"narrow",$$slots:{default:[Ge]},$$scope:{ctx:n}}}),{c(){t=w("section"),Te(e.$$.fragment),A(t,"data-id",n[0])},m(i,d){v(i,t,d),Ee(e,t,null),n[7](t),s=!0},p(i,[d]){const c={};d&2&&(c.theme=i[1]),d&268&&(c.$$scope={dirty:d,ctx:i}),e.$set(c),(!s||d&1)&&A(t,"data-id",i[0])},i(i){s||(F(e.$$.fragment,i),s=!0)},o(i){J(e.$$.fragment,i),s=!1},d(i){i&&S(t),Me(e),n[7](null)}}}function Pe(n,t,e){let s,{$$slots:i={},$$scope:d}=t,{id:c=null}=t,{theme:a=null}=t,{title:u=""}=t,{hideTitle:p=!1}=t,g;const y=Oe("sections");me(n,y,r=>e(9,s=r)),Re(()=>{y&&re(y,s=[...s,g],s)}),De(()=>{y&&re(y,s=s.filter(r=>r!==g),s)});function _(r){L[r?"unshift":"push"](()=>{g=r,e(4,g)})}return n.$$set=r=>{"id"in r&&e(0,c=r.id),"theme"in r&&e(1,a=r.theme),"title"in r&&e(2,u=r.title),"hideTitle"in r&&e(3,p=r.hideTitle),"$$scope"in r&&e(8,d=r.$$scope)},[c,a,u,p,g,y,i,_,d]}class Xe extends fe{constructor(t){super(),be(this,t,Pe,Ke,pe,{id:0,theme:1,title:2,hideTitle:3})}}Xe.__docgen={version:3,name:"ScrollerSection.svelte",data:[{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the unique ID of the section",name:"id",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:'{"light"|"dark"|"lightblue"}'}],visibility:"public",description:"Sets a predefined theme",name:"theme",kind:"let",static:!1,readonly:!1,type:{kind:"union",text:'"light"|"dark"|"lightblue"',type:[{kind:"type",text:'"light"',type:'"light"'},{kind:"type",text:'"dark"',type:'"dark"'},{kind:"type",text:'"lightblue"',type:'"lightblue"'}]},defaultValue:null},{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the title of the section",name:"title",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:""},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Allows the h2 title tag for the section to be visually hidden",name:"hideTitle",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[{keywords:[],visibility:"public",description:"",name:"default"}],refs:[]};export{We as S,Xe as a};
//# sourceMappingURL=ScrollerSection-44d4ea08.js.map
