import{S as de,i as ae,s as ce,D as ye,q as F,x as h,w as G,e as ge,ag as _,U as H,a as v,H as q,Q as _e,u as K,r as P,v as X,b as L,t as j,d as S,O as he,o as ke,ah as we,C as D,f as A,j as ve,m as Se,n as Be,I as Ve,J as Ce}from"./index-4c87ff1b.js";import{C as Ie}from"./Container-5a878ab8.js";const{window:ue}=we,ze=n=>({}),se=n=>({}),Te=n=>({}),le=n=>({});function oe(n){let t;return{c(){t=h("div"),D(t,"class","ons-spacer")},m(e,s){v(e,t,s)},d(e){e&&S(t)}}}function qe(n){let t,e,s,i,d,r,a,b,f,k,c;ye(n[21]);const B=n[20].background,y=F(B,n,n[19],le),w=n[20].foreground,m=F(w,n,n[19],se);let u=n[2]&&oe();return{c(){t=h("svelte-scroller-outer"),e=h("svelte-scroller-background-container"),s=h("svelte-scroller-background"),y&&y.c(),d=G(),r=h("svelte-scroller-foreground"),m&&m.c(),a=G(),u&&u.c(),b=ge(),_(s,"class","svelte-koluze"),_(e,"class","background-container svelte-koluze"),_(e,"style",i=""+(n[8]+n[7])),_(r,"class","svelte-koluze"),_(t,"id",n[0]),_(t,"class","svelte-koluze"),H(t,"splitscreen",n[1])},m(o,p){v(o,t,p),q(t,e),q(e,s),y&&y.m(s,null),n[22](s),q(t,d),q(t,r),m&&m.m(r,null),n[23](r),n[24](t),v(o,a,p),u&&u.m(o,p),v(o,b,p),f=!0,k||(c=_e(ue,"resize",n[21]),k=!0)},p(o,p){y&&y.p&&(!f||p[0]&524288)&&K(y,B,o,o[19],f?X(B,o[19],p,Te):P(o[19]),le),(!f||p[0]&384&&i!==(i=""+(o[8]+o[7])))&&_(e,"style",i),m&&m.p&&(!f||p[0]&524288)&&K(m,w,o,o[19],f?X(w,o[19],p,ze):P(o[19]),se),(!f||p[0]&1)&&_(t,"id",o[0]),(!f||p[0]&2)&&H(t,"splitscreen",o[1]),o[2]?u||(u=oe(),u.c(),u.m(b.parentNode,b)):u&&(u.d(1),u=null)},i(o){f||(L(y,o),L(m,o),f=!0)},o(o){j(y,o),j(m,o),f=!1},d(o){o&&S(t),y&&y.d(o),n[22](null),m&&m.d(o),n[23](null),n[24](null),o&&S(a),u&&u.d(o),o&&S(b),k=!1,c()}}}const g=[];let J;if(typeof window<"u"){const n=()=>g.forEach(t=>t());window.addEventListener("scroll",n),window.addEventListener("resize",n)}if(typeof IntersectionObserver<"u"){const n=new Map,t=new IntersectionObserver((e,s)=>{e.forEach(i=>{const d=n.get(i.target),r=g.indexOf(d);i.isIntersecting?r===-1&&g.push(d):(d(),r!==-1&&g.splice(r,1))})},{rootMargin:"400px 0px"});J={add:({outer:e,update:s})=>{const{top:i,bottom:d}=e.getBoundingClientRect();i<window.innerHeight&&d>0&&g.push(s),n.set(e,s),t.observe(e)},remove:({outer:e,update:s})=>{const i=g.indexOf(s);i!==-1&&g.splice(i,1),n.delete(e),t.unobserve(e)}}}else J={add:({update:n})=>{g.push(n)},remove:({update:n})=>{const t=g.indexOf(n);t!==-1&&g.splice(t,1)}};let Ee=0,Me=1,Oe="section";function Re(n,t,e){let s,i,d,r,a,{$$slots:b={},$$scope:f}=t;const k=he();let{id:c=null}=t,{splitscreen:B=!1}=t,{marginBottom:y=!0}=t,{threshold:w=.7}=t,{count:m=0}=t,{index:u=0}=t,{sectionId:o=null}=t,{offset:p=0}=t,{progress:E=0}=t,{visible:N=!1}=t,M,V,x,Y,O,C=0,I,R=0,Q=1;ke(()=>{O=V.querySelectorAll(Oe),e(9,m=O.length),U();const l={outer:M,update:U};return J.add(l),()=>J.remove(l)});function U(){if(!V)return;const l=M.getBoundingClientRect();Y=l.left,e(18,Q=l.right-Y);const z=V.getBoundingClientRect(),Z=x.getBoundingClientRect();e(14,N=z.top<C&&z.bottom>0);const $=z.bottom-z.top;Z.bottom-Z.top;const ee=i-s;e(13,E=(s-z.top)/($-ee)),E<=0?(e(17,R=0),e(16,I=!1)):E>=1?(e(17,R=$-ee),e(16,I=!1)):(e(17,R=s),e(16,I=!0));for(let T=0;T<O.length;T++){const W=O[T],{top:te}=W.getBoundingClientRect(),ne=O[T+1],ie=ne?ne.getBoundingClientRect().top:z.bottom;if(e(12,p=(d-te)/(ie-te)),ie>=d){u!==T&&(e(10,u=T),e(11,o=W.dataset.id?W.dataset.id:null),k("change",{id:c,index:u,sectionId:o}));break}}}function fe(){e(3,C=ue.innerHeight)}function be(l){A[l?"unshift":"push"](()=>{x=l,e(6,x)})}function pe(l){A[l?"unshift":"push"](()=>{V=l,e(5,V)})}function me(l){A[l?"unshift":"push"](()=>{M=l,e(4,M)})}return n.$$set=l=>{"id"in l&&e(0,c=l.id),"splitscreen"in l&&e(1,B=l.splitscreen),"marginBottom"in l&&e(2,y=l.marginBottom),"threshold"in l&&e(15,w=l.threshold),"count"in l&&e(9,m=l.count),"index"in l&&e(10,u=l.index),"sectionId"in l&&e(11,o=l.sectionId),"offset"in l&&e(12,p=l.offset),"progress"in l&&e(13,E=l.progress),"visible"in l&&e(14,N=l.visible),"$$scope"in l&&e(19,f=l.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8&&(s=Math.round(Ee*C)),n.$$.dirty[0]&8&&(i=Math.round(Me*C)),n.$$.dirty[0]&32776&&(d=Math.round(w*C)),n.$$.dirty[0]&32768&&U(),n.$$.dirty[0]&196608&&e(8,r=`
		position: ${I?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${R}px);
		z-index: 1;
	`),n.$$.dirty[0]&327680&&e(7,a=I?`width:${Q}px;`:"")},[c,B,y,C,M,V,x,a,r,m,u,o,p,E,N,w,I,R,Q,f,b,fe,be,pe,me]}class De extends de{constructor(t){super(),ae(this,t,Re,qe,ce,{id:0,splitscreen:1,marginBottom:2,threshold:15,count:9,index:10,sectionId:11,offset:12,progress:13,visible:14},null,[-1,-1])}}De.__docgen={version:3,name:"Scroller.svelte",data:[{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the unique ID of the scroller",name:"id",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Enables splitscreen view (captions appear on left on larger screens)",name:"splitscreen",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Adds a margin under the scroller section",name:"marginBottom",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Set the threshold for the transition between scroller sections (0-1)",name:"threshold",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:.7},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: Total number of sections within scroller",name:"count",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: Current section index (number)",name:"index",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Binding: Current section id, if it has one set",name:"sectionId",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: The progress between the start of current scroller section and next (0-1)",name:"offset",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: The progress through the whole scroller (0-1)",name:"progress",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Binding: Whether the scroller is visible on screen or not",name:"visible",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"change"}],slots:[{keywords:[],visibility:"public",description:"",name:"background"},{keywords:[],visibility:"public",description:"",name:"foreground"}],refs:[]};function re(n){let t,e;return{c(){t=h("h2"),e=Ve(n[2]),D(t,"class","section-title"),H(t,"ons-u-vh",n[3])},m(s,i){v(s,t,i),q(t,e)},p(s,i){i&4&&Ce(e,s[2]),i&8&&H(t,"ons-u-vh",s[3])},d(s){s&&S(t)}}}function xe(n){let t,e,s,i=n[2]&&re(n);const d=n[5].default,r=F(d,n,n[7],null);return{c(){t=h("div"),i&&i.c(),e=G(),r&&r.c(),D(t,"class","ons-scroller-section svelte-oszuw0")},m(a,b){v(a,t,b),i&&i.m(t,null),q(t,e),r&&r.m(t,null),s=!0},p(a,b){a[2]?i?i.p(a,b):(i=re(a),i.c(),i.m(t,e)):i&&(i.d(1),i=null),r&&r.p&&(!s||b&128)&&K(r,d,a,a[7],s?X(d,a[7],b,null):P(a[7]),null)},i(a){s||(L(r,a),s=!0)},o(a){j(r,a),s=!1},d(a){a&&S(t),i&&i.d(),r&&r.d(a)}}}function Ae(n){let t,e,s;return e=new Ie({props:{theme:n[1],width:"narrow",$$slots:{default:[xe]},$$scope:{ctx:n}}}),{c(){t=h("section"),ve(e.$$.fragment),D(t,"data-id",n[0])},m(i,d){v(i,t,d),Se(e,t,null),n[6](t),s=!0},p(i,[d]){const r={};d&2&&(r.theme=i[1]),d&140&&(r.$$scope={dirty:d,ctx:i}),e.$set(r),(!s||d&1)&&D(t,"data-id",i[0])},i(i){s||(L(e.$$.fragment,i),s=!0)},o(i){j(e.$$.fragment,i),s=!1},d(i){i&&S(t),Be(e),n[6](null)}}}function He(n,t,e){let{$$slots:s={},$$scope:i}=t,{id:d=null}=t,{theme:r=null}=t,{title:a=""}=t,{hideTitle:b=!1}=t,f;function k(c){A[c?"unshift":"push"](()=>{f=c,e(4,f)})}return n.$$set=c=>{"id"in c&&e(0,d=c.id),"theme"in c&&e(1,r=c.theme),"title"in c&&e(2,a=c.title),"hideTitle"in c&&e(3,b=c.hideTitle),"$$scope"in c&&e(7,i=c.$$scope)},[d,r,a,b,f,s,k,i]}class Le extends de{constructor(t){super(),ae(this,t,He,Ae,ce,{id:0,theme:1,title:2,hideTitle:3})}}Le.__docgen={version:3,name:"ScrollerSection.svelte",data:[{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the unique ID of the section",name:"id",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:'{"light"|"dark"|"lightblue"}'}],visibility:"public",description:"Sets a predefined theme",name:"theme",kind:"let",static:!1,readonly:!1,type:{kind:"union",text:'"light"|"dark"|"lightblue"',type:[{kind:"type",text:'"light"',type:'"light"'},{kind:"type",text:'"dark"',type:'"dark"'},{kind:"type",text:'"lightblue"',type:'"lightblue"'}]},defaultValue:null},{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the title of the section",name:"title",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:""},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Allows the h2 title tag for the section to be visually hidden",name:"hideTitle",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[{keywords:[],visibility:"public",description:"",name:"default"}],refs:[]};export{De as S,Le as a};
//# sourceMappingURL=ScrollerSection-4a59ba80.js.map
