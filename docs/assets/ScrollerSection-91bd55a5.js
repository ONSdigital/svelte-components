import{S as ue,i as fe,s as be,D as we,q as K,x as w,w as P,e as ve,ag as k,U as L,a as v,H as E,Q as Se,u as X,r as Y,v as Z,b as j,t as F,d as S,O as Be,z as me,B as Ce,ah as Ve,C as q,f as H,j as Ie,m as ze,n as Te,F as Ee,o as Me,A as oe,a9 as Oe,I as Re,J as xe}from"./index-4c87ff1b.js";import{a as De}from"./collect-stories-1e766e4e.js";import{C as qe}from"./Container-5a878ab8.js";const{window:pe}=Ve,Ae=n=>({}),re=n=>({}),He=n=>({}),ae=n=>({});function ce(n){let t;return{c(){t=w("div"),q(t,"class","ons-spacer")},m(e,s){v(e,t,s)},d(e){e&&S(t)}}}function Le(n){let t,e,s,i,c,a,d,u,m,y,g;we(n[23]);const h=n[22].background,r=K(h,n,n[21],ae),B=n[22].foreground,p=K(B,n,n[21],re);let f=n[2]&&ce();return{c(){t=w("svelte-scroller-outer"),e=w("svelte-scroller-background-container"),s=w("svelte-scroller-background"),r&&r.c(),c=P(),a=w("svelte-scroller-foreground"),p&&p.c(),d=P(),f&&f.c(),u=ve(),k(s,"class","svelte-koluze"),k(e,"class","background-container svelte-koluze"),k(e,"style",i=""+(n[8]+n[7])),k(a,"class","svelte-koluze"),k(t,"id",n[0]),k(t,"class","svelte-koluze"),L(t,"splitscreen",n[1])},m(o,b){v(o,t,b),E(t,e),E(e,s),r&&r.m(s,null),n[24](s),E(t,c),E(t,a),p&&p.m(a,null),n[25](a),n[26](t),v(o,d,b),f&&f.m(o,b),v(o,u,b),m=!0,y||(g=Se(pe,"resize",n[23]),y=!0)},p(o,b){r&&r.p&&(!m||b[0]&2097152)&&X(r,h,o,o[21],m?Z(h,o[21],b,He):Y(o[21]),ae),(!m||b[0]&384&&i!==(i=""+(o[8]+o[7])))&&k(e,"style",i),p&&p.p&&(!m||b[0]&2097152)&&X(p,B,o,o[21],m?Z(B,o[21],b,Ae):Y(o[21]),re),(!m||b[0]&1)&&k(t,"id",o[0]),(!m||b[0]&2)&&L(t,"splitscreen",o[1]),o[2]?f||(f=ce(),f.c(),f.m(u.parentNode,u)):f&&(f.d(1),f=null)},i(o){m||(j(r,o),j(p,o),m=!0)},o(o){F(r,o),F(p,o),m=!1},d(o){o&&S(t),r&&r.d(o),n[24](null),p&&p.d(o),n[25](null),n[26](null),o&&S(d),f&&f.d(o),o&&S(u),y=!1,g()}}}const _=[];let D;if(typeof window<"u"){const n=()=>_.forEach(t=>t());window.addEventListener("scroll",n),window.addEventListener("resize",n)}if(typeof IntersectionObserver<"u"){const n=new Map,t=new IntersectionObserver((e,s)=>{e.forEach(i=>{const c=n.get(i.target),a=_.indexOf(c);i.isIntersecting?a===-1&&_.push(c):(c(),a!==-1&&_.splice(a,1))})},{rootMargin:"400px 0px"});D={add:({outer:e,update:s})=>{const{top:i,bottom:c}=e.getBoundingClientRect();i<window.innerHeight&&c>0&&_.push(s),n.set(e,s),t.observe(e)},remove:({outer:e,update:s})=>{if(n.get(e)){const i=_.indexOf(s);i!==-1&&_.splice(i,1),n.delete(e),t.unobserve(e)}}}}else D={add:({update:n})=>{_.push(n)},remove:({update:n})=>{const t=_.indexOf(n);t!==-1&&_.splice(t,1)}};let je=0,Fe=1;function Je(n,t,e){let s,i,c,a,d,u,{$$slots:m={},$$scope:y}=t;const g=Be();let{id:h=null}=t,{splitscreen:r=!1}=t,{marginBottom:B=!0}=t,{threshold:p=.7}=t,{count:f=0}=t,{index:o=0}=t,{sectionId:b=null}=t,{offset:J=0}=t,{progress:M=0}=t,{visible:N=!1}=t;const Q=De([]);me(n,Q,l=>e(20,u=l)),Ce("sections",Q);let O,C,R,A,$,V=0,I,x=0,U=1;function ye(l){return console.log("updating scroller",l.length),O&&D.remove(O),e(10,f=l.length),W(),O={outer:C,update:W},D.add(O),()=>D.remove(O)}function W(){if(!R)return;const l=C.getBoundingClientRect();$=l.left,e(19,U=l.right-$);const z=R.getBoundingClientRect(),ee=A.getBoundingClientRect();e(15,N=z.top<V&&z.bottom>0);const te=z.bottom-z.top;ee.bottom-ee.top;const ne=i-s;e(14,M=(s-z.top)/(te-ne)),M<=0?(e(18,x=0),e(17,I=!1)):M>=1?(e(18,x=te-ne),e(17,I=!1)):(e(18,x=s),e(17,I=!0));for(let T=0;T<u.length;T++){const G=u[T],{top:ie}=G.getBoundingClientRect(),se=u[T+1],le=se?se.getBoundingClientRect().top:z.bottom;if(e(13,J=(c-ie)/(le-ie)),le>=c){o!==T&&(e(11,o=T),e(12,b=G.dataset.id?G.dataset.id:null),g("change",{id:h,index:o,sectionId:b}));break}}}function ge(){e(4,V=pe.innerHeight)}function _e(l){H[l?"unshift":"push"](()=>{A=l,e(6,A)})}function he(l){H[l?"unshift":"push"](()=>{R=l,e(5,R)})}function ke(l){H[l?"unshift":"push"](()=>{C=l,e(3,C)})}return n.$$set=l=>{"id"in l&&e(0,h=l.id),"splitscreen"in l&&e(1,r=l.splitscreen),"marginBottom"in l&&e(2,B=l.marginBottom),"threshold"in l&&e(16,p=l.threshold),"count"in l&&e(10,f=l.count),"index"in l&&e(11,o=l.index),"sectionId"in l&&e(12,b=l.sectionId),"offset"in l&&e(13,J=l.offset),"progress"in l&&e(14,M=l.progress),"visible"in l&&e(15,N=l.visible),"$$scope"in l&&e(21,y=l.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16&&(s=Math.round(je*V)),n.$$.dirty[0]&16&&(i=Math.round(Fe*V)),n.$$.dirty[0]&65552&&(c=Math.round(p*V)),n.$$.dirty[0]&65536&&W(),n.$$.dirty[0]&393216&&e(8,a=`
		position: ${I?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${x}px);
		z-index: 1;
	`),n.$$.dirty[0]&655360&&e(7,d=I?`width:${U}px;`:""),n.$$.dirty[0]&1048584&&C&&ye(u)},[h,r,B,C,V,R,A,d,a,Q,f,o,b,J,M,N,p,I,x,U,u,y,m,ge,_e,he,ke]}class Ne extends ue{constructor(t){super(),fe(this,t,Je,Le,be,{id:0,splitscreen:1,marginBottom:2,threshold:16,count:10,index:11,sectionId:12,offset:13,progress:14,visible:15},null,[-1,-1])}}Ne.__docgen={version:3,name:"Scroller.svelte",data:[{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the unique ID of the scroller",name:"id",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Enables splitscreen view (captions appear on left on larger screens)",name:"splitscreen",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Adds a margin under the scroller section",name:"marginBottom",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Set the threshold for the transition between scroller sections (0-1)",name:"threshold",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:.7},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: Total number of sections within scroller",name:"count",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: Current section index (number)",name:"index",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Binding: Current section id, if it has one set",name:"sectionId",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: The progress between the start of current scroller section and next (0-1)",name:"offset",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{number}"}],visibility:"public",description:"Binding: The progress through the whole scroller (0-1)",name:"progress",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:0},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Binding: Whether the scroller is visible on screen or not",name:"visible",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"change"}],slots:[{keywords:[],visibility:"public",description:"",name:"background"},{keywords:[],visibility:"public",description:"",name:"foreground"}],refs:[]};function de(n){let t,e;return{c(){t=w("h2"),e=Re(n[2]),q(t,"class","section-title"),L(t,"ons-u-vh",n[3])},m(s,i){v(s,t,i),E(t,e)},p(s,i){i&4&&xe(e,s[2]),i&8&&L(t,"ons-u-vh",s[3])},d(s){s&&S(t)}}}function Qe(n){let t,e,s,i=n[2]&&de(n);const c=n[6].default,a=K(c,n,n[8],null);return{c(){t=w("div"),i&&i.c(),e=P(),a&&a.c(),q(t,"class","ons-scroller-section svelte-oszuw0")},m(d,u){v(d,t,u),i&&i.m(t,null),E(t,e),a&&a.m(t,null),s=!0},p(d,u){d[2]?i?i.p(d,u):(i=de(d),i.c(),i.m(t,e)):i&&(i.d(1),i=null),a&&a.p&&(!s||u&256)&&X(a,c,d,d[8],s?Z(c,d[8],u,null):Y(d[8]),null)},i(d){s||(j(a,d),s=!0)},o(d){F(a,d),s=!1},d(d){d&&S(t),i&&i.d(),a&&a.d(d)}}}function Ue(n){let t,e,s;return e=new qe({props:{theme:n[1],width:"narrow",$$slots:{default:[Qe]},$$scope:{ctx:n}}}),{c(){t=w("section"),Ie(e.$$.fragment),q(t,"data-id",n[0])},m(i,c){v(i,t,c),ze(e,t,null),n[7](t),s=!0},p(i,[c]){const a={};c&2&&(a.theme=i[1]),c&268&&(a.$$scope={dirty:c,ctx:i}),e.$set(a),(!s||c&1)&&q(t,"data-id",i[0])},i(i){s||(j(e.$$.fragment,i),s=!0)},o(i){F(e.$$.fragment,i),s=!1},d(i){i&&S(t),Te(e),n[7](null)}}}function We(n,t,e){let s,{$$slots:i={},$$scope:c}=t,{id:a=null}=t,{theme:d=null}=t,{title:u=""}=t,{hideTitle:m=!1}=t,y;const g=Ee("sections");me(n,g,r=>e(9,s=r)),Me(()=>{g&&oe(g,s=[...s,y],s)}),Oe(()=>{g&&oe(g,s=s.filter(r=>r!==y),s)});function h(r){H[r?"unshift":"push"](()=>{y=r,e(4,y)})}return n.$$set=r=>{"id"in r&&e(0,a=r.id),"theme"in r&&e(1,d=r.theme),"title"in r&&e(2,u=r.title),"hideTitle"in r&&e(3,m=r.hideTitle),"$$scope"in r&&e(8,c=r.$$scope)},[a,d,u,m,y,g,i,h,c]}class Ge extends ue{constructor(t){super(),fe(this,t,We,Ue,be,{id:0,theme:1,title:2,hideTitle:3})}}Ge.__docgen={version:3,name:"ScrollerSection.svelte",data:[{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the unique ID of the section",name:"id",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:null},{keywords:[{name:"type",description:'{"light"|"dark"|"lightblue"}'}],visibility:"public",description:"Sets a predefined theme",name:"theme",kind:"let",static:!1,readonly:!1,type:{kind:"union",text:'"light"|"dark"|"lightblue"',type:[{kind:"type",text:'"light"',type:'"light"'},{kind:"type",text:'"dark"',type:'"dark"'},{kind:"type",text:'"lightblue"',type:'"lightblue"'}]},defaultValue:null},{keywords:[{name:"type",description:"{string}"}],visibility:"public",description:"Sets the title of the section",name:"title",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:""},{keywords:[{name:"type",description:"{boolean}"}],visibility:"public",description:"Allows the h2 title tag for the section to be visually hidden",name:"hideTitle",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[{keywords:[],visibility:"public",description:"",name:"default"}],refs:[]};export{Ne as S,Ge as a};
//# sourceMappingURL=ScrollerSection-91bd55a5.js.map
